# Generated by Django 5.2.7 on 2025-12-30 13:32

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("forms", "0006_abtestresult_accessibilityaudit_accessibilityconfig_and_more"),
        ("users", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name="APIVersion",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("version", models.CharField(max_length=20, unique=True)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("development", "Development"),
                            ("beta", "Beta"),
                            ("stable", "Stable"),
                            ("deprecated", "Deprecated"),
                            ("retired", "Retired"),
                        ],
                        default="development",
                        max_length=20,
                    ),
                ),
                ("release_date", models.DateField(null=True)),
                ("deprecation_date", models.DateField(null=True)),
                ("sunset_date", models.DateField(null=True)),
                ("changelog", models.TextField(blank=True)),
                ("breaking_changes", models.JSONField(default=list)),
                ("migration_guide", models.TextField(blank=True)),
                ("supported_features", models.JSONField(default=list)),
                ("active_consumers", models.IntegerField(default=0)),
                ("request_count_30d", models.BigIntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "ordering": ["-version"],
            },
        ),
        migrations.CreateModel(
            name="Changelog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("version", models.CharField(max_length=50)),
                ("release_date", models.DateField()),
                ("title", models.CharField(max_length=200)),
                ("summary", models.TextField(blank=True)),
                ("new_features", models.JSONField(default=list)),
                ("improvements", models.JSONField(default=list)),
                ("bug_fixes", models.JSONField(default=list)),
                ("breaking_changes", models.JSONField(default=list)),
                ("deprecations", models.JSONField(default=list)),
                ("full_changelog", models.TextField(blank=True)),
                ("is_published", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "ordering": ["-release_date"],
            },
        ),
        migrations.CreateModel(
            name="CodeSample",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("endpoint", models.CharField(max_length=200)),
                ("method", models.CharField(max_length=10)),
                ("language", models.CharField(max_length=50)),
                ("title", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("code", models.TextField()),
                ("dependencies", models.JSONField(default=list)),
                ("order", models.IntegerField(default=0)),
                ("is_published", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "ordering": ["endpoint", "order"],
            },
        ),
        migrations.CreateModel(
            name="ComplianceFramework",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "code",
                    models.CharField(
                        choices=[
                            ("gdpr", "GDPR"),
                            ("ccpa", "CCPA"),
                            ("hipaa", "HIPAA"),
                            ("pci_dss", "PCI-DSS"),
                            ("sox", "SOX"),
                            ("ferpa", "FERPA"),
                            ("coppa", "COPPA"),
                            ("lgpd", "LGPD"),
                            ("pipeda", "PIPEDA"),
                        ],
                        max_length=20,
                        unique=True,
                    ),
                ),
                ("name", models.CharField(max_length=100)),
                ("description", models.TextField()),
                (
                    "requirements",
                    models.JSONField(
                        default=list,
                        help_text="List of compliance requirements with IDs and descriptions",
                    ),
                ),
                (
                    "automated_checks",
                    models.JSONField(
                        default=list, help_text="List of automated compliance checks"
                    ),
                ),
                ("documentation_requirements", models.JSONField(default=list)),
                (
                    "applicable_regions",
                    models.JSONField(default=list, help_text="ISO country codes"),
                ),
                ("version", models.CharField(max_length=20)),
                ("last_updated", models.DateField()),
            ],
            options={
                "db_table": "compliance_frameworks",
            },
        ),
        migrations.CreateModel(
            name="ErrorCode",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("code", models.CharField(max_length=50, unique=True)),
                ("http_status", models.IntegerField()),
                ("title", models.CharField(max_length=200)),
                ("description", models.TextField()),
                ("possible_causes", models.JSONField(default=list)),
                ("resolution_steps", models.JSONField(default=list)),
                ("related_docs", models.JSONField(default=list)),
                ("is_published", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "ordering": ["code"],
            },
        ),
        migrations.CreateModel(
            name="RateLimitTier",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=100, unique=True)),
                ("description", models.TextField(blank=True)),
                ("requests_per_minute", models.IntegerField(default=60)),
                ("requests_per_hour", models.IntegerField(default=1000)),
                ("requests_per_day", models.IntegerField(default=10000)),
                ("burst_limit", models.IntegerField(default=100)),
                ("priority_queue", models.BooleanField(default=False)),
                ("dedicated_support", models.BooleanField(default=False)),
                (
                    "price_monthly",
                    models.DecimalField(decimal_places=2, default=0, max_digits=10),
                ),
                (
                    "price_yearly",
                    models.DecimalField(decimal_places=2, default=0, max_digits=10),
                ),
                ("order", models.IntegerField(default=0)),
                ("is_active", models.BooleanField(default=True)),
            ],
            options={
                "ordering": ["order"],
            },
        ),
        migrations.CreateModel(
            name="AccessibilityAutoFix",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                (
                    "auto_apply",
                    models.BooleanField(
                        default=False,
                        help_text="Automatically apply fixes without confirmation",
                    ),
                ),
                ("fix_color_contrast", models.BooleanField(default=True)),
                ("fix_missing_labels", models.BooleanField(default=True)),
                ("fix_focus_indicators", models.BooleanField(default=True)),
                ("fix_aria_attributes", models.BooleanField(default=True)),
                ("fix_heading_structure", models.BooleanField(default=True)),
                ("fix_form_validation", models.BooleanField(default=True)),
                ("fix_touch_targets", models.BooleanField(default=True)),
                ("fix_motion", models.BooleanField(default=True)),
                (
                    "target_level",
                    models.CharField(
                        choices=[
                            ("A", "Level A"),
                            ("AA", "Level AA"),
                            ("AAA", "Level AAA"),
                        ],
                        default="AA",
                        max_length=10,
                    ),
                ),
                ("total_fixes_applied", models.IntegerField(default=0)),
                ("last_scan_at", models.DateTimeField(null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="accessibility_auto_fixes",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "verbose_name_plural": "Accessibility auto fixes",
            },
        ),
        migrations.CreateModel(
            name="AccessibilityFix",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("issue_type", models.CharField(max_length=100)),
                (
                    "wcag_criterion",
                    models.CharField(help_text="e.g., 1.4.3", max_length=20),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("critical", "Critical"),
                            ("serious", "Serious"),
                            ("moderate", "Moderate"),
                            ("minor", "Minor"),
                        ],
                        max_length=20,
                    ),
                ),
                ("element_selector", models.CharField(blank=True, max_length=500)),
                ("field_id", models.CharField(blank=True, max_length=100)),
                ("original_value", models.JSONField(default=dict)),
                ("fixed_value", models.JSONField(default=dict)),
                ("fix_description", models.TextField()),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("detected", "Detected"),
                            ("pending", "Pending Review"),
                            ("applied", "Applied"),
                            ("rejected", "Rejected"),
                            ("reverted", "Reverted"),
                        ],
                        default="detected",
                        max_length=20,
                    ),
                ),
                ("applied_at", models.DateTimeField(null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "applied_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="fixes",
                        to="forms.accessibilityautofix",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AdvancedComplianceReport",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "report_type",
                    models.CharField(
                        choices=[
                            ("audit_trail", "Audit Trail Export"),
                            ("compliance_summary", "Compliance Summary"),
                            ("data_inventory", "Data Inventory"),
                            ("access_report", "Access Report"),
                            ("consent_report", "Consent Report"),
                            ("breach_assessment", "Breach Assessment"),
                        ],
                        max_length=30,
                    ),
                ),
                ("title", models.CharField(max_length=255)),
                ("period_start", models.DateTimeField()),
                ("period_end", models.DateTimeField()),
                ("summary", models.JSONField(default=dict)),
                ("detailed_data", models.JSONField(default=dict)),
                ("pdf_url", models.URLField(blank=True)),
                ("csv_url", models.URLField(blank=True)),
                ("json_url", models.URLField(blank=True)),
                ("generated_at", models.DateTimeField(auto_now_add=True)),
                ("expires_at", models.DateTimeField(blank=True, null=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="advanced_compliance_reports",
                        to="forms.form",
                    ),
                ),
                (
                    "generated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "advanced_compliance_reports",
                "ordering": ["-generated_at"],
            },
        ),
        migrations.CreateModel(
            name="AIAltText",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("image_url", models.URLField()),
                (
                    "image_context",
                    models.CharField(
                        blank=True,
                        help_text="header, field_image, etc.",
                        max_length=100,
                    ),
                ),
                ("field_id", models.CharField(blank=True, max_length=100)),
                ("alt_text_generated", models.TextField()),
                ("alt_text_language", models.CharField(default="en", max_length=10)),
                (
                    "translations",
                    models.JSONField(
                        default=dict, help_text="Language code to alt text mapping"
                    ),
                ),
                ("confidence_score", models.FloatField(default=0)),
                ("needs_review", models.BooleanField(default=False)),
                ("alt_text_manual", models.TextField(blank=True)),
                ("manually_approved", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "approved_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="ai_alt_texts",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "ai_alt_texts",
            },
        ),
        migrations.CreateModel(
            name="AIPersonalization",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "adaptation_type",
                    models.CharField(
                        choices=[
                            ("field_order", "Field Order"),
                            ("field_visibility", "Field Visibility"),
                            ("default_values", "Default Values"),
                            ("validation_rules", "Validation Rules"),
                            ("ui_complexity", "UI Complexity"),
                            ("language", "Language"),
                            ("theme", "Theme"),
                        ],
                        max_length=30,
                    ),
                ),
                (
                    "trigger_conditions",
                    models.JSONField(
                        default=dict,
                        help_text='\n        Conditions to apply this personalization, e.g.:\n        {\n            "user_segment": "returning",\n            "device": "mobile",\n            "referrer_contains": "google",\n            "previous_abandonment": true\n        }\n        ',
                    ),
                ),
                (
                    "adaptation_rules",
                    models.JSONField(
                        default=dict, help_text="Rules for how to adapt the form"
                    ),
                ),
                ("ml_model_id", models.CharField(blank=True, max_length=100)),
                ("prediction_threshold", models.FloatField(default=0.7)),
                ("times_applied", models.IntegerField(default=0)),
                (
                    "conversion_improvement",
                    models.FloatField(
                        default=0, help_text="Measured improvement in conversion %"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("priority", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="ai_personalizations",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "ai_personalizations",
                "ordering": ["priority"],
            },
        ),
        migrations.CreateModel(
            name="AnimationConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                ("respect_reduced_motion", models.BooleanField(default=True)),
                (
                    "page_transition",
                    models.CharField(
                        choices=[
                            ("none", "None"),
                            ("fade", "Fade"),
                            ("slide", "Slide"),
                            ("slide-up", "Slide Up"),
                            ("scale", "Scale"),
                            ("flip", "Flip"),
                        ],
                        default="fade",
                        max_length=50,
                    ),
                ),
                (
                    "transition_duration",
                    models.IntegerField(default=300, help_text="Duration in ms"),
                ),
                (
                    "transition_easing",
                    models.CharField(default="ease-in-out", max_length=100),
                ),
                ("field_entrance", models.CharField(default="fade-in", max_length=50)),
                (
                    "field_stagger",
                    models.IntegerField(default=50, help_text="Stagger delay in ms"),
                ),
                ("focus_animation", models.CharField(default="glow", max_length=50)),
                ("error_animation", models.CharField(default="shake", max_length=50)),
                ("success_animation", models.CharField(default="check", max_length=50)),
                (
                    "loading_animation",
                    models.CharField(default="spinner", max_length=50),
                ),
                ("skeleton_loading", models.BooleanField(default=True)),
                ("custom_keyframes", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="animation_config",
                        to="forms.form",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="ApprovalRequest",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("approved", "Approved"),
                            ("rejected", "Rejected"),
                            ("cancelled", "Cancelled"),
                            ("expired", "Expired"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("current_step", models.IntegerField(default=1)),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("due_at", models.DateTimeField(blank=True, null=True)),
                ("step_history", models.JSONField(default=list)),
                ("final_decision", models.CharField(blank=True, max_length=20)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "final_decision_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="final_approvals",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "submission",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="approval_requests",
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "approval_requests",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ApprovalAction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("step_number", models.IntegerField()),
                (
                    "action",
                    models.CharField(
                        choices=[
                            ("approve", "Approved"),
                            ("reject", "Rejected"),
                            ("request_changes", "Request Changes"),
                            ("delegate", "Delegated"),
                            ("escalate", "Escalated"),
                        ],
                        max_length=20,
                    ),
                ),
                ("comments", models.TextField(blank=True)),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.CharField(blank=True, max_length=500)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "approver",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="approval_actions",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "delegated_to",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="delegated_approvals",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "request",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="actions",
                        to="forms.approvalrequest",
                    ),
                ),
            ],
            options={
                "db_table": "approval_actions",
                "ordering": ["created_at"],
            },
        ),
        migrations.CreateModel(
            name="ApprovalWorkflow",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("is_active", models.BooleanField(default=True)),
                (
                    "trigger_conditions",
                    models.JSONField(
                        default=dict, help_text="Conditions to trigger this workflow"
                    ),
                ),
                (
                    "steps",
                    models.JSONField(
                        default=list,
                        help_text='\n        Approval steps:\n        [\n            {\n                "step": 1,\n                "name": "Manager Approval",\n                "type": "single|all|any",\n                "approvers": ["user_id_1", "role:manager"],\n                "timeout_hours": 48,\n                "timeout_action": "escalate|auto_approve|auto_reject",\n                "conditions": {}\n            }\n        ]\n        ',
                    ),
                ),
                (
                    "sequential_approval",
                    models.BooleanField(
                        default=True, help_text="Steps must be completed in order"
                    ),
                ),
                ("allow_self_approval", models.BooleanField(default=False)),
                ("require_comments", models.BooleanField(default=False)),
                ("notify_on_pending", models.BooleanField(default=True)),
                ("notify_on_approved", models.BooleanField(default=True)),
                ("notify_on_rejected", models.BooleanField(default=True)),
                ("escalation_emails", models.JSONField(default=list)),
                ("sla_hours", models.IntegerField(blank=True, null=True)),
                ("sla_warning_hours", models.IntegerField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="approval_workflows",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "approval_workflows",
            },
        ),
        migrations.AddField(
            model_name="approvalrequest",
            name="workflow",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="requests",
                to="forms.approvalworkflow",
            ),
        ),
        migrations.CreateModel(
            name="ARPreviewConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "scene_background",
                    models.CharField(
                        choices=[
                            ("transparent", "Transparent"),
                            ("blur", "Blurred Camera"),
                            ("custom", "Custom Image"),
                        ],
                        default="blur",
                        max_length=20,
                    ),
                ),
                ("custom_background_url", models.URLField(blank=True)),
                (
                    "placement_type",
                    models.CharField(
                        choices=[
                            ("floating", "Floating"),
                            ("surface", "Surface Anchored"),
                            ("wall", "Wall Mounted"),
                        ],
                        default="floating",
                        max_length=20,
                    ),
                ),
                ("default_scale", models.FloatField(default=1.0)),
                (
                    "default_distance",
                    models.FloatField(
                        default=1.0, help_text="Distance from camera in meters"
                    ),
                ),
                ("allow_resize", models.BooleanField(default=True)),
                ("allow_rotate", models.BooleanField(default=True)),
                ("allow_reposition", models.BooleanField(default=True)),
                ("shadow_enabled", models.BooleanField(default=True)),
                ("glow_effect", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="ar_preview_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "ar_preview_configs",
            },
        ),
        migrations.CreateModel(
            name="ARSession",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100, unique=True)),
                ("device_model", models.CharField(blank=True, max_length=100)),
                ("os_version", models.CharField(blank=True, max_length=50)),
                (
                    "ar_framework",
                    models.CharField(
                        blank=True, help_text="ARKit, ARCore, WebXR", max_length=50
                    ),
                ),
                ("duration_seconds", models.IntegerField(default=0)),
                ("interactions_count", models.IntegerField(default=0)),
                ("form_completed", models.BooleanField(default=False)),
                ("tracking_quality", models.CharField(blank=True, max_length=20)),
                ("frames_dropped", models.IntegerField(default=0)),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("ended_at", models.DateTimeField(blank=True, null=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="ar_sessions",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "ar_sessions",
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="AuditTrailConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                ("log_views", models.BooleanField(default=False)),
                ("log_submissions", models.BooleanField(default=True)),
                ("log_updates", models.BooleanField(default=True)),
                ("log_deletions", models.BooleanField(default=True)),
                ("log_exports", models.BooleanField(default=True)),
                ("log_access", models.BooleanField(default=True)),
                ("log_field_changes", models.BooleanField(default=True)),
                ("capture_before_after", models.BooleanField(default=True)),
                ("capture_user_context", models.BooleanField(default=True)),
                ("capture_device_info", models.BooleanField(default=True)),
                ("capture_geolocation", models.BooleanField(default=False)),
                (
                    "retention_days",
                    models.IntegerField(default=2555, help_text="7 years default"),
                ),
                ("auto_export_enabled", models.BooleanField(default=False)),
                (
                    "export_format",
                    models.CharField(
                        choices=[("json", "JSON"), ("csv", "CSV"), ("pdf", "PDF")],
                        default="json",
                        max_length=20,
                    ),
                ),
                (
                    "export_frequency",
                    models.CharField(
                        choices=[
                            ("daily", "Daily"),
                            ("weekly", "Weekly"),
                            ("monthly", "Monthly"),
                        ],
                        default="monthly",
                        max_length=20,
                    ),
                ),
                ("export_destination", models.URLField(blank=True)),
                ("tamper_evident", models.BooleanField(default=True)),
                ("hash_chain_enabled", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="audit_trail_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "audit_trail_configs",
            },
        ),
        migrations.CreateModel(
            name="AutoScalingConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                ("min_instances", models.IntegerField(default=1)),
                ("max_instances", models.IntegerField(default=10)),
                ("cpu_scale_up_threshold", models.IntegerField(default=70)),
                ("cpu_scale_down_threshold", models.IntegerField(default=30)),
                ("memory_scale_up_threshold", models.IntegerField(default=80)),
                (
                    "request_rate_threshold",
                    models.IntegerField(
                        default=100, help_text="Requests per second per instance"
                    ),
                ),
                (
                    "scale_up_cooldown",
                    models.IntegerField(default=60, help_text="Seconds"),
                ),
                (
                    "scale_down_cooldown",
                    models.IntegerField(default=300, help_text="Seconds"),
                ),
                ("use_predictive_scaling", models.BooleanField(default=False)),
                ("prediction_window_hours", models.IntegerField(default=24)),
                ("current_instances", models.IntegerField(default=1)),
                ("last_scale_action", models.CharField(blank=True, max_length=20)),
                ("last_scale_at", models.DateTimeField(null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="autoscaling_config",
                        to="forms.form",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="BiometricConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "allowed_types",
                    models.JSONField(
                        default=list, help_text="List of allowed biometric types"
                    ),
                ),
                (
                    "require_on_start",
                    models.BooleanField(
                        default=False, help_text="Require auth to start form"
                    ),
                ),
                (
                    "require_on_submit",
                    models.BooleanField(
                        default=False, help_text="Require auth to submit"
                    ),
                ),
                ("require_for_sensitive_fields", models.BooleanField(default=False)),
                ("sensitive_field_ids", models.JSONField(default=list)),
                ("allow_passcode_fallback", models.BooleanField(default=True)),
                ("passcode_fallback_after_failures", models.IntegerField(default=3)),
                ("auth_timeout_seconds", models.IntegerField(default=300)),
                ("require_reauth_on_resume", models.BooleanField(default=True)),
                ("ios_settings", models.JSONField(default=dict)),
                ("android_settings", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="biometric_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "biometric_configs",
            },
        ),
        migrations.CreateModel(
            name="BiometricCredential",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("device_id", models.CharField(max_length=200)),
                ("credential_id", models.CharField(max_length=500, unique=True)),
                ("biometric_type", models.CharField(max_length=30)),
                ("public_key", models.TextField()),
                ("attestation_type", models.CharField(blank=True, max_length=50)),
                ("device_name", models.CharField(blank=True, max_length=200)),
                ("device_os", models.CharField(blank=True, max_length=50)),
                ("last_used_at", models.DateTimeField(blank=True, null=True)),
                ("use_count", models.IntegerField(default=0)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="biometric_credentials",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "biometric_credentials",
                "unique_together": {("user", "device_id", "biometric_type")},
            },
        ),
        migrations.CreateModel(
            name="BiometricAuthEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("auth_type", models.CharField(max_length=30)),
                ("success", models.BooleanField()),
                (
                    "auth_purpose",
                    models.CharField(
                        help_text="form_start, submit, sensitive_field", max_length=50
                    ),
                ),
                ("field_id", models.CharField(blank=True, max_length=100)),
                ("failure_reason", models.CharField(blank=True, max_length=100)),
                ("attempts_count", models.IntegerField(default=1)),
                ("device_id", models.CharField(max_length=200)),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="biometric_events",
                        to="forms.form",
                    ),
                ),
                (
                    "credential",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.biometriccredential",
                    ),
                ),
            ],
            options={
                "db_table": "biometric_auth_events",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="BlockchainConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "network",
                    models.CharField(
                        choices=[
                            ("ethereum", "Ethereum"),
                            ("polygon", "Polygon"),
                            ("arbitrum", "Arbitrum"),
                            ("optimism", "Optimism"),
                            ("private", "Private Network"),
                            ("hyperledger", "Hyperledger Fabric"),
                        ],
                        default="polygon",
                        max_length=30,
                    ),
                ),
                ("rpc_url", models.URLField(blank=True)),
                ("contract_address", models.CharField(blank=True, max_length=100)),
                ("api_key_encrypted", models.TextField(blank=True)),
                ("wallet_address", models.CharField(blank=True, max_length=100)),
                ("record_submissions", models.BooleanField(default=True)),
                ("record_updates", models.BooleanField(default=True)),
                ("record_deletions", models.BooleanField(default=True)),
                ("record_access", models.BooleanField(default=False)),
                (
                    "store_hashes_only",
                    models.BooleanField(
                        default=True, help_text="Store hashes, not data"
                    ),
                ),
                ("hash_algorithm", models.CharField(default="sha256", max_length=20)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "organization",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="blockchain_configs",
                        to="users.team",
                    ),
                ),
            ],
            options={
                "db_table": "blockchain_configs",
            },
        ),
        migrations.CreateModel(
            name="CDNConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                (
                    "provider",
                    models.CharField(
                        choices=[
                            ("cloudflare", "Cloudflare"),
                            ("cloudfront", "AWS CloudFront"),
                            ("fastly", "Fastly"),
                            ("akamai", "Akamai"),
                            ("bunny", "BunnyCDN"),
                            ("custom", "Custom"),
                        ],
                        default="cloudflare",
                        max_length=50,
                    ),
                ),
                ("cdn_domain", models.CharField(blank=True, max_length=200)),
                ("origin_domain", models.CharField(blank=True, max_length=200)),
                ("cache_static_assets", models.BooleanField(default=True)),
                ("cache_form_schema", models.BooleanField(default=True)),
                ("cache_api_responses", models.BooleanField(default=False)),
                (
                    "cache_rules",
                    models.JSONField(default=list, help_text="Custom caching rules"),
                ),
                ("default_ttl", models.IntegerField(default=86400)),
                ("max_ttl", models.IntegerField(default=604800)),
                ("browser_ttl", models.IntegerField(default=14400)),
                ("minify_html", models.BooleanField(default=True)),
                ("minify_css", models.BooleanField(default=True)),
                ("minify_js", models.BooleanField(default=True)),
                ("compress_images", models.BooleanField(default=True)),
                ("webp_conversion", models.BooleanField(default=True)),
                ("brotli_compression", models.BooleanField(default=True)),
                ("https_only", models.BooleanField(default=True)),
                ("hsts_enabled", models.BooleanField(default=True)),
                ("auto_invalidate_on_publish", models.BooleanField(default=True)),
                ("invalidation_patterns", models.JSONField(default=list)),
                ("cache_hit_ratio", models.FloatField(default=0)),
                ("bandwidth_saved_bytes", models.BigIntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="cdn_config",
                        to="forms.form",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="CDNPurgeLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "purge_type",
                    models.CharField(
                        choices=[
                            ("all", "All"),
                            ("path", "Path"),
                            ("tag", "Tag"),
                            ("prefix", "Prefix"),
                        ],
                        max_length=20,
                    ),
                ),
                ("purge_target", models.CharField(max_length=500)),
                ("reason", models.CharField(blank=True, max_length=200)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("completed_at", models.DateTimeField(null=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="purge_logs",
                        to="forms.cdnconfig",
                    ),
                ),
                (
                    "initiated_by",
                    models.ForeignKey(
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="AdvancedComplianceScan",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("running", "Running"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                (
                    "result",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("compliant", "Compliant"),
                            ("non_compliant", "Non-Compliant"),
                            ("partial", "Partial Compliance"),
                            ("needs_review", "Needs Review"),
                        ],
                        max_length=20,
                        null=True,
                    ),
                ),
                (
                    "overall_score",
                    models.FloatField(default=0, help_text="0-100 compliance score"),
                ),
                ("checks_passed", models.IntegerField(default=0)),
                ("checks_failed", models.IntegerField(default=0)),
                ("checks_warning", models.IntegerField(default=0)),
                ("checks_skipped", models.IntegerField(default=0)),
                (
                    "check_results",
                    models.JSONField(
                        default=list, help_text="Individual check results"
                    ),
                ),
                ("issues", models.JSONField(default=list)),
                ("critical_issues", models.IntegerField(default=0)),
                ("recommendations", models.JSONField(default=list)),
                ("auto_fixable_issues", models.JSONField(default=list)),
                ("started_at", models.DateTimeField(blank=True, null=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="advanced_compliance_scans",
                        to="forms.form",
                    ),
                ),
                (
                    "framework",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.complianceframework",
                    ),
                ),
            ],
            options={
                "db_table": "advanced_compliance_scans",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ConversationalAIConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "ai_provider",
                    models.CharField(
                        choices=[
                            ("openai", "OpenAI GPT-4"),
                            ("anthropic", "Anthropic Claude"),
                            ("google", "Google Gemini"),
                            ("custom", "Custom LLM"),
                        ],
                        default="openai",
                        max_length=20,
                    ),
                ),
                (
                    "conversation_mode",
                    models.CharField(
                        choices=[
                            ("form_filling", "Form Filling Assistant"),
                            ("guided", "Guided Conversation"),
                            ("freeform", "Freeform Chat"),
                            ("hybrid", "Hybrid Mode"),
                        ],
                        default="form_filling",
                        max_length=20,
                    ),
                ),
                (
                    "api_key_encrypted",
                    models.TextField(blank=True, help_text="Encrypted API key"),
                ),
                ("model_name", models.CharField(default="gpt-4o", max_length=100)),
                (
                    "assistant_name",
                    models.CharField(default="Form Assistant", max_length=100),
                ),
                (
                    "assistant_persona",
                    models.TextField(
                        blank=True,
                        default="You are a friendly and helpful form assistant.",
                        help_text="System prompt for AI personality",
                    ),
                ),
                (
                    "welcome_message",
                    models.TextField(
                        default="Hi! I'm here to help you fill out this form. Let's get started!",
                        help_text="Initial greeting message",
                    ),
                ),
                ("max_clarification_attempts", models.IntegerField(default=3)),
                ("allow_skip_optional", models.BooleanField(default=True)),
                ("provide_progress_updates", models.BooleanField(default=True)),
                ("summarize_on_completion", models.BooleanField(default=True)),
                (
                    "supported_languages",
                    models.JSONField(
                        default=list, help_text="List of supported language codes"
                    ),
                ),
                ("auto_detect_language", models.BooleanField(default=True)),
                (
                    "use_form_context",
                    models.BooleanField(
                        default=True, help_text="Use form schema to guide conversation"
                    ),
                ),
                (
                    "use_user_history",
                    models.BooleanField(
                        default=False,
                        help_text="Use past interactions for personalization",
                    ),
                ),
                ("voice_enabled", models.BooleanField(default=False)),
                (
                    "voice_id",
                    models.CharField(
                        blank=True, help_text="TTS voice ID", max_length=100
                    ),
                ),
                ("max_tokens_per_conversation", models.IntegerField(default=4000)),
                ("max_tokens_per_response", models.IntegerField(default=500)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="conversational_ai_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "conversational_ai_configs",
            },
        ),
        migrations.CreateModel(
            name="ConversationSession",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100, unique=True)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("active", "Active"),
                            ("completed", "Completed"),
                            ("abandoned", "Abandoned"),
                            ("error", "Error"),
                        ],
                        default="active",
                        max_length=20,
                    ),
                ),
                (
                    "user_identifier",
                    models.CharField(
                        blank=True, help_text="Email or session ID", max_length=255
                    ),
                ),
                ("device_type", models.CharField(blank=True, max_length=50)),
                ("language_detected", models.CharField(blank=True, max_length=10)),
                ("current_field_index", models.IntegerField(default=0)),
                (
                    "collected_data",
                    models.JSONField(
                        default=dict, help_text="Form data collected so far"
                    ),
                ),
                ("fields_completed", models.JSONField(default=list)),
                ("fields_skipped", models.JSONField(default=list)),
                ("total_messages", models.IntegerField(default=0)),
                ("user_messages", models.IntegerField(default=0)),
                ("ai_messages", models.IntegerField(default=0)),
                ("total_tokens_used", models.IntegerField(default=0)),
                ("clarification_count", models.IntegerField(default=0)),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("last_activity_at", models.DateTimeField(auto_now=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.conversationalaiconfig",
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="conversation_sessions",
                        to="forms.form",
                    ),
                ),
                (
                    "submission",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "conversation_sessions",
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="ConversationMessage",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "role",
                    models.CharField(
                        choices=[
                            ("user", "User"),
                            ("assistant", "Assistant"),
                            ("system", "System"),
                        ],
                        max_length=20,
                    ),
                ),
                ("content", models.TextField()),
                ("related_field_id", models.CharField(blank=True, max_length=100)),
                (
                    "extracted_value",
                    models.JSONField(
                        blank=True,
                        help_text="Value extracted from user message",
                        null=True,
                    ),
                ),
                (
                    "input_method",
                    models.CharField(
                        choices=[("text", "Text"), ("voice", "Voice")],
                        default="text",
                        max_length=20,
                    ),
                ),
                ("voice_audio_url", models.URLField(blank=True)),
                ("tokens_used", models.IntegerField(default=0)),
                ("sentiment", models.CharField(blank=True, max_length=20)),
                ("confidence", models.FloatField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "session",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="messages",
                        to="forms.conversationsession",
                    ),
                ),
            ],
            options={
                "db_table": "conversation_messages",
                "ordering": ["created_at"],
            },
        ),
        migrations.CreateModel(
            name="CrossFormDependency",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("is_active", models.BooleanField(default=True)),
                (
                    "link_field_source",
                    models.CharField(
                        help_text="Field in source form for linking", max_length=100
                    ),
                ),
                (
                    "link_field_target",
                    models.CharField(
                        help_text="Field in target form for linking", max_length=100
                    ),
                ),
                (
                    "field_mappings",
                    models.JSONField(
                        default=dict, help_text="Map source fields to target fields"
                    ),
                ),
                ("auto_populate", models.BooleanField(default=True)),
                (
                    "populate_on",
                    models.CharField(
                        choices=[
                            ("load", "On Load"),
                            ("blur", "On Blur"),
                            ("submit", "On Submit"),
                        ],
                        default="blur",
                        max_length=30,
                    ),
                ),
                (
                    "require_match",
                    models.BooleanField(
                        default=False, help_text="Require matching source submission"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "source_form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="dependencies_as_source",
                        to="forms.form",
                    ),
                ),
                (
                    "target_form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="dependencies_as_target",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "cross_form_dependencies",
            },
        ),
        migrations.CreateModel(
            name="CrossFormLookup",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                ("lookup_value", models.TextField()),
                ("found", models.BooleanField()),
                ("populated_data", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "dependency",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lookups",
                        to="forms.crossformdependency",
                    ),
                ),
                (
                    "source_submission",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "cross_form_lookups",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="CustomFieldType",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=100)),
                ("slug", models.SlugField(unique=True)),
                ("description", models.TextField(blank=True)),
                ("icon", models.CharField(blank=True, max_length=100)),
                (
                    "field_schema",
                    models.JSONField(
                        default=dict, help_text="JSON Schema for field value"
                    ),
                ),
                (
                    "config_schema",
                    models.JSONField(
                        default=dict,
                        help_text="JSON Schema for field configuration options",
                    ),
                ),
                ("default_config", models.JSONField(default=dict)),
                (
                    "render_component",
                    models.TextField(
                        blank=True, help_text="React component code for rendering"
                    ),
                ),
                (
                    "edit_component",
                    models.TextField(
                        blank=True, help_text="React component for editing field config"
                    ),
                ),
                ("validation_rules", models.JSONField(default=list)),
                (
                    "custom_validator",
                    models.TextField(
                        blank=True, help_text="JavaScript validation function"
                    ),
                ),
                (
                    "storage_type",
                    models.CharField(
                        choices=[
                            ("string", "String"),
                            ("number", "Number"),
                            ("boolean", "Boolean"),
                            ("array", "Array"),
                            ("object", "Object"),
                            ("file", "File"),
                        ],
                        default="string",
                        max_length=20,
                    ),
                ),
                ("supports_multi", models.BooleanField(default=False)),
                ("supports_conditional", models.BooleanField(default=True)),
                ("supports_prefill", models.BooleanField(default=True)),
                ("supports_calculation", models.BooleanField(default=False)),
                ("is_published", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "owner",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="custom_field_types",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["name"],
            },
        ),
        migrations.CreateModel(
            name="DatabaseOptimizationConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("auto_optimize", models.BooleanField(default=False)),
                (
                    "optimization_schedule",
                    models.CharField(default="weekly", max_length=50),
                ),
                ("use_query_cache", models.BooleanField(default=True)),
                ("query_cache_ttl", models.IntegerField(default=60)),
                ("recommended_indexes", models.JSONField(default=list)),
                ("applied_indexes", models.JSONField(default=list)),
                ("use_partitioning", models.BooleanField(default=False)),
                ("partition_by", models.CharField(blank=True, max_length=50)),
                ("partition_config", models.JSONField(default=dict)),
                ("pool_size", models.IntegerField(default=10)),
                ("max_overflow", models.IntegerField(default=20)),
                ("pool_timeout", models.IntegerField(default=30)),
                ("use_read_replicas", models.BooleanField(default=False)),
                ("read_replica_config", models.JSONField(default=dict)),
                ("slow_query_threshold_ms", models.IntegerField(default=1000)),
                ("analyzed_queries", models.JSONField(default=list)),
                ("last_optimized_at", models.DateTimeField(null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="db_optimization",
                        to="forms.form",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="DataResidencyConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "primary_region",
                    models.CharField(
                        choices=[
                            ("us-east", "US East"),
                            ("us-west", "US West"),
                            ("eu-west", "EU West"),
                            ("eu-central", "EU Central"),
                            ("apac", "Asia Pacific"),
                            ("australia", "Australia"),
                            ("canada", "Canada"),
                            ("brazil", "Brazil"),
                            ("india", "India"),
                            ("uk", "United Kingdom"),
                        ],
                        default="us-east",
                        max_length=30,
                    ),
                ),
                (
                    "allowed_regions",
                    models.JSONField(
                        default=list, help_text="Regions where data can be stored"
                    ),
                ),
                (
                    "forbidden_regions",
                    models.JSONField(
                        default=list, help_text="Regions where data cannot be stored"
                    ),
                ),
                ("auto_route_by_user_location", models.BooleanField(default=False)),
                (
                    "user_location_field",
                    models.CharField(
                        blank=True,
                        help_text="Field containing user location",
                        max_length=100,
                    ),
                ),
                ("replication_enabled", models.BooleanField(default=False)),
                ("replication_regions", models.JSONField(default=list)),
                ("cross_border_transfer_allowed", models.BooleanField(default=True)),
                ("transfer_requires_consent", models.BooleanField(default=False)),
                (
                    "region_compliance_mapping",
                    models.JSONField(
                        default=dict,
                        help_text="Map regions to required compliance frameworks",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="data_residency_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "data_residency_configs",
            },
        ),
        migrations.CreateModel(
            name="DeveloperFeedback",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("page_url", models.URLField()),
                ("endpoint", models.CharField(blank=True, max_length=200)),
                (
                    "rating",
                    models.IntegerField(
                        choices=[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)], null=True
                    ),
                ),
                (
                    "feedback_type",
                    models.CharField(
                        choices=[
                            ("bug", "Bug Report"),
                            ("improvement", "Improvement"),
                            ("question", "Question"),
                            ("other", "Other"),
                        ],
                        default="other",
                        max_length=50,
                    ),
                ),
                ("message", models.TextField()),
                ("email", models.EmailField(blank=True, max_length=254)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("new", "New"),
                            ("reviewed", "Reviewed"),
                            ("actioned", "Actioned"),
                            ("closed", "Closed"),
                        ],
                        default="new",
                        max_length=20,
                    ),
                ),
                ("response", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "user",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="DeveloperPortal",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("slug", models.SlugField(unique=True)),
                ("description", models.TextField(blank=True)),
                ("logo_url", models.URLField(blank=True)),
                ("primary_color", models.CharField(default="#0066cc", max_length=7)),
                ("custom_css", models.TextField(blank=True)),
                ("welcome_message", models.TextField(blank=True)),
                ("getting_started", models.TextField(blank=True)),
                ("show_api_reference", models.BooleanField(default=True)),
                ("show_sdk_downloads", models.BooleanField(default=True)),
                ("show_webhooks", models.BooleanField(default=True)),
                ("show_playground", models.BooleanField(default=True)),
                ("show_changelog", models.BooleanField(default=True)),
                ("is_public", models.BooleanField(default=False)),
                ("require_api_key", models.BooleanField(default=True)),
                ("track_usage", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "owner",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="developer_portals",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["-updated_at"],
            },
        ),
        migrations.CreateModel(
            name="APIPlayground",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "examples",
                    models.JSONField(
                        default=list, help_text="Pre-configured example requests"
                    ),
                ),
                ("sandbox_forms", models.JSONField(default=list)),
                ("sandbox_submissions", models.JSONField(default=list)),
                ("rate_limit_per_minute", models.IntegerField(default=30)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "portal",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="playgrounds",
                        to="forms.developerportal",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="EdgeComputingConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "provider",
                    models.CharField(
                        choices=[
                            ("cloudflare", "Cloudflare Workers"),
                            ("aws_lambda_edge", "AWS Lambda@Edge"),
                            ("vercel_edge", "Vercel Edge Functions"),
                            ("fastly", "Fastly Compute@Edge"),
                            ("deno_deploy", "Deno Deploy"),
                        ],
                        default="cloudflare",
                        max_length=50,
                    ),
                ),
                (
                    "enabled_regions",
                    models.JSONField(
                        default=list, help_text="List of edge regions to deploy to"
                    ),
                ),
                ("primary_region", models.CharField(default="auto", max_length=50)),
                (
                    "functions",
                    models.JSONField(
                        default=dict, help_text="Edge function configurations"
                    ),
                ),
                ("cache_form_config", models.BooleanField(default=True)),
                (
                    "cache_ttl",
                    models.IntegerField(default=300, help_text="Cache TTL in seconds"),
                ),
                ("cache_rules", models.JSONField(default=list)),
                ("validate_at_edge", models.BooleanField(default=True)),
                ("sanitize_at_edge", models.BooleanField(default=True)),
                ("rate_limit_at_edge", models.BooleanField(default=True)),
                ("rate_limit_config", models.JSONField(default=dict)),
                ("edge_requests", models.BigIntegerField(default=0)),
                ("origin_requests", models.BigIntegerField(default=0)),
                ("avg_edge_latency_ms", models.FloatField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="edge_config",
                        to="forms.form",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="EnhancedBrandGuideline",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("primary_color", models.CharField(default="#000000", max_length=7)),
                ("secondary_color", models.CharField(default="#666666", max_length=7)),
                ("accent_color", models.CharField(default="#0066cc", max_length=7)),
                ("background_color", models.CharField(default="#ffffff", max_length=7)),
                ("text_color", models.CharField(default="#333333", max_length=7)),
                ("error_color", models.CharField(default="#dc3545", max_length=7)),
                ("success_color", models.CharField(default="#28a745", max_length=7)),
                (
                    "color_palette",
                    models.JSONField(
                        default=list,
                        help_text="Full color palette with names and hex values",
                    ),
                ),
                ("primary_font", models.CharField(default="Inter", max_length=100)),
                ("secondary_font", models.CharField(blank=True, max_length=100)),
                ("heading_font", models.CharField(blank=True, max_length=100)),
                ("font_scale", models.FloatField(default=1.0)),
                ("base_font_size", models.IntegerField(default=16)),
                (
                    "typography_config",
                    models.JSONField(
                        default=dict, help_text="Detailed typography settings"
                    ),
                ),
                ("logo_url", models.URLField(blank=True)),
                (
                    "logo_dark_url",
                    models.URLField(blank=True, help_text="Logo for dark backgrounds"),
                ),
                ("favicon_url", models.URLField(blank=True)),
                ("border_radius", models.IntegerField(default=4)),
                ("spacing_unit", models.IntegerField(default=8)),
                ("max_width", models.IntegerField(default=640)),
                ("button_style", models.JSONField(default=dict)),
                ("input_style", models.JSONField(default=dict)),
                ("card_style", models.JSONField(default=dict)),
                (
                    "voice_guidelines",
                    models.JSONField(
                        default=dict, help_text="AI guidelines for text generation"
                    ),
                ),
                ("enforce_colors", models.BooleanField(default=True)),
                ("enforce_fonts", models.BooleanField(default=True)),
                ("enforce_spacing", models.BooleanField(default=False)),
                ("is_default", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "owner",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="enhanced_brand_guidelines",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["-is_default", "-updated_at"],
            },
        ),
        migrations.CreateModel(
            name="BrandValidation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_compliant", models.BooleanField(default=False)),
                ("compliance_score", models.FloatField(default=0)),
                ("issues", models.JSONField(default=list)),
                ("warnings", models.JSONField(default=list)),
                ("auto_fixes_available", models.JSONField(default=list)),
                ("validated_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="brand_validations",
                        to="forms.form",
                    ),
                ),
                (
                    "guideline",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="validations",
                        to="forms.enhancedbrandguideline",
                    ),
                ),
            ],
            options={
                "ordering": ["-validated_at"],
            },
        ),
        migrations.CreateModel(
            name="EnhancedFormComment",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "target_type",
                    models.CharField(
                        choices=[
                            ("form", "Entire Form"),
                            ("field", "Field"),
                            ("section", "Section"),
                            ("setting", "Setting"),
                        ],
                        default="form",
                        max_length=20,
                    ),
                ),
                ("target_id", models.CharField(blank=True, max_length=100)),
                ("content", models.TextField()),
                ("is_resolved", models.BooleanField(default=False)),
                ("resolved_at", models.DateTimeField(null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "author",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="enhanced_form_comments_authored",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="enhanced_collab_comments",
                        to="forms.form",
                    ),
                ),
                (
                    "mentions",
                    models.ManyToManyField(
                        blank=True,
                        related_name="mentioned_in_comments",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "parent",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="replies",
                        to="forms.enhancedformcomment",
                    ),
                ),
                (
                    "resolved_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="resolved_comments",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ERPConnector",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                (
                    "erp_system",
                    models.CharField(
                        choices=[
                            ("sap", "SAP"),
                            ("oracle", "Oracle"),
                            ("salesforce", "Salesforce"),
                            ("dynamics", "Microsoft Dynamics"),
                            ("netsuite", "NetSuite"),
                            ("workday", "Workday"),
                            ("custom", "Custom ERP"),
                        ],
                        max_length=30,
                    ),
                ),
                ("base_url", models.URLField()),
                ("api_version", models.CharField(blank=True, max_length=20)),
                (
                    "auth_type",
                    models.CharField(
                        choices=[
                            ("oauth", "OAuth 2.0"),
                            ("api_key", "API Key"),
                            ("basic", "Basic Auth"),
                            ("certificate", "Certificate"),
                        ],
                        default="oauth",
                        max_length=30,
                    ),
                ),
                ("credentials_encrypted", models.JSONField(default=dict)),
                ("sap_client", models.CharField(blank=True, max_length=10)),
                ("sap_system_id", models.CharField(blank=True, max_length=10)),
                (
                    "object_mappings",
                    models.JSONField(
                        default=dict, help_text="Map form submissions to ERP objects"
                    ),
                ),
                (
                    "sync_direction",
                    models.CharField(
                        choices=[
                            ("push", "Push Only"),
                            ("pull", "Pull Only"),
                            ("bidirectional", "Bidirectional"),
                        ],
                        default="push",
                        max_length=20,
                    ),
                ),
                ("sync_frequency_minutes", models.IntegerField(default=15)),
                ("is_active", models.BooleanField(default=True)),
                ("last_sync_at", models.DateTimeField(blank=True, null=True)),
                ("sync_status", models.CharField(blank=True, max_length=30)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="erp_connectors",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "erp_connectors",
            },
        ),
        migrations.CreateModel(
            name="ERPSyncLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("direction", models.CharField(max_length=20)),
                ("records_processed", models.IntegerField(default=0)),
                ("records_succeeded", models.IntegerField(default=0)),
                ("records_failed", models.IntegerField(default=0)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("running", "Running"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                            ("partial", "Partial Success"),
                        ],
                        max_length=20,
                    ),
                ),
                ("error_details", models.JSONField(default=list)),
                ("started_at", models.DateTimeField()),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                (
                    "connector",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="sync_logs",
                        to="forms.erpconnector",
                    ),
                ),
            ],
            options={
                "db_table": "erp_sync_logs",
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="FederatedFormShare",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                (
                    "share_type",
                    models.CharField(
                        choices=[
                            ("embed", "Embeddable Widget"),
                            ("api", "API Access"),
                            ("iframe", "iFrame Embed"),
                            ("sdk", "SDK Integration"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "permission_level",
                    models.CharField(
                        choices=[
                            ("view", "View Only"),
                            ("submit", "Can Submit"),
                            ("full", "Full Access"),
                        ],
                        default="submit",
                        max_length=20,
                    ),
                ),
                ("share_token", models.CharField(max_length=100, unique=True)),
                (
                    "allowed_domains",
                    models.JSONField(
                        default=list, help_text="Domains allowed to embed"
                    ),
                ),
                (
                    "allowed_ips",
                    models.JSONField(default=list, help_text="IPs allowed to access"),
                ),
                (
                    "custom_styling",
                    models.JSONField(default=dict, help_text="Custom CSS overrides"),
                ),
                ("branding_enabled", models.BooleanField(default=True)),
                ("rate_limit_per_minute", models.IntegerField(default=60)),
                ("max_daily_submissions", models.IntegerField(blank=True, null=True)),
                ("expires_at", models.DateTimeField(blank=True, null=True)),
                ("views_count", models.IntegerField(default=0)),
                ("submissions_count", models.IntegerField(default=0)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="federated_shares",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "federated_form_shares",
            },
        ),
        migrations.CreateModel(
            name="FederatedAccessLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "action",
                    models.CharField(help_text="view, submit, etc.", max_length=20),
                ),
                ("referring_domain", models.CharField(blank=True, max_length=255)),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.TextField(blank=True)),
                ("success", models.BooleanField(default=True)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "share",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="access_logs",
                        to="forms.federatedformshare",
                    ),
                ),
            ],
            options={
                "db_table": "federated_access_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FollowUpSequence",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("is_active", models.BooleanField(default=True)),
                (
                    "trigger_event",
                    models.CharField(
                        choices=[
                            ("on_submit", "On Submit"),
                            ("on_abandon", "On Abandon"),
                            ("on_complete", "On Complete"),
                            ("on_condition", "On Condition"),
                        ],
                        max_length=30,
                    ),
                ),
                ("trigger_conditions", models.JSONField(default=dict)),
                (
                    "steps",
                    models.JSONField(
                        default=list,
                        help_text='\n        Sequence steps:\n        [\n            {\n                "step": 1,\n                "delay": {"value": 1, "unit": "hours"},\n                "channel": "email",\n                "template_id": "uuid",\n                "subject": "Thanks for your submission!",\n                "conditions": {}\n            }\n        ]\n        ',
                    ),
                ),
                (
                    "exit_conditions",
                    models.JSONField(
                        default=list, help_text="Conditions to exit the sequence early"
                    ),
                ),
                ("ai_personalization", models.BooleanField(default=False)),
                ("ai_optimal_send_time", models.BooleanField(default=False)),
                ("ab_testing_enabled", models.BooleanField(default=False)),
                ("enrollments_count", models.IntegerField(default=0)),
                ("completions_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="follow_up_sequences",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "follow_up_sequences",
            },
        ),
        migrations.CreateModel(
            name="FormComplianceConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("auto_scan_enabled", models.BooleanField(default=True)),
                ("scan_frequency_hours", models.IntegerField(default=24)),
                ("last_scan_at", models.DateTimeField(blank=True, null=True)),
                (
                    "data_classification",
                    models.CharField(
                        choices=[
                            ("public", "Public"),
                            ("internal", "Internal"),
                            ("confidential", "Confidential"),
                            ("restricted", "Restricted"),
                            ("pii", "PII"),
                            ("phi", "PHI"),
                            ("pci", "PCI"),
                        ],
                        default="internal",
                        max_length=30,
                    ),
                ),
                (
                    "pii_fields",
                    models.JSONField(default=list, help_text="Fields containing PII"),
                ),
                (
                    "sensitive_fields",
                    models.JSONField(default=list, help_text="Other sensitive fields"),
                ),
                ("data_retention_days", models.IntegerField(default=365)),
                ("auto_delete_enabled", models.BooleanField(default=False)),
                ("consent_required", models.BooleanField(default=True)),
                ("consent_version", models.CharField(default="1.0", max_length=20)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="compliance_config",
                        to="forms.form",
                    ),
                ),
                (
                    "required_frameworks",
                    models.ManyToManyField(
                        related_name="forms", to="forms.complianceframework"
                    ),
                ),
            ],
            options={
                "db_table": "form_compliance_configs",
            },
        ),
        migrations.CreateModel(
            name="FormPipeline",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("is_active", models.BooleanField(default=True)),
                ("require_review", models.BooleanField(default=True)),
                ("auto_archive_days", models.IntegerField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "team",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="form_pipelines",
                        to="users.team",
                    ),
                ),
            ],
            options={
                "db_table": "form_pipelines",
            },
        ),
        migrations.CreateModel(
            name="FormPipelineCard",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("position", models.IntegerField(default=0)),
                ("due_date", models.DateField(blank=True, null=True)),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                            ("urgent", "Urgent"),
                        ],
                        default="medium",
                        max_length=20,
                    ),
                ),
                ("labels", models.JSONField(default=list)),
                ("time_in_stage_hours", models.FloatField(default=0)),
                ("stage_entered_at", models.DateTimeField(auto_now_add=True)),
                ("stage_history", models.JSONField(default=list)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "assignee",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="pipeline_card",
                        to="forms.form",
                    ),
                ),
                (
                    "pipeline",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="cards",
                        to="forms.formpipeline",
                    ),
                ),
            ],
            options={
                "db_table": "form_pipeline_cards",
                "ordering": ["position"],
            },
        ),
        migrations.CreateModel(
            name="FormsAPIKey",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "key_prefix",
                    models.CharField(help_text="First 8 chars of key", max_length=8),
                ),
                ("key_hash", models.CharField(max_length=64, unique=True)),
                (
                    "scopes",
                    models.JSONField(default=list, help_text="List of allowed scopes"),
                ),
                ("allowed_origins", models.JSONField(default=list)),
                ("allowed_ips", models.JSONField(default=list)),
                ("api_version", models.CharField(default="v1", max_length=20)),
                ("rate_limit_per_minute", models.IntegerField(default=60)),
                ("rate_limit_per_day", models.IntegerField(default=10000)),
                ("is_active", models.BooleanField(default=True)),
                ("expires_at", models.DateTimeField(null=True)),
                ("last_used_at", models.DateTimeField(null=True)),
                ("total_requests", models.BigIntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "owner",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="forms_api_keys",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="APIUsageLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("method", models.CharField(max_length=10)),
                ("endpoint", models.CharField(max_length=500)),
                ("status_code", models.IntegerField()),
                ("response_time_ms", models.FloatField()),
                ("ip_address", models.GenericIPAddressField(null=True)),
                ("user_agent", models.CharField(blank=True, max_length=500)),
                ("request_size_bytes", models.IntegerField(default=0)),
                ("response_size_bytes", models.IntegerField(default=0)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "api_key",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="usage_logs",
                        to="forms.formsapikey",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormVersionDiff",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "changes",
                    models.JSONField(
                        default=list, help_text="List of changes between versions"
                    ),
                ),
                ("fields_added", models.IntegerField(default=0)),
                ("fields_removed", models.IntegerField(default=0)),
                ("fields_modified", models.IntegerField(default=0)),
                ("settings_changed", models.IntegerField(default=0)),
                ("visual_diff_url", models.URLField(blank=True)),
                ("side_by_side_diff", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="version_diffs",
                        to="forms.form",
                    ),
                ),
                (
                    "version_a",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="diffs_as_a",
                        to="forms.formversion",
                    ),
                ),
                (
                    "version_b",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="diffs_as_b",
                        to="forms.formversion",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="GeofenceEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("enter", "Enter"),
                            ("exit", "Exit"),
                            ("dwell", "Dwell"),
                        ],
                        max_length=20,
                    ),
                ),
                ("geofence_name", models.CharField(max_length=200)),
                ("latitude", models.DecimalField(decimal_places=7, max_digits=10)),
                ("longitude", models.DecimalField(decimal_places=7, max_digits=10)),
                ("accuracy", models.FloatField()),
                ("action_taken", models.CharField(blank=True, max_length=100)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="geofence_events",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "geofence_events",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="GeolocationConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "accuracy_level",
                    models.CharField(
                        choices=[
                            ("high", "High (GPS)"),
                            ("medium", "Medium (WiFi)"),
                            ("low", "Low (IP-based)"),
                        ],
                        default="medium",
                        max_length=20,
                    ),
                ),
                ("require_location", models.BooleanField(default=False)),
                ("allow_location_sharing", models.BooleanField(default=True)),
                ("geofencing_enabled", models.BooleanField(default=False)),
                (
                    "geofence_rules",
                    models.JSONField(
                        default=list,
                        help_text='\n        Geofence rules:\n        [\n            {\n                "name": "Office Area",\n                "type": "allow|deny",\n                "shape": "circle",\n                "center": {"lat": 40.7128, "lng": -74.0060},\n                "radius_meters": 1000\n            }\n        ]\n        ',
                    ),
                ),
                (
                    "location_conditions",
                    models.JSONField(
                        default=list, help_text="Conditional logic based on location"
                    ),
                ),
                ("address_autocomplete_enabled", models.BooleanField(default=True)),
                (
                    "autocomplete_countries",
                    models.JSONField(
                        default=list, help_text="Limit to specific countries"
                    ),
                ),
                ("reverse_geocoding_enabled", models.BooleanField(default=True)),
                (
                    "geocoding_provider",
                    models.CharField(default="google", max_length=30),
                ),
                ("show_map", models.BooleanField(default=False)),
                ("map_style", models.CharField(default="roadmap", max_length=50)),
                (
                    "store_precise_location",
                    models.BooleanField(
                        default=False, help_text="Store exact coordinates"
                    ),
                ),
                (
                    "anonymize_location",
                    models.BooleanField(default=False, help_text="Round coordinates"),
                ),
                (
                    "anonymize_precision",
                    models.IntegerField(default=2, help_text="Decimal places"),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="geolocation_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "geolocation_configs",
            },
        ),
        migrations.CreateModel(
            name="GraphQLConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                ("endpoint_slug", models.SlugField(max_length=100, unique=True)),
                ("max_depth", models.IntegerField(default=10)),
                ("max_complexity", models.IntegerField(default=1000)),
                ("max_results", models.IntegerField(default=1000)),
                ("cache_enabled", models.BooleanField(default=True)),
                ("cache_ttl_seconds", models.IntegerField(default=300)),
                ("introspection_enabled", models.BooleanField(default=False)),
                ("rate_limit_per_minute", models.IntegerField(default=100)),
                ("queries_enabled", models.BooleanField(default=True)),
                ("mutations_enabled", models.BooleanField(default=True)),
                ("subscriptions_enabled", models.BooleanField(default=False)),
                (
                    "exposed_types",
                    models.JSONField(
                        default=list, help_text="Types exposed through GraphQL"
                    ),
                ),
                (
                    "field_restrictions",
                    models.JSONField(
                        default=dict, help_text="Field-level access restrictions"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="graphql_configs",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "graphql_configs",
            },
        ),
        migrations.CreateModel(
            name="GraphQLQueryLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("operation_type", models.CharField(max_length=20)),
                ("operation_name", models.CharField(blank=True, max_length=100)),
                ("query_hash", models.CharField(max_length=64)),
                ("query_complexity", models.IntegerField(default=0)),
                ("query_depth", models.IntegerField(default=0)),
                ("variables_count", models.IntegerField(default=0)),
                ("duration_ms", models.IntegerField()),
                ("status", models.CharField(max_length=20)),
                ("error_message", models.TextField(blank=True)),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.CharField(blank=True, max_length=500)),
                ("cache_hit", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="query_logs",
                        to="forms.graphqlconfig",
                    ),
                ),
            ],
            options={
                "db_table": "graphql_query_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="HeatmapAnalysis",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "analysis_type",
                    models.CharField(
                        choices=[
                            ("click", "Click Heatmap"),
                            ("scroll", "Scroll Heatmap"),
                            ("attention", "Attention Heatmap"),
                            ("mouse_movement", "Mouse Movement"),
                            ("form_flow", "Form Flow"),
                        ],
                        max_length=30,
                    ),
                ),
                ("device_type", models.CharField(default="desktop", max_length=20)),
                ("start_date", models.DateField()),
                ("end_date", models.DateField()),
                ("sessions_analyzed", models.IntegerField(default=0)),
                (
                    "heatmap_image_url",
                    models.URLField(blank=True, help_text="Generated heatmap image"),
                ),
                (
                    "raw_data",
                    models.JSONField(
                        default=dict, help_text="Raw interaction data points"
                    ),
                ),
                (
                    "hotspots",
                    models.JSONField(
                        default=list,
                        help_text="Identified hotspot regions with coordinates",
                    ),
                ),
                (
                    "cold_zones",
                    models.JSONField(
                        default=list, help_text="Areas with low engagement"
                    ),
                ),
                (
                    "flow_patterns",
                    models.JSONField(
                        default=dict, help_text="User flow patterns through form"
                    ),
                ),
                (
                    "ai_insights",
                    models.JSONField(
                        default=list,
                        help_text="AI-generated insights from heatmap analysis",
                    ),
                ),
                (
                    "optimization_suggestions",
                    models.JSONField(
                        default=list,
                        help_text="Suggested optimizations based on analysis",
                    ),
                ),
                (
                    "improvement_metrics",
                    models.JSONField(
                        default=dict, help_text="Comparison with previous period"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="heatmap_analyses",
                        to="forms.form",
                    ),
                ),
                (
                    "previous_analysis",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="next_analysis",
                        to="forms.heatmapanalysis",
                    ),
                ),
            ],
            options={
                "db_table": "heatmap_analyses",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="IndustryBenchmark",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "industry",
                    models.CharField(
                        choices=[
                            ("healthcare", "Healthcare"),
                            ("finance", "Finance"),
                            ("education", "Education"),
                            ("ecommerce", "E-Commerce"),
                            ("saas", "SaaS"),
                            ("real_estate", "Real Estate"),
                            ("hospitality", "Hospitality"),
                            ("nonprofit", "Non-Profit"),
                            ("consulting", "Consulting"),
                            ("other", "Other"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "form_type",
                    models.CharField(
                        choices=[
                            ("contact", "Contact Form"),
                            ("registration", "Registration"),
                            ("checkout", "Checkout"),
                            ("survey", "Survey"),
                            ("lead_gen", "Lead Generation"),
                            ("application", "Application"),
                            ("booking", "Booking"),
                            ("feedback", "Feedback"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "avg_conversion_rate",
                    models.FloatField(help_text="Average conversion rate %"),
                ),
                (
                    "avg_completion_rate",
                    models.FloatField(help_text="Average completion rate %"),
                ),
                (
                    "avg_abandonment_rate",
                    models.FloatField(help_text="Average abandonment rate %"),
                ),
                (
                    "avg_time_to_complete",
                    models.FloatField(help_text="Average time to complete in seconds"),
                ),
                (
                    "avg_fields_count",
                    models.FloatField(help_text="Average number of fields"),
                ),
                (
                    "field_metrics",
                    models.JSONField(
                        default=dict, help_text="Performance metrics by field type"
                    ),
                ),
                (
                    "best_practices",
                    models.JSONField(default=list, help_text="Industry best practices"),
                ),
                (
                    "common_mistakes",
                    models.JSONField(
                        default=list, help_text="Common mistakes to avoid"
                    ),
                ),
                (
                    "sample_size",
                    models.IntegerField(help_text="Number of forms in benchmark"),
                ),
                (
                    "percentile_data",
                    models.JSONField(default=dict, help_text="Percentile distribution"),
                ),
                ("period", models.CharField(help_text="e.g., 2024-Q4", max_length=20)),
                ("valid_from", models.DateField()),
                ("valid_until", models.DateField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "industry_benchmarks",
                "unique_together": {("industry", "form_type", "period")},
            },
        ),
        migrations.CreateModel(
            name="FormBenchmarkComparison",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("form_conversion_rate", models.FloatField()),
                ("form_completion_rate", models.FloatField()),
                ("form_abandonment_rate", models.FloatField()),
                ("form_avg_time", models.FloatField()),
                (
                    "conversion_vs_benchmark",
                    models.FloatField(help_text="Percentage above/below benchmark"),
                ),
                ("completion_vs_benchmark", models.FloatField()),
                ("abandonment_vs_benchmark", models.FloatField()),
                ("time_vs_benchmark", models.FloatField()),
                (
                    "conversion_percentile",
                    models.IntegerField(help_text="Percentile rank 1-100"),
                ),
                ("completion_percentile", models.IntegerField()),
                ("overall_percentile", models.IntegerField()),
                (
                    "improvement_recommendations",
                    models.JSONField(
                        default=list,
                        help_text="AI recommendations to improve vs benchmark",
                    ),
                ),
                (
                    "priority_actions",
                    models.JSONField(
                        default=list, help_text="Prioritized action items"
                    ),
                ),
                ("calculated_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="benchmark_comparisons",
                        to="forms.form",
                    ),
                ),
                (
                    "benchmark",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.industrybenchmark",
                    ),
                ),
            ],
            options={
                "db_table": "form_benchmark_comparisons",
                "ordering": ["-calculated_at"],
            },
        ),
        migrations.CreateModel(
            name="IntelligentPreloadConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                ("preload_next_step", models.BooleanField(default=True)),
                ("preload_likely_branches", models.BooleanField(default=True)),
                ("preload_dropdown_options", models.BooleanField(default=True)),
                ("preload_validation_rules", models.BooleanField(default=True)),
                ("use_ai_prediction", models.BooleanField(default=False)),
                (
                    "prediction_model",
                    models.CharField(default="navigation_predictor", max_length=100),
                ),
                ("prediction_threshold", models.FloatField(default=0.7)),
                ("preload_on_focus", models.BooleanField(default=True)),
                ("preload_on_input", models.BooleanField(default=False)),
                ("preload_delay_ms", models.IntegerField(default=200)),
                (
                    "dns_prefetch",
                    models.JSONField(default=list, help_text="Domains to DNS prefetch"),
                ),
                (
                    "preconnect",
                    models.JSONField(default=list, help_text="Origins to preconnect"),
                ),
                (
                    "preload_assets",
                    models.JSONField(default=list, help_text="Assets to preload"),
                ),
                (
                    "prefetch_pages",
                    models.JSONField(default=list, help_text="Pages to prefetch"),
                ),
                ("respect_save_data", models.BooleanField(default=True)),
                ("network_aware", models.BooleanField(default=True)),
                ("disable_on_slow", models.BooleanField(default=True)),
                ("preloads_triggered", models.BigIntegerField(default=0)),
                ("preloads_used", models.BigIntegerField(default=0)),
                ("avg_time_saved_ms", models.FloatField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="preload_config",
                        to="forms.form",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="LoadTestConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                (
                    "test_type",
                    models.CharField(
                        choices=[
                            ("smoke", "Smoke Test"),
                            ("load", "Load Test"),
                            ("stress", "Stress Test"),
                            ("spike", "Spike Test"),
                            ("soak", "Soak Test"),
                        ],
                        default="load",
                        max_length=20,
                    ),
                ),
                ("vus_start", models.IntegerField(default=1)),
                ("vus_target", models.IntegerField(default=100)),
                (
                    "ramp_up_duration",
                    models.IntegerField(default=60, help_text="Seconds"),
                ),
                (
                    "hold_duration",
                    models.IntegerField(default=300, help_text="Seconds"),
                ),
                (
                    "ramp_down_duration",
                    models.IntegerField(default=30, help_text="Seconds"),
                ),
                (
                    "scenarios",
                    models.JSONField(default=list, help_text="Test scenarios to run"),
                ),
                ("success_rate_threshold", models.FloatField(default=0.99)),
                ("response_time_p95_threshold", models.IntegerField(default=1000)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="load_tests",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="LoadTestRun",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("running", "Running"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                            ("cancelled", "Cancelled"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("started_at", models.DateTimeField(null=True)),
                ("completed_at", models.DateTimeField(null=True)),
                ("total_requests", models.IntegerField(default=0)),
                ("successful_requests", models.IntegerField(default=0)),
                ("failed_requests", models.IntegerField(default=0)),
                ("avg_response_time_ms", models.FloatField(null=True)),
                ("p50_response_time_ms", models.FloatField(null=True)),
                ("p95_response_time_ms", models.FloatField(null=True)),
                ("p99_response_time_ms", models.FloatField(null=True)),
                ("requests_per_second", models.FloatField(null=True)),
                ("passed_thresholds", models.BooleanField(null=True)),
                ("threshold_results", models.JSONField(default=dict)),
                ("timeline_data", models.JSONField(default=list)),
                ("error_breakdown", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="runs",
                        to="forms.loadtestconfig",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="LocationValidation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                (
                    "validation_type",
                    models.CharField(
                        help_text="address, coordinates, geofence", max_length=50
                    ),
                ),
                ("input_value", models.TextField()),
                ("is_valid", models.BooleanField()),
                ("validation_message", models.TextField(blank=True)),
                ("geocoded_address", models.JSONField(default=dict)),
                ("geocoded_coordinates", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="location_validations",
                        to="forms.form",
                    ),
                ),
                (
                    "submission",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "location_validations",
            },
        ),
        migrations.CreateModel(
            name="MarketplaceIntegration",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("slug", models.SlugField(max_length=200, unique=True)),
                ("tagline", models.CharField(max_length=300)),
                ("description", models.TextField()),
                (
                    "category",
                    models.CharField(
                        choices=[
                            ("crm", "CRM"),
                            ("email", "Email Marketing"),
                            ("analytics", "Analytics"),
                            ("payment", "Payment"),
                            ("storage", "Storage"),
                            ("automation", "Automation"),
                            ("communication", "Communication"),
                            ("productivity", "Productivity"),
                            ("ai_ml", "AI/ML"),
                            ("custom", "Custom"),
                        ],
                        max_length=30,
                    ),
                ),
                ("tags", models.JSONField(default=list)),
                ("logo_url", models.URLField()),
                ("banner_url", models.URLField(blank=True)),
                ("screenshots", models.JSONField(default=list)),
                (
                    "api_spec_url",
                    models.URLField(blank=True, help_text="OpenAPI spec URL"),
                ),
                ("documentation_url", models.URLField()),
                ("support_url", models.URLField(blank=True)),
                ("oauth_client_id", models.CharField(blank=True, max_length=200)),
                ("oauth_client_secret_encrypted", models.TextField(blank=True)),
                ("oauth_scopes", models.JSONField(default=list)),
                ("oauth_redirect_uri", models.URLField(blank=True)),
                ("webhook_url", models.URLField(blank=True)),
                ("webhook_events", models.JSONField(default=list)),
                ("is_free", models.BooleanField(default=True)),
                (
                    "price_monthly",
                    models.DecimalField(
                        blank=True, decimal_places=2, max_digits=10, null=True
                    ),
                ),
                (
                    "price_yearly",
                    models.DecimalField(
                        blank=True, decimal_places=2, max_digits=10, null=True
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("draft", "Draft"),
                            ("pending_review", "Pending Review"),
                            ("approved", "Approved"),
                            ("rejected", "Rejected"),
                            ("suspended", "Suspended"),
                        ],
                        default="draft",
                        max_length=20,
                    ),
                ),
                ("published_at", models.DateTimeField(blank=True, null=True)),
                ("install_count", models.IntegerField(default=0)),
                ("rating_average", models.FloatField(default=0)),
                ("rating_count", models.IntegerField(default=0)),
                ("version", models.CharField(default="1.0.0", max_length=20)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "developer",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="marketplace_integrations",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "marketplace_integrations",
                "ordering": ["-install_count"],
            },
        ),
        migrations.CreateModel(
            name="MarketplaceInstallation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "config",
                    models.JSONField(
                        default=dict,
                        help_text="User's configuration for this integration",
                    ),
                ),
                (
                    "oauth_tokens",
                    models.JSONField(default=dict, help_text="Encrypted OAuth tokens"),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("last_used_at", models.DateTimeField(blank=True, null=True)),
                ("usage_count", models.IntegerField(default=0)),
                ("installed_at", models.DateTimeField(auto_now_add=True)),
                (
                    "connected_forms",
                    models.ManyToManyField(
                        blank=True,
                        related_name="marketplace_integrations",
                        to="forms.form",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="marketplace_installations",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "integration",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="installations",
                        to="forms.marketplaceintegration",
                    ),
                ),
            ],
            options={
                "db_table": "marketplace_installations",
            },
        ),
        migrations.CreateModel(
            name="MarketplaceReview",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "rating",
                    models.IntegerField(
                        choices=[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]
                    ),
                ),
                ("title", models.CharField(max_length=200)),
                ("review", models.TextField()),
                ("helpful_count", models.IntegerField(default=0)),
                ("developer_response", models.TextField(blank=True)),
                ("developer_response_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "integration",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="reviews",
                        to="forms.marketplaceintegration",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="marketplace_reviews",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "marketplace_reviews",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="MobilePaymentConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "provider",
                    models.CharField(
                        choices=[
                            ("apple_pay", "Apple Pay"),
                            ("google_pay", "Google Pay"),
                            ("samsung_pay", "Samsung Pay"),
                            ("paypal", "PayPal"),
                            ("stripe", "Stripe"),
                        ],
                        max_length=30,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                ("merchant_id", models.CharField(max_length=200)),
                ("credentials_encrypted", models.JSONField(default=dict)),
                (
                    "apple_merchant_identifier",
                    models.CharField(blank=True, max_length=200),
                ),
                ("apple_certificate_encrypted", models.TextField(blank=True)),
                ("google_merchant_id", models.CharField(blank=True, max_length=200)),
                ("google_gateway", models.CharField(blank=True, max_length=50)),
                (
                    "google_gateway_merchant_id",
                    models.CharField(blank=True, max_length=200),
                ),
                (
                    "supported_networks",
                    models.JSONField(
                        default=list, help_text="visa, mastercard, amex, etc."
                    ),
                ),
                (
                    "supported_capabilities",
                    models.JSONField(default=list, help_text="3DS, credit, debit"),
                ),
                ("supported_countries", models.JSONField(default=list)),
                ("supported_currencies", models.JSONField(default=list)),
                ("default_currency", models.CharField(default="USD", max_length=3)),
                ("button_style", models.CharField(default="black", max_length=30)),
                ("button_type", models.CharField(default="buy", max_length=30)),
                ("require_shipping", models.BooleanField(default=False)),
                ("shipping_options", models.JSONField(default=list)),
                ("test_mode", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="mobile_payment_configs",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "mobile_payment_configs",
            },
        ),
        migrations.CreateModel(
            name="MobilePaymentTransaction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "provider_transaction_id",
                    models.CharField(max_length=200, unique=True),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("authorized", "Authorized"),
                            ("captured", "Captured"),
                            ("failed", "Failed"),
                            ("refunded", "Refunded"),
                            ("cancelled", "Cancelled"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("amount", models.DecimalField(decimal_places=2, max_digits=10)),
                ("currency", models.CharField(max_length=3)),
                ("payment_method_type", models.CharField(max_length=50)),
                ("card_network", models.CharField(blank=True, max_length=30)),
                ("card_last_four", models.CharField(blank=True, max_length=4)),
                ("billing_name", models.CharField(blank=True, max_length=200)),
                ("billing_email", models.EmailField(blank=True, max_length=254)),
                ("billing_country", models.CharField(blank=True, max_length=2)),
                ("device_type", models.CharField(blank=True, max_length=50)),
                ("device_id", models.CharField(blank=True, max_length=200)),
                ("error_code", models.CharField(blank=True, max_length=50)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="transactions",
                        to="forms.mobilepaymentconfig",
                    ),
                ),
                (
                    "submission",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "mobile_payment_transactions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="MultimodalInputConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("camera_enabled", models.BooleanField(default=False)),
                ("front_camera_allowed", models.BooleanField(default=True)),
                ("back_camera_allowed", models.BooleanField(default=True)),
                ("qr_scanning_enabled", models.BooleanField(default=False)),
                (
                    "qr_auto_submit",
                    models.BooleanField(
                        default=False, help_text="Auto-submit after QR scan"
                    ),
                ),
                ("barcode_scanning_enabled", models.BooleanField(default=False)),
                (
                    "barcode_formats",
                    models.JSONField(
                        default=list,
                        help_text="Supported formats: CODE128, EAN13, QR, etc.",
                    ),
                ),
                ("ocr_enabled", models.BooleanField(default=False)),
                (
                    "ocr_languages",
                    models.JSONField(default=list, help_text="Languages for OCR"),
                ),
                (
                    "ocr_document_types",
                    models.JSONField(
                        default=list,
                        help_text="Document types: ID, passport, license, receipt, etc.",
                    ),
                ),
                ("id_verification_enabled", models.BooleanField(default=False)),
                (
                    "id_types_accepted",
                    models.JSONField(
                        default=list,
                        help_text="Accepted ID types: passport, drivers_license, national_id",
                    ),
                ),
                (
                    "min_image_quality",
                    models.IntegerField(default=70, help_text="Minimum quality %"),
                ),
                ("max_file_size_mb", models.IntegerField(default=10)),
                ("auto_enhance_images", models.BooleanField(default=True)),
                ("ar_preview_enabled", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="multimodal_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "multimodal_input_configs",
            },
        ),
        migrations.CreateModel(
            name="MultiRegionConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "primary_region",
                    models.CharField(default="us-east-1", max_length=50),
                ),
                (
                    "active_regions",
                    models.JSONField(default=list, help_text="List of active regions"),
                ),
                (
                    "routing_strategy",
                    models.CharField(
                        choices=[
                            ("latency", "Latency-based"),
                            ("geo", "Geographic"),
                            ("weighted", "Weighted"),
                            ("failover", "Failover"),
                        ],
                        default="latency",
                        max_length=50,
                    ),
                ),
                (
                    "routing_weights",
                    models.JSONField(
                        default=dict, help_text="Region weights for weighted routing"
                    ),
                ),
                (
                    "replication_mode",
                    models.CharField(
                        choices=[
                            ("async", "Asynchronous"),
                            ("sync", "Synchronous"),
                            ("eventual", "Eventually Consistent"),
                        ],
                        default="async",
                        max_length=20,
                    ),
                ),
                ("replication_lag_threshold_ms", models.IntegerField(default=1000)),
                ("enable_auto_failover", models.BooleanField(default=True)),
                ("failover_threshold_errors", models.IntegerField(default=5)),
                ("failover_window_seconds", models.IntegerField(default=60)),
                ("health_check_interval", models.IntegerField(default=30)),
                (
                    "region_configs",
                    models.JSONField(
                        default=dict, help_text="Per-region configuration overrides"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="multi_region_config",
                        to="forms.form",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="NFCConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("is_enabled", models.BooleanField(default=True)),
                ("nfc_tag_id", models.CharField(max_length=100, unique=True)),
                (
                    "nfc_data",
                    models.JSONField(default=dict, help_text="Data encoded in NFC tag"),
                ),
                (
                    "field_mappings",
                    models.JSONField(
                        default=dict, help_text="NFC data keys to form field IDs"
                    ),
                ),
                ("auto_populate_only", models.BooleanField(default=True)),
                ("auto_submit", models.BooleanField(default=False)),
                ("require_confirmation", models.BooleanField(default=True)),
                ("usage_count", models.IntegerField(default=0)),
                ("last_used_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="nfc_configs",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "nfc_configs",
            },
        ),
        migrations.CreateModel(
            name="NFCScan",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                ("scanned_data", models.JSONField(default=dict)),
                ("device_info", models.JSONField(default=dict)),
                ("fields_populated", models.JSONField(default=dict)),
                ("success", models.BooleanField(default=True)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "nfc_config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="scans",
                        to="forms.nfcconfig",
                    ),
                ),
            ],
            options={
                "db_table": "nfc_scans",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="NotificationAnalytics",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("date", models.DateField()),
                ("notifications_sent", models.IntegerField(default=0)),
                ("notifications_delivered", models.IntegerField(default=0)),
                ("notifications_clicked", models.IntegerField(default=0)),
                ("notifications_dismissed", models.IntegerField(default=0)),
                ("by_trigger", models.JSONField(default=dict)),
                ("delivery_rate", models.FloatField(default=0)),
                ("click_rate", models.FloatField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="notification_analytics",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "notification_analytics",
                "ordering": ["-date"],
            },
        ),
        migrations.CreateModel(
            name="OCRExtraction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                (
                    "document_type",
                    models.CharField(
                        choices=[
                            ("id_card", "ID Card"),
                            ("passport", "Passport"),
                            ("drivers_license", "Driver's License"),
                            ("business_card", "Business Card"),
                            ("receipt", "Receipt"),
                            ("invoice", "Invoice"),
                            ("form", "Filled Form"),
                            ("custom", "Custom Document"),
                        ],
                        max_length=30,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("processing", "Processing"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                            ("review_needed", "Review Needed"),
                        ],
                        default="processing",
                        max_length=20,
                    ),
                ),
                ("image_url", models.URLField()),
                (
                    "image_size",
                    models.JSONField(default=dict, help_text="Width, height"),
                ),
                ("raw_text", models.TextField(blank=True)),
                (
                    "extracted_fields",
                    models.JSONField(
                        default=dict, help_text="Field name to value mapping"
                    ),
                ),
                (
                    "confidence_scores",
                    models.JSONField(default=dict, help_text="Confidence per field"),
                ),
                (
                    "field_mappings",
                    models.JSONField(
                        default=dict, help_text="Map OCR fields to form fields"
                    ),
                ),
                ("overall_confidence", models.FloatField(default=0)),
                ("image_quality_score", models.FloatField(default=0)),
                ("needs_manual_review", models.BooleanField(default=False)),
                (
                    "review_fields",
                    models.JSONField(default=list, help_text="Fields requiring review"),
                ),
                ("reviewed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="ocr_extractions",
                        to="forms.form",
                    ),
                ),
                (
                    "reviewed_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "ocr_extractions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="OfflineSyncConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                (
                    "sync_strategy",
                    models.CharField(
                        choices=[
                            ("queue_first", "Queue First"),
                            ("sync_when_online", "Sync When Online"),
                            ("background_sync", "Background Sync"),
                            ("periodic_sync", "Periodic Sync"),
                        ],
                        default="background_sync",
                        max_length=30,
                    ),
                ),
                (
                    "conflict_resolution",
                    models.CharField(
                        choices=[
                            ("server_wins", "Server Wins"),
                            ("client_wins", "Client Wins"),
                            ("merge", "Merge"),
                            ("manual", "Manual Resolution"),
                            ("timestamp", "Latest Timestamp"),
                        ],
                        default="timestamp",
                        max_length=20,
                    ),
                ),
                ("max_offline_submissions", models.IntegerField(default=100)),
                ("max_storage_mb", models.IntegerField(default=50)),
                ("max_sync_retries", models.IntegerField(default=5)),
                ("retry_interval_minutes", models.IntegerField(default=5)),
                ("exponential_backoff", models.BooleanField(default=True)),
                ("compress_offline_data", models.BooleanField(default=True)),
                ("encrypt_offline_data", models.BooleanField(default=True)),
                (
                    "partial_sync_enabled",
                    models.BooleanField(
                        default=True, help_text="Sync as fields are completed"
                    ),
                ),
                ("notify_on_sync_complete", models.BooleanField(default=True)),
                ("notify_on_sync_error", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="offline_sync_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "offline_sync_configs",
            },
        ),
        migrations.CreateModel(
            name="PerformanceMonitor",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                ("collect_core_web_vitals", models.BooleanField(default=True)),
                ("collect_custom_metrics", models.BooleanField(default=True)),
                ("collect_user_timing", models.BooleanField(default=True)),
                ("collect_resource_timing", models.BooleanField(default=True)),
                ("sample_rate", models.FloatField(default=1.0, help_text="0.0-1.0")),
                ("enable_alerts", models.BooleanField(default=True)),
                ("alert_channels", models.JSONField(default=list)),
                ("lcp_threshold_ms", models.IntegerField(default=2500)),
                ("fid_threshold_ms", models.IntegerField(default=100)),
                ("cls_threshold", models.FloatField(default=0.1)),
                ("ttfb_threshold_ms", models.IntegerField(default=600)),
                (
                    "performance_budget",
                    models.JSONField(
                        default=dict, help_text="Performance budget configuration"
                    ),
                ),
                ("analytics_endpoint", models.URLField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="performance_monitor",
                        to="forms.form",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="EnhancedPerformanceAlert",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "alert_type",
                    models.CharField(
                        choices=[
                            ("lcp_regression", "LCP Regression"),
                            ("fid_regression", "FID Regression"),
                            ("cls_regression", "CLS Regression"),
                            ("ttfb_regression", "TTFB Regression"),
                            ("error_spike", "Error Spike"),
                            ("budget_exceeded", "Budget Exceeded"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("info", "Info"),
                            ("warning", "Warning"),
                            ("critical", "Critical"),
                        ],
                        max_length=20,
                    ),
                ),
                ("metric", models.CharField(max_length=50)),
                ("threshold", models.FloatField()),
                ("actual_value", models.FloatField()),
                ("message", models.TextField()),
                ("details", models.JSONField(default=dict)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("active", "Active"),
                            ("acknowledged", "Acknowledged"),
                            ("resolved", "Resolved"),
                        ],
                        default="active",
                        max_length=20,
                    ),
                ),
                ("acknowledged_at", models.DateTimeField(null=True)),
                ("resolved_at", models.DateTimeField(null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "acknowledged_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "monitor",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="enhanced_alerts",
                        to="forms.performancemonitor",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PerformanceSnapshot",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("window_start", models.DateTimeField()),
                ("window_end", models.DateTimeField()),
                ("lcp_p50", models.FloatField(null=True)),
                ("lcp_p75", models.FloatField(null=True)),
                ("lcp_p95", models.FloatField(null=True)),
                ("fid_p50", models.FloatField(null=True)),
                ("fid_p75", models.FloatField(null=True)),
                ("fid_p95", models.FloatField(null=True)),
                ("cls_p50", models.FloatField(null=True)),
                ("cls_p75", models.FloatField(null=True)),
                ("cls_p95", models.FloatField(null=True)),
                ("ttfb_p50", models.FloatField(null=True)),
                ("ttfb_p75", models.FloatField(null=True)),
                ("ttfb_p95", models.FloatField(null=True)),
                ("custom_metrics", models.JSONField(default=dict)),
                ("total_page_views", models.IntegerField(default=0)),
                ("unique_visitors", models.IntegerField(default=0)),
                ("by_device", models.JSONField(default=dict)),
                ("by_connection", models.JSONField(default=dict)),
                ("by_browser", models.JSONField(default=dict)),
                ("by_country", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "monitor",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="snapshots",
                        to="forms.performancemonitor",
                    ),
                ),
            ],
            options={
                "ordering": ["-window_end"],
            },
        ),
        migrations.CreateModel(
            name="PipelineActivity",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "activity_type",
                    models.CharField(
                        choices=[
                            ("created", "Created"),
                            ("stage_changed", "Stage Changed"),
                            ("assigned", "Assigned"),
                            ("due_date_set", "Due Date Set"),
                            ("commented", "Commented"),
                            ("label_added", "Label Added"),
                            ("label_removed", "Label Removed"),
                        ],
                        max_length=30,
                    ),
                ),
                ("details", models.JSONField(default=dict)),
                ("comment", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "card",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="activities",
                        to="forms.formpipelinecard",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "pipeline_activities",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PipelineStage",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=100)),
                ("description", models.TextField(blank=True)),
                ("color", models.CharField(default="#3B82F6", max_length=7)),
                ("order", models.IntegerField()),
                ("is_initial", models.BooleanField(default=False)),
                ("is_final", models.BooleanField(default=False)),
                ("require_approval", models.BooleanField(default=False)),
                (
                    "wip_limit",
                    models.IntegerField(
                        blank=True, help_text="Work-in-progress limit", null=True
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "auto_assign_to",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "pipeline",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="stages",
                        to="forms.formpipeline",
                    ),
                ),
            ],
            options={
                "db_table": "pipeline_stages",
                "ordering": ["order"],
            },
        ),
        migrations.AddField(
            model_name="formpipelinecard",
            name="stage",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="cards",
                to="forms.pipelinestage",
            ),
        ),
        migrations.CreateModel(
            name="Plugin",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("slug", models.SlugField(unique=True)),
                ("description", models.TextField(blank=True)),
                ("author_name", models.CharField(blank=True, max_length=200)),
                ("author_url", models.URLField(blank=True)),
                ("repository_url", models.URLField(blank=True)),
                ("homepage_url", models.URLField(blank=True)),
                ("version", models.CharField(max_length=50)),
                ("min_platform_version", models.CharField(blank=True, max_length=20)),
                ("max_platform_version", models.CharField(blank=True, max_length=20)),
                (
                    "plugin_type",
                    models.CharField(
                        choices=[
                            ("field_type", "Custom Field Type"),
                            ("validator", "Validator"),
                            ("integration", "Integration"),
                            ("theme", "Theme"),
                            ("analytics", "Analytics"),
                            ("submission_handler", "Submission Handler"),
                            ("ui_extension", "UI Extension"),
                        ],
                        default="field_type",
                        max_length=50,
                    ),
                ),
                (
                    "config_schema",
                    models.JSONField(
                        default=dict, help_text="JSON Schema for plugin configuration"
                    ),
                ),
                ("default_config", models.JSONField(default=dict)),
                ("entry_point", models.CharField(blank=True, max_length=200)),
                ("bundle_url", models.URLField(blank=True)),
                (
                    "hooks",
                    models.JSONField(
                        default=list, help_text="List of hooks this plugin uses"
                    ),
                ),
                ("required_permissions", models.JSONField(default=list)),
                ("is_published", models.BooleanField(default=False)),
                ("is_verified", models.BooleanField(default=False)),
                ("is_featured", models.BooleanField(default=False)),
                ("install_count", models.IntegerField(default=0)),
                ("rating_average", models.FloatField(default=0)),
                ("rating_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "author",
                    models.ForeignKey(
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="authored_plugins",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["-is_featured", "-install_count"],
            },
        ),
        migrations.CreateModel(
            name="PluginVersion",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("version", models.CharField(max_length=50)),
                ("changelog", models.TextField(blank=True)),
                ("bundle_url", models.URLField()),
                ("bundle_hash", models.CharField(max_length=64)),
                ("is_stable", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "plugin",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="versions",
                        to="forms.plugin",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PreloadPrediction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("current_step", models.CharField(max_length=100)),
                ("predicted_next", models.CharField(max_length=100)),
                ("actual_next", models.CharField(blank=True, max_length=100)),
                ("confidence", models.FloatField()),
                ("was_correct", models.BooleanField(default=False)),
                ("preload_used", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="predictions",
                        to="forms.intelligentpreloadconfig",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="PushNotificationConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "triggers",
                    models.JSONField(
                        default=list,
                        help_text='\n        Notification triggers:\n        [\n            {\n                "event": "form_reminder",\n                "delay_hours": 24,\n                "message_template": "Don\'t forget to complete your form!"\n            },\n            {\n                "event": "deadline_approaching",\n                "days_before": 2\n            }\n        ]\n        ',
                    ),
                ),
                ("quiet_hours_enabled", models.BooleanField(default=True)),
                ("quiet_hours_start", models.TimeField(blank=True, null=True)),
                ("quiet_hours_end", models.TimeField(blank=True, null=True)),
                (
                    "quiet_hours_timezone",
                    models.CharField(default="UTC", max_length=50),
                ),
                ("max_notifications_per_day", models.IntegerField(default=5)),
                ("min_interval_minutes", models.IntegerField(default=60)),
                (
                    "default_title",
                    models.CharField(default="Form Update", max_length=200),
                ),
                ("default_icon_url", models.URLField(blank=True)),
                ("default_badge_url", models.URLField(blank=True)),
                (
                    "actions",
                    models.JSONField(
                        default=list, help_text="Action buttons for notifications"
                    ),
                ),
                ("support_images", models.BooleanField(default=True)),
                ("support_actions", models.BooleanField(default=True)),
                ("personalize_content", models.BooleanField(default=True)),
                ("use_user_name", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="push_notification_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "push_notification_configs",
            },
        ),
        migrations.CreateModel(
            name="QRBarcodesScan",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                (
                    "scan_type",
                    models.CharField(
                        choices=[
                            ("qr", "QR Code"),
                            ("code128", "Code 128"),
                            ("ean13", "EAN-13"),
                            ("ean8", "EAN-8"),
                            ("upc", "UPC"),
                            ("code39", "Code 39"),
                            ("datamatrix", "Data Matrix"),
                            ("pdf417", "PDF417"),
                        ],
                        max_length=20,
                    ),
                ),
                ("raw_value", models.TextField()),
                (
                    "parsed_data",
                    models.JSONField(default=dict, help_text="Parsed structured data"),
                ),
                (
                    "data_type",
                    models.CharField(
                        blank=True, help_text="URL, vCard, WiFi, etc.", max_length=50
                    ),
                ),
                ("target_field_id", models.CharField(blank=True, max_length=100)),
                (
                    "applied_to_fields",
                    models.JSONField(
                        default=dict, help_text="Field IDs and values applied"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="qr_barcode_scans",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "qr_barcode_scans",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="QueryAnalysis",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("query_hash", models.CharField(max_length=64)),
                ("query_template", models.TextField()),
                ("avg_duration_ms", models.FloatField()),
                ("max_duration_ms", models.FloatField()),
                ("execution_count", models.IntegerField(default=0)),
                ("explain_plan", models.JSONField(default=dict)),
                ("optimization_suggestions", models.JSONField(default=list)),
                ("is_optimized", models.BooleanField(default=False)),
                ("optimization_applied", models.TextField(blank=True)),
                ("first_seen", models.DateTimeField(auto_now_add=True)),
                ("last_seen", models.DateTimeField(auto_now=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="query_analyses",
                        to="forms.databaseoptimizationconfig",
                    ),
                ),
            ],
            options={
                "ordering": ["-avg_duration_ms"],
            },
        ),
        migrations.CreateModel(
            name="RateLimitConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                (
                    "limit_type",
                    models.CharField(
                        choices=[
                            ("api", "API Endpoint"),
                            ("form", "Form"),
                            ("user", "User"),
                            ("ip", "IP Address"),
                            ("token", "API Token"),
                        ],
                        max_length=20,
                    ),
                ),
                ("requests_per_second", models.IntegerField(blank=True, null=True)),
                ("requests_per_minute", models.IntegerField(blank=True, null=True)),
                ("requests_per_hour", models.IntegerField(blank=True, null=True)),
                ("requests_per_day", models.IntegerField(blank=True, null=True)),
                (
                    "burst_size",
                    models.IntegerField(
                        default=10, help_text="Allowed burst above limit"
                    ),
                ),
                ("burst_duration_seconds", models.IntegerField(default=10)),
                (
                    "throttle_strategy",
                    models.CharField(
                        choices=[
                            ("fixed_window", "Fixed Window"),
                            ("sliding_window", "Sliding Window"),
                            ("token_bucket", "Token Bucket"),
                            ("leaky_bucket", "Leaky Bucket"),
                        ],
                        default="sliding_window",
                        max_length=30,
                    ),
                ),
                ("exceed_response_code", models.IntegerField(default=429)),
                (
                    "exceed_response_message",
                    models.TextField(
                        default="Rate limit exceeded. Please try again later."
                    ),
                ),
                ("retry_after_header", models.BooleanField(default=True)),
                ("exempt_ips", models.JSONField(default=list)),
                ("exempt_users", models.JSONField(default=list)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="rate_limit_configs",
                        to="forms.form",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="rate_limit_configs",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "rate_limit_configs",
            },
        ),
        migrations.CreateModel(
            name="RateLimitEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "identifier",
                    models.CharField(
                        help_text="IP, user ID, token, etc.", max_length=255
                    ),
                ),
                ("identifier_type", models.CharField(max_length=20)),
                ("exceeded", models.BooleanField(default=True)),
                ("current_count", models.IntegerField()),
                ("limit", models.IntegerField()),
                ("endpoint", models.CharField(blank=True, max_length=255)),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="events",
                        to="forms.ratelimitconfig",
                    ),
                ),
            ],
            options={
                "db_table": "rate_limit_events",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="RealTimeCollabSession",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100, unique=True)),
                ("is_active", models.BooleanField(default=True)),
                (
                    "participants",
                    models.JSONField(
                        default=list,
                        help_text="List of active participants with cursor positions",
                    ),
                ),
                ("max_participants", models.IntegerField(default=10)),
                (
                    "conflict_resolution",
                    models.CharField(
                        choices=[
                            ("last_write", "Last Write Wins"),
                            ("first_write", "First Write Wins"),
                            ("merge", "Auto Merge"),
                            ("manual", "Manual Resolution"),
                        ],
                        default="merge",
                        max_length=20,
                    ),
                ),
                (
                    "operations",
                    models.JSONField(
                        default=list,
                        help_text="Ordered list of operations for conflict resolution",
                    ),
                ),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("ended_at", models.DateTimeField(null=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="collab_sessions",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="CollabParticipant",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "color",
                    models.CharField(help_text="Cursor/highlight color", max_length=7),
                ),
                ("cursor_position", models.JSONField(default=dict)),
                ("current_field", models.CharField(blank=True, max_length=100)),
                ("can_edit", models.BooleanField(default=True)),
                ("can_comment", models.BooleanField(default=True)),
                ("is_active", models.BooleanField(default=True)),
                ("last_seen", models.DateTimeField(auto_now=True)),
                ("joined_at", models.DateTimeField(auto_now_add=True)),
                ("left_at", models.DateTimeField(null=True)),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="collab_participations",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "session",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="session_participants",
                        to="forms.realtimecollabsession",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="CollabOperation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "operation_type",
                    models.CharField(
                        choices=[
                            ("insert", "Insert"),
                            ("delete", "Delete"),
                            ("update", "Update"),
                            ("move", "Move"),
                        ],
                        max_length=20,
                    ),
                ),
                ("target_type", models.CharField(max_length=50)),
                ("target_id", models.CharField(max_length=100)),
                (
                    "target_path",
                    models.JSONField(default=list, help_text="Path to nested property"),
                ),
                ("old_value", models.JSONField(null=True)),
                ("new_value", models.JSONField(null=True)),
                ("vector_clock", models.JSONField(default=dict)),
                ("sequence_number", models.BigIntegerField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "participant",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="operations",
                        to="forms.collabparticipant",
                    ),
                ),
                (
                    "session",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="session_operations",
                        to="forms.realtimecollabsession",
                    ),
                ),
            ],
            options={
                "ordering": ["sequence_number"],
            },
        ),
        migrations.CreateModel(
            name="RegionHealth",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("region", models.CharField(max_length=50)),
                ("is_healthy", models.BooleanField(default=True)),
                ("health_score", models.FloatField(default=100)),
                ("latency_ms", models.FloatField(default=0)),
                ("error_rate", models.FloatField(default=0)),
                ("request_count", models.IntegerField(default=0)),
                ("last_check_at", models.DateTimeField(auto_now=True)),
                ("last_healthy_at", models.DateTimeField(null=True)),
                ("last_unhealthy_at", models.DateTimeField(null=True)),
                ("is_failover_active", models.BooleanField(default=False)),
                ("failover_target", models.CharField(blank=True, max_length=50)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="region_health",
                        to="forms.multiregionconfig",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="ResourceOptimization",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "resource_type",
                    models.CharField(
                        choices=[
                            ("image", "Image"),
                            ("script", "Script"),
                            ("stylesheet", "Stylesheet"),
                            ("font", "Font"),
                            ("video", "Video"),
                            ("other", "Other"),
                        ],
                        max_length=50,
                    ),
                ),
                ("resource_url", models.URLField()),
                ("original_size_bytes", models.BigIntegerField()),
                ("optimized_size_bytes", models.BigIntegerField(null=True)),
                ("optimization_type", models.CharField(max_length=100)),
                ("optimization_details", models.JSONField(default=dict)),
                ("potential_savings_bytes", models.BigIntegerField(default=0)),
                ("potential_time_savings_ms", models.FloatField(default=0)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("recommended", "Recommended"),
                            ("applied", "Applied"),
                            ("skipped", "Skipped"),
                        ],
                        default="recommended",
                        max_length=20,
                    ),
                ),
                ("applied_at", models.DateTimeField(null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="resource_optimizations",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "ordering": ["-potential_savings_bytes"],
            },
        ),
        migrations.CreateModel(
            name="RoutingAssignment",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "assigned_by",
                    models.CharField(
                        help_text="system, manual, rule:xxx", max_length=50
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("assigned", "Assigned"),
                            ("accepted", "Accepted"),
                            ("in_progress", "In Progress"),
                            ("completed", "Completed"),
                            ("reassigned", "Reassigned"),
                            ("expired", "Expired"),
                        ],
                        default="assigned",
                        max_length=20,
                    ),
                ),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                            ("urgent", "Urgent"),
                        ],
                        default="medium",
                        max_length=20,
                    ),
                ),
                ("routing_rule_id", models.CharField(blank=True, max_length=100)),
                (
                    "routing_score",
                    models.FloatField(default=0, help_text="AI routing score"),
                ),
                ("routing_reason", models.TextField(blank=True)),
                ("due_at", models.DateTimeField(blank=True, null=True)),
                ("accepted_at", models.DateTimeField(blank=True, null=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("internal_notes", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "assigned_to",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="routing_assignments",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "submission",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="routing_assignments",
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "routing_assignments",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="RuleEngine",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("is_active", models.BooleanField(default=True)),
                ("priority", models.IntegerField(default=0)),
                (
                    "rules",
                    models.JSONField(
                        default=dict,
                        help_text='\n        Complex rule definition:\n        {\n            "conditions": {\n                "all": [\n                    {"field": "age", "operator": "gte", "value": 18},\n                    {\n                        "any": [\n                            {"field": "country", "operator": "in", "value": ["US", "CA"]},\n                            {"field": "premium", "operator": "equals", "value": true}\n                        ]\n                    }\n                ]\n            },\n            "actions": [\n                {"type": "show_field", "target": "premium_options"},\n                {"type": "set_value", "field": "discount", "value": 10},\n                {"type": "external_lookup", "api": "pricing_api", "params": {"tier": "${plan}"}}\n            ]\n        }\n        ',
                    ),
                ),
                (
                    "external_lookups",
                    models.JSONField(
                        default=list,
                        help_text="External APIs/databases for rule evaluation",
                    ),
                ),
                ("cache_results", models.BooleanField(default=True)),
                ("cache_ttl_seconds", models.IntegerField(default=300)),
                ("executions_count", models.IntegerField(default=0)),
                ("last_executed_at", models.DateTimeField(blank=True, null=True)),
                ("avg_execution_time_ms", models.FloatField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="rule_engines",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "rule_engines",
                "ordering": ["priority"],
            },
        ),
        migrations.CreateModel(
            name="RuleExecutionLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                ("input_data", models.JSONField()),
                ("conditions_evaluated", models.JSONField(default=dict)),
                ("conditions_result", models.BooleanField()),
                ("actions_executed", models.JSONField(default=list)),
                ("actions_results", models.JSONField(default=list)),
                ("execution_time_ms", models.FloatField()),
                ("external_calls_count", models.IntegerField(default=0)),
                ("had_errors", models.BooleanField(default=False)),
                ("error_messages", models.JSONField(default=list)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "rule",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="execution_logs",
                        to="forms.ruleengine",
                    ),
                ),
            ],
            options={
                "db_table": "rule_execution_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ScalingEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "action",
                    models.CharField(
                        choices=[
                            ("scale_up", "Scale Up"),
                            ("scale_down", "Scale Down"),
                        ],
                        max_length=20,
                    ),
                ),
                ("from_instances", models.IntegerField()),
                ("to_instances", models.IntegerField()),
                ("trigger_type", models.CharField(max_length=50)),
                ("trigger_value", models.FloatField()),
                ("trigger_threshold", models.FloatField()),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("initiated", "Initiated"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                        ],
                        default="initiated",
                        max_length=20,
                    ),
                ),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("completed_at", models.DateTimeField(null=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="events",
                        to="forms.autoscalingconfig",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ScheduledNotification",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("scheduled_for", models.DateTimeField()),
                ("trigger_event", models.CharField(max_length=50)),
                ("title", models.CharField(max_length=200)),
                ("body", models.TextField()),
                ("image_url", models.URLField(blank=True)),
                ("action_url", models.URLField(blank=True)),
                ("data", models.JSONField(default=dict)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("scheduled", "Scheduled"),
                            ("sent", "Sent"),
                            ("failed", "Failed"),
                            ("cancelled", "Cancelled"),
                        ],
                        default="scheduled",
                        max_length=20,
                    ),
                ),
                ("sent_at", models.DateTimeField(blank=True, null=True)),
                ("error_message", models.TextField(blank=True)),
                ("retry_count", models.IntegerField(default=0)),
                ("max_retries", models.IntegerField(default=3)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="scheduled_notifications",
                        to="forms.pushnotificationconfig",
                    ),
                ),
                (
                    "subscription",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.pushnotificationsubscription",
                    ),
                ),
            ],
            options={
                "db_table": "scheduled_notifications",
                "ordering": ["scheduled_for"],
            },
        ),
        migrations.CreateModel(
            name="ScreenReaderOptimization",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("aria_live_announcements", models.BooleanField(default=True)),
                ("announce_field_count", models.BooleanField(default=True)),
                ("announce_required_fields", models.BooleanField(default=True)),
                ("announce_validation_errors", models.BooleanField(default=True)),
                ("announce_progress", models.BooleanField(default=True)),
                ("enable_landmarks", models.BooleanField(default=True)),
                ("enable_skip_links", models.BooleanField(default=True)),
                ("enable_heading_navigation", models.BooleanField(default=True)),
                (
                    "custom_reading_order",
                    models.JSONField(
                        default=list, help_text="Custom field reading order"
                    ),
                ),
                (
                    "field_descriptions",
                    models.JSONField(
                        default=dict,
                        help_text="Enhanced descriptions for screen readers per field",
                    ),
                ),
                (
                    "error_summary_position",
                    models.CharField(
                        choices=[
                            ("top", "Top"),
                            ("bottom", "Bottom"),
                            ("inline", "Inline"),
                        ],
                        default="top",
                        max_length=20,
                    ),
                ),
                (
                    "verbosity_level",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                        ],
                        default="medium",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="screen_reader_optimization",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "screen_reader_optimizations",
            },
        ),
        migrations.CreateModel(
            name="SDKGenerator",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                (
                    "target",
                    models.CharField(
                        choices=[
                            ("typescript", "TypeScript"),
                            ("javascript", "JavaScript"),
                            ("python", "Python"),
                            ("ruby", "Ruby"),
                            ("go", "Go"),
                            ("php", "PHP"),
                            ("java", "Java"),
                            ("csharp", "C#"),
                            ("swift", "Swift"),
                            ("kotlin", "Kotlin"),
                        ],
                        max_length=50,
                    ),
                ),
                ("api_version", models.CharField(default="v1", max_length=20)),
                (
                    "config",
                    models.JSONField(
                        default=dict, help_text="SDK generation configuration"
                    ),
                ),
                ("package_name", models.CharField(max_length=200)),
                ("package_version", models.CharField(default="1.0.0", max_length=50)),
                ("last_generated_at", models.DateTimeField(null=True)),
                ("download_url", models.URLField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "owner",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="sdk_generators",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="SequenceEnrollment",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("email", models.EmailField(max_length=254)),
                ("phone", models.CharField(blank=True, max_length=20)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("active", "Active"),
                            ("paused", "Paused"),
                            ("completed", "Completed"),
                            ("exited", "Exited"),
                            ("unsubscribed", "Unsubscribed"),
                        ],
                        default="active",
                        max_length=20,
                    ),
                ),
                ("current_step", models.IntegerField(default=0)),
                ("personalization_data", models.JSONField(default=dict)),
                ("opens_count", models.IntegerField(default=0)),
                ("clicks_count", models.IntegerField(default=0)),
                ("replies_count", models.IntegerField(default=0)),
                ("next_step_at", models.DateTimeField(blank=True, null=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("exit_reason", models.CharField(blank=True, max_length=100)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "sequence",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="enrollments",
                        to="forms.followupsequence",
                    ),
                ),
                (
                    "submission",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="sequence_enrollments",
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "sequence_enrollments",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="SequenceMessage",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("step_number", models.IntegerField()),
                ("channel", models.CharField(max_length=20)),
                ("subject", models.CharField(blank=True, max_length=500)),
                ("content", models.TextField()),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("scheduled", "Scheduled"),
                            ("sent", "Sent"),
                            ("delivered", "Delivered"),
                            ("opened", "Opened"),
                            ("clicked", "Clicked"),
                            ("bounced", "Bounced"),
                            ("failed", "Failed"),
                        ],
                        default="scheduled",
                        max_length=20,
                    ),
                ),
                ("scheduled_for", models.DateTimeField()),
                ("sent_at", models.DateTimeField(blank=True, null=True)),
                ("opened_at", models.DateTimeField(blank=True, null=True)),
                ("clicked_at", models.DateTimeField(blank=True, null=True)),
                ("provider_message_id", models.CharField(blank=True, max_length=200)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "enrollment",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="messages",
                        to="forms.sequenceenrollment",
                    ),
                ),
            ],
            options={
                "db_table": "sequence_messages",
                "ordering": ["step_number"],
            },
        ),
        migrations.CreateModel(
            name="SmartRoutingConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "strategy",
                    models.CharField(
                        choices=[
                            ("round_robin", "Round Robin"),
                            ("load_balanced", "Load Balanced"),
                            ("skills_based", "Skills Based"),
                            ("priority_based", "Priority Based"),
                            ("geo_based", "Geography Based"),
                            ("ai_optimized", "AI Optimized"),
                        ],
                        default="round_robin",
                        max_length=30,
                    ),
                ),
                ("use_ai_scoring", models.BooleanField(default=False)),
                ("ai_model_version", models.CharField(default="v1.0", max_length=50)),
                (
                    "routing_rules",
                    models.JSONField(
                        default=list,
                        help_text='\n        Routing rules:\n        [\n            {\n                "name": "High Value Leads",\n                "conditions": [{"field": "budget", "operator": "gte", "value": 10000}],\n                "assign_to": "senior_team",\n                "priority": "high"\n            }\n        ]\n        ',
                    ),
                ),
                (
                    "max_assignments_per_user",
                    models.IntegerField(blank=True, null=True),
                ),
                ("respect_working_hours", models.BooleanField(default=True)),
                ("notify_assignee", models.BooleanField(default=True)),
                (
                    "notification_channel",
                    models.CharField(
                        choices=[
                            ("email", "Email"),
                            ("slack", "Slack"),
                            ("sms", "SMS"),
                            ("push", "Push"),
                        ],
                        default="email",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "fallback_assignee",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="fallback_routing_forms",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="smart_routing_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "smart_routing_configs",
            },
        ),
        migrations.CreateModel(
            name="SSOConfiguration",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                (
                    "protocol",
                    models.CharField(
                        choices=[
                            ("saml", "SAML 2.0"),
                            ("oauth", "OAuth 2.0"),
                            ("oidc", "OpenID Connect"),
                            ("ldap", "LDAP"),
                            ("active_directory", "Active Directory"),
                        ],
                        max_length=30,
                    ),
                ),
                ("is_primary", models.BooleanField(default=False)),
                ("entity_id", models.CharField(blank=True, max_length=500)),
                ("metadata_url", models.URLField(blank=True)),
                ("saml_sso_url", models.URLField(blank=True)),
                ("saml_slo_url", models.URLField(blank=True)),
                ("saml_certificate", models.TextField(blank=True)),
                (
                    "saml_signing_algorithm",
                    models.CharField(default="sha256", max_length=50),
                ),
                ("oauth_client_id", models.CharField(blank=True, max_length=500)),
                ("oauth_client_secret_encrypted", models.TextField(blank=True)),
                ("oauth_authorize_url", models.URLField(blank=True)),
                ("oauth_token_url", models.URLField(blank=True)),
                ("oauth_userinfo_url", models.URLField(blank=True)),
                ("oauth_scopes", models.JSONField(default=list)),
                ("ldap_server", models.CharField(blank=True, max_length=500)),
                ("ldap_port", models.IntegerField(default=389)),
                ("ldap_use_ssl", models.BooleanField(default=False)),
                ("ldap_base_dn", models.CharField(blank=True, max_length=500)),
                ("ldap_bind_dn", models.CharField(blank=True, max_length=500)),
                ("ldap_bind_password_encrypted", models.TextField(blank=True)),
                (
                    "ldap_user_search_filter",
                    models.CharField(blank=True, max_length=500),
                ),
                (
                    "attribute_mapping",
                    models.JSONField(
                        default=dict,
                        help_text='\n        Map SSO attributes to user fields:\n        {\n            "email": "mail",\n            "first_name": "givenName",\n            "last_name": "sn",\n            "groups": "memberOf"\n        }\n        ',
                    ),
                ),
                (
                    "role_mapping",
                    models.JSONField(
                        default=dict, help_text="Map SSO groups to application roles"
                    ),
                ),
                ("auto_provision_users", models.BooleanField(default=True)),
                ("auto_update_users", models.BooleanField(default=True)),
                ("auto_deactivate_users", models.BooleanField(default=False)),
                ("allowed_email_domains", models.JSONField(default=list)),
                ("is_active", models.BooleanField(default=True)),
                ("last_login_at", models.DateTimeField(blank=True, null=True)),
                ("login_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "organization",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="sso_configurations",
                        to="users.team",
                    ),
                ),
            ],
            options={
                "db_table": "sso_configurations",
            },
        ),
        migrations.CreateModel(
            name="SSOLoginEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("success", models.BooleanField(default=True)),
                ("error_code", models.CharField(blank=True, max_length=50)),
                ("error_message", models.TextField(blank=True)),
                ("sso_subject", models.CharField(blank=True, max_length=255)),
                ("sso_session_id", models.CharField(blank=True, max_length=255)),
                ("sso_attributes", models.JSONField(default=dict)),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "sso_config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="login_events",
                        to="forms.ssoconfiguration",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "sso_login_events",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="SubmissionDataLocation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("storage_region", models.CharField(max_length=30)),
                (
                    "storage_provider",
                    models.CharField(default="primary", max_length=50),
                ),
                ("storage_path", models.TextField(blank=True)),
                ("encrypted_at_rest", models.BooleanField(default=True)),
                ("encryption_key_region", models.CharField(blank=True, max_length=30)),
                (
                    "replicated_to",
                    models.JSONField(default=list, help_text="Regions replicated to"),
                ),
                ("last_replication_at", models.DateTimeField(blank=True, null=True)),
                ("transfer_history", models.JSONField(default=list)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "submission",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="data_location",
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "submission_data_locations",
            },
        ),
        migrations.CreateModel(
            name="SyncQueue",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("device_id", models.CharField(max_length=200)),
                (
                    "local_id",
                    models.CharField(help_text="Client-side ID", max_length=100),
                ),
                (
                    "operation",
                    models.CharField(
                        choices=[
                            ("create", "Create"),
                            ("update", "Update"),
                            ("delete", "Delete"),
                        ],
                        max_length=20,
                    ),
                ),
                ("data", models.JSONField()),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("syncing", "Syncing"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                            ("conflict", "Conflict"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("retry_count", models.IntegerField(default=0)),
                ("last_error", models.TextField(blank=True)),
                (
                    "created_offline_at",
                    models.DateTimeField(help_text="When created offline"),
                ),
                ("queued_at", models.DateTimeField(auto_now_add=True)),
                ("synced_at", models.DateTimeField(blank=True, null=True)),
                (
                    "server_id",
                    models.UUIDField(
                        blank=True, help_text="Server-side submission ID", null=True
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="sync_queue",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "sync_queue",
                "ordering": ["created_offline_at"],
            },
        ),
        migrations.CreateModel(
            name="SyncConflict",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("client_data", models.JSONField()),
                ("server_data", models.JSONField()),
                ("merged_data", models.JSONField(blank=True, null=True)),
                (
                    "conflict_fields",
                    models.JSONField(default=list, help_text="Fields with conflicts"),
                ),
                ("conflict_type", models.CharField(max_length=50)),
                (
                    "resolution_status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Resolution"),
                            ("auto_resolved", "Auto Resolved"),
                            ("manual_resolved", "Manually Resolved"),
                            ("discarded", "Discarded"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("resolution_strategy", models.CharField(blank=True, max_length=30)),
                ("resolved_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "resolved_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "sync_item",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="conflicts",
                        to="forms.syncqueue",
                    ),
                ),
            ],
            options={
                "db_table": "sync_conflicts",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="TeamMemberCapacity",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("max_daily_assignments", models.IntegerField(default=20)),
                ("max_weekly_assignments", models.IntegerField(default=100)),
                ("max_concurrent_assignments", models.IntegerField(default=10)),
                ("current_assignments", models.IntegerField(default=0)),
                ("daily_assignments", models.IntegerField(default=0)),
                ("weekly_assignments", models.IntegerField(default=0)),
                ("skills", models.JSONField(default=list)),
                ("skill_levels", models.JSONField(default=dict)),
                (
                    "working_hours",
                    models.JSONField(
                        default=dict,
                        help_text='\n        {\n            "timezone": "America/New_York",\n            "monday": {"start": "09:00", "end": "17:00"},\n            "tuesday": {"start": "09:00", "end": "17:00"},\n            ...\n        }\n        ',
                    ),
                ),
                ("is_available", models.BooleanField(default=True)),
                ("out_of_office_until", models.DateTimeField(blank=True, null=True)),
                ("avg_response_time_hours", models.FloatField(default=0)),
                ("avg_completion_time_hours", models.FloatField(default=0)),
                ("satisfaction_score", models.FloatField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="team_capacities",
                        to="forms.form",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="routing_capacity",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "team_member_capacities",
            },
        ),
        migrations.CreateModel(
            name="TeamWorkspace",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("slug", models.SlugField(unique=True)),
                ("description", models.TextField(blank=True)),
                (
                    "features",
                    models.JSONField(
                        default=dict, help_text="Enabled workspace features"
                    ),
                ),
                ("form_count", models.IntegerField(default=0)),
                ("member_count", models.IntegerField(default=1)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "default_brand_guideline",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to="forms.enhancedbrandguideline",
                    ),
                ),
                (
                    "owner",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="owned_workspaces",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["-updated_at"],
            },
        ),
        migrations.CreateModel(
            name="PluginInstallation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("config", models.JSONField(default=dict)),
                ("is_enabled", models.BooleanField(default=True)),
                ("installed_version", models.CharField(max_length=50)),
                ("installed_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "plugin",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="installations",
                        to="forms.plugin",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="installed_plugins",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "workspace",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="installed_plugins",
                        to="forms.teamworkspace",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="EnhancedFormTemplate",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("thumbnail_url", models.URLField(blank=True)),
                ("schema", models.JSONField(default=dict)),
                ("settings", models.JSONField(default=dict)),
                ("theme_config", models.JSONField(default=dict)),
                ("category", models.CharField(blank=True, max_length=100)),
                ("subcategory", models.CharField(blank=True, max_length=100)),
                ("tags", models.JSONField(default=list)),
                ("industry", models.CharField(blank=True, max_length=100)),
                ("use_case", models.CharField(blank=True, max_length=100)),
                ("is_public", models.BooleanField(default=False)),
                ("is_featured", models.BooleanField(default=False)),
                ("use_count", models.IntegerField(default=0)),
                ("rating_average", models.FloatField(default=0)),
                ("rating_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="created_form_templates",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "workspace",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="templates",
                        to="forms.teamworkspace",
                    ),
                ),
            ],
            options={
                "ordering": ["-is_featured", "-use_count"],
            },
        ),
        migrations.CreateModel(
            name="DesignSystem",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                ("colors", models.JSONField(default=dict)),
                ("typography", models.JSONField(default=dict)),
                ("spacing", models.JSONField(default=dict)),
                ("borders", models.JSONField(default=dict)),
                ("shadows", models.JSONField(default=dict)),
                ("animations", models.JSONField(default=dict)),
                (
                    "components",
                    models.JSONField(
                        default=dict, help_text="Component style definitions"
                    ),
                ),
                (
                    "breakpoints",
                    models.JSONField(default=dict, help_text="Responsive breakpoints"),
                ),
                ("compiled_css", models.TextField(blank=True)),
                ("css_variables", models.TextField(blank=True)),
                ("is_published", models.BooleanField(default=False)),
                ("version", models.CharField(default="1.0.0", max_length=20)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "owner",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="design_systems",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "workspace",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="design_systems",
                        to="forms.teamworkspace",
                    ),
                ),
            ],
            options={
                "ordering": ["-updated_at"],
            },
        ),
        migrations.CreateModel(
            name="ThemeMarketplace",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("slug", models.SlugField(unique=True)),
                ("description", models.TextField(blank=True)),
                ("preview_image", models.URLField(blank=True)),
                (
                    "preview_images",
                    models.JSONField(
                        default=list, help_text="Array of preview image URLs"
                    ),
                ),
                ("author_name", models.CharField(blank=True, max_length=200)),
                ("author_website", models.URLField(blank=True)),
                (
                    "category",
                    models.CharField(
                        choices=[
                            ("business", "Business"),
                            ("creative", "Creative"),
                            ("minimal", "Minimal"),
                            ("modern", "Modern"),
                            ("classic", "Classic"),
                            ("colorful", "Colorful"),
                            ("dark", "Dark Mode"),
                            ("accessible", "Accessibility-First"),
                            ("industry", "Industry-Specific"),
                        ],
                        default="modern",
                        max_length=50,
                    ),
                ),
                ("tags", models.JSONField(default=list)),
                (
                    "industries",
                    models.JSONField(default=list, help_text="Suitable industries"),
                ),
                (
                    "theme_config",
                    models.JSONField(
                        default=dict, help_text="Complete theme configuration"
                    ),
                ),
                ("css_variables", models.JSONField(default=dict)),
                ("custom_css", models.TextField(blank=True)),
                ("custom_fonts", models.JSONField(default=list)),
                ("is_free", models.BooleanField(default=True)),
                (
                    "price",
                    models.DecimalField(decimal_places=2, default=0, max_digits=10),
                ),
                ("currency", models.CharField(default="USD", max_length=3)),
                ("download_count", models.IntegerField(default=0)),
                ("rating_average", models.FloatField(default=0)),
                ("rating_count", models.IntegerField(default=0)),
                ("is_published", models.BooleanField(default=False)),
                ("is_featured", models.BooleanField(default=False)),
                ("is_verified", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "author",
                    models.ForeignKey(
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="marketplace_themes",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "ordering": ["-is_featured", "-rating_average", "-download_count"],
            },
        ),
        migrations.CreateModel(
            name="ThemePurchase",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("amount_paid", models.DecimalField(decimal_places=2, max_digits=10)),
                ("currency", models.CharField(default="USD", max_length=3)),
                ("transaction_id", models.CharField(blank=True, max_length=200)),
                ("payment_provider", models.CharField(default="stripe", max_length=50)),
                ("license_key", models.CharField(max_length=100, unique=True)),
                (
                    "license_type",
                    models.CharField(
                        choices=[
                            ("single", "Single Use"),
                            ("unlimited", "Unlimited Use"),
                            ("team", "Team License"),
                        ],
                        default="unlimited",
                        max_length=20,
                    ),
                ),
                ("purchased_at", models.DateTimeField(auto_now_add=True)),
                (
                    "theme",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="purchases",
                        to="forms.thememarketplace",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="theme_purchases",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="ThemeReview",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "rating",
                    models.IntegerField(
                        choices=[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]
                    ),
                ),
                ("title", models.CharField(blank=True, max_length=200)),
                ("review_text", models.TextField(blank=True)),
                ("helpful_count", models.IntegerField(default=0)),
                ("is_verified_purchase", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "theme",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="reviews",
                        to="forms.thememarketplace",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="theme_reviews",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="ThreatDetectionConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=True)),
                ("detect_sql_injection", models.BooleanField(default=True)),
                ("detect_xss", models.BooleanField(default=True)),
                ("detect_bot_submissions", models.BooleanField(default=True)),
                ("detect_velocity_abuse", models.BooleanField(default=True)),
                ("detect_data_exfiltration", models.BooleanField(default=True)),
                ("detect_anomalous_patterns", models.BooleanField(default=True)),
                ("ml_anomaly_detection", models.BooleanField(default=True)),
                ("ml_model_version", models.CharField(default="v1.0", max_length=50)),
                (
                    "anomaly_threshold",
                    models.FloatField(
                        default=0.85, help_text="Anomaly score threshold"
                    ),
                ),
                ("auto_block_threats", models.BooleanField(default=True)),
                ("block_duration_hours", models.IntegerField(default=24)),
                ("notify_on_threat", models.BooleanField(default=True)),
                ("notification_emails", models.JSONField(default=list)),
                ("rate_limit_enabled", models.BooleanField(default=True)),
                ("max_submissions_per_ip_hour", models.IntegerField(default=10)),
                ("max_submissions_per_ip_day", models.IntegerField(default=50)),
                ("device_fingerprinting", models.BooleanField(default=True)),
                ("behavioral_fingerprinting", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="threat_detection_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "threat_detection_configs",
            },
        ),
        migrations.CreateModel(
            name="ThreatEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "threat_type",
                    models.CharField(
                        choices=[
                            ("sql_injection", "SQL Injection Attempt"),
                            ("xss", "XSS Attempt"),
                            ("bot", "Bot Submission"),
                            ("velocity_abuse", "Velocity Abuse"),
                            ("data_exfiltration", "Data Exfiltration"),
                            ("anomalous_pattern", "Anomalous Pattern"),
                            ("brute_force", "Brute Force"),
                            ("credential_stuffing", "Credential Stuffing"),
                            ("form_spam", "Form Spam"),
                        ],
                        max_length=30,
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                            ("critical", "Critical"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("detected", "Detected"),
                            ("blocked", "Blocked"),
                            ("allowed", "Allowed"),
                            ("investigating", "Investigating"),
                            ("false_positive", "False Positive"),
                            ("confirmed", "Confirmed Threat"),
                        ],
                        default="detected",
                        max_length=20,
                    ),
                ),
                ("ip_address", models.GenericIPAddressField()),
                ("user_agent", models.TextField(blank=True)),
                ("device_fingerprint", models.CharField(blank=True, max_length=100)),
                ("description", models.TextField()),
                ("detection_reason", models.TextField()),
                (
                    "ml_score",
                    models.FloatField(default=0, help_text="ML confidence score"),
                ),
                ("submission_attempt_data", models.JSONField(default=dict)),
                ("payload_analysis", models.JSONField(default=dict)),
                ("triggered_rules", models.JSONField(default=list)),
                ("action_taken", models.CharField(blank=True, max_length=50)),
                ("blocked_until", models.DateTimeField(blank=True, null=True)),
                ("reviewed_at", models.DateTimeField(blank=True, null=True)),
                ("review_notes", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="threat_events",
                        to="forms.form",
                    ),
                ),
                (
                    "reviewed_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "threat_events",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="IPBlocklist",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("ip_address", models.GenericIPAddressField()),
                (
                    "ip_range",
                    models.CharField(
                        blank=True, help_text="CIDR notation", max_length=50
                    ),
                ),
                (
                    "reason",
                    models.CharField(
                        choices=[
                            ("manual", "Manual Block"),
                            ("threat_detected", "Threat Detected"),
                            ("velocity_abuse", "Velocity Abuse"),
                            ("bot_activity", "Bot Activity"),
                        ],
                        max_length=30,
                    ),
                ),
                ("description", models.TextField(blank=True)),
                ("is_permanent", models.BooleanField(default=False)),
                ("expires_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        blank=True,
                        help_text="Null for global block",
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="ip_blocklist",
                        to="forms.form",
                    ),
                ),
                (
                    "threat_event",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to="forms.threatevent",
                    ),
                ),
            ],
            options={
                "db_table": "ip_blocklist",
            },
        ),
        migrations.CreateModel(
            name="UserBehaviorProfile",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "user_identifier",
                    models.CharField(
                        help_text="Email or fingerprint", max_length=255, unique=True
                    ),
                ),
                ("forms_viewed", models.IntegerField(default=0)),
                ("forms_started", models.IntegerField(default=0)),
                ("forms_completed", models.IntegerField(default=0)),
                ("forms_abandoned", models.IntegerField(default=0)),
                ("preferred_device", models.CharField(blank=True, max_length=50)),
                ("preferred_language", models.CharField(blank=True, max_length=10)),
                ("preferred_time_of_day", models.CharField(blank=True, max_length=20)),
                ("avg_completion_time", models.FloatField(default=0)),
                (
                    "engagement_score",
                    models.FloatField(default=0, help_text="0-100 engagement score"),
                ),
                (
                    "likelihood_to_complete",
                    models.FloatField(
                        default=0.5, help_text="ML predicted completion probability"
                    ),
                ),
                (
                    "field_preferences",
                    models.JSONField(
                        default=dict,
                        help_text="Learned preferences for field types and interactions",
                    ),
                ),
                (
                    "common_values",
                    models.JSONField(
                        default=dict, help_text="Common field values for this user"
                    ),
                ),
                (
                    "segments",
                    models.JSONField(
                        default=list, help_text="User segments this profile belongs to"
                    ),
                ),
                ("first_seen_at", models.DateTimeField(auto_now_add=True)),
                ("last_seen_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "user_behavior_profiles",
                "indexes": [
                    models.Index(
                        fields=["user_identifier"],
                        name="user_behavi_user_id_a2538b_idx",
                    ),
                    models.Index(
                        fields=["engagement_score"],
                        name="user_behavi_engagem_3eb3c0_idx",
                    ),
                ],
            },
        ),
        migrations.CreateModel(
            name="VoiceFormConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "voice_engine",
                    models.CharField(
                        choices=[
                            ("whisper", "OpenAI Whisper"),
                            ("google", "Google Speech-to-Text"),
                            ("azure", "Azure Speech"),
                            ("aws", "AWS Transcribe"),
                        ],
                        default="whisper",
                        max_length=20,
                    ),
                ),
                ("primary_language", models.CharField(default="en-US", max_length=10)),
                (
                    "supported_languages",
                    models.JSONField(
                        default=list, help_text="Additional supported languages"
                    ),
                ),
                ("auto_detect_language", models.BooleanField(default=True)),
                (
                    "continuous_listening",
                    models.BooleanField(
                        default=False, help_text="Keep listening between fields"
                    ),
                ),
                (
                    "voice_commands_enabled",
                    models.BooleanField(
                        default=True, help_text="Enable next/back/submit commands"
                    ),
                ),
                (
                    "voice_feedback_enabled",
                    models.BooleanField(
                        default=True, help_text="Read back entered values"
                    ),
                ),
                ("tts_enabled", models.BooleanField(default=True)),
                ("tts_voice", models.CharField(default="alloy", max_length=50)),
                ("tts_speed", models.FloatField(default=1.0)),
                ("read_field_labels", models.BooleanField(default=True)),
                ("read_help_text", models.BooleanField(default=True)),
                ("read_validation_errors", models.BooleanField(default=True)),
                (
                    "smart_parsing",
                    models.BooleanField(
                        default=True, help_text="Use NLP to parse voice input"
                    ),
                ),
                (
                    "context_awareness",
                    models.BooleanField(
                        default=True, help_text="Use conversation context"
                    ),
                ),
                ("noise_cancellation", models.BooleanField(default=True)),
                (
                    "confidence_threshold",
                    models.FloatField(
                        default=0.75, help_text="Minimum confidence for acceptance"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="voice_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "voice_form_configs",
            },
        ),
        migrations.CreateModel(
            name="VoiceInteraction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                (
                    "interaction_type",
                    models.CharField(
                        choices=[
                            ("transcription", "Voice to Text"),
                            ("command", "Voice Command"),
                            ("tts", "Text to Speech"),
                            ("error", "Error"),
                        ],
                        max_length=20,
                    ),
                ),
                ("field_id", models.CharField(blank=True, max_length=100)),
                ("audio_duration_ms", models.IntegerField(default=0)),
                ("audio_url", models.URLField(blank=True)),
                ("transcribed_text", models.TextField(blank=True)),
                ("confidence_score", models.FloatField(default=0)),
                ("language_detected", models.CharField(blank=True, max_length=10)),
                (
                    "parsed_value",
                    models.JSONField(
                        blank=True, help_text="Extracted structured value", null=True
                    ),
                ),
                ("intent_detected", models.CharField(blank=True, max_length=50)),
                ("entities_extracted", models.JSONField(default=list)),
                ("accepted", models.BooleanField(default=False)),
                ("correction_needed", models.BooleanField(default=False)),
                ("final_value", models.JSONField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="voice_interactions",
                        to="forms.form",
                    ),
                ),
                (
                    "submission",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.submission",
                    ),
                ),
            ],
            options={
                "db_table": "voice_interactions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="WebhookDelivery",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("event_type", models.CharField(max_length=100)),
                ("event_id", models.CharField(max_length=100)),
                ("payload", models.JSONField()),
                ("attempt", models.IntegerField(default=1)),
                ("max_attempts", models.IntegerField(default=3)),
                ("request_url", models.URLField()),
                ("request_headers", models.JSONField(default=dict)),
                ("response_status", models.IntegerField(null=True)),
                ("response_headers", models.JSONField(default=dict)),
                ("response_body", models.TextField(blank=True)),
                ("response_time_ms", models.FloatField(null=True)),
                ("signature", models.CharField(blank=True, max_length=200)),
                (
                    "signature_header",
                    models.CharField(default="X-Signature-256", max_length=100),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("success", "Success"),
                            ("failed", "Failed"),
                            ("retrying", "Retrying"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("error_message", models.TextField(blank=True)),
                ("scheduled_at", models.DateTimeField()),
                ("delivered_at", models.DateTimeField(null=True)),
                ("next_retry_at", models.DateTimeField(null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "webhook_endpoint",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="deliveries",
                        to="forms.webhookendpoint",
                    ),
                ),
            ],
            options={
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="WebhookSigningKey",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("key_id", models.CharField(max_length=32, unique=True)),
                ("secret_hash", models.CharField(max_length=64)),
                (
                    "algorithm",
                    models.CharField(
                        choices=[
                            ("hmac-sha256", "HMAC-SHA256"),
                            ("hmac-sha512", "HMAC-SHA512"),
                            ("ed25519", "Ed25519"),
                        ],
                        default="hmac-sha256",
                        max_length=20,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("rotated_at", models.DateTimeField(null=True)),
                ("expires_at", models.DateTimeField(null=True)),
                (
                    "owner",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="webhook_signing_keys",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="WebhookTransformer",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "transform_type",
                    models.CharField(
                        choices=[
                            ("json_to_json", "JSON to JSON"),
                            ("json_to_xml", "JSON to XML"),
                            ("json_to_form", "JSON to Form Data"),
                            ("custom", "Custom Transformation"),
                        ],
                        default="json_to_json",
                        max_length=30,
                    ),
                ),
                (
                    "field_mappings",
                    models.JSONField(
                        default=dict,
                        help_text='\n        Field mapping configuration:\n        {\n            "target_field": "source_field",\n            "nested.field": "data.value",\n            "computed_field": {"type": "template", "template": "{{firstName}} {{lastName}}"}\n        }\n        ',
                    ),
                ),
                (
                    "template",
                    models.TextField(
                        blank=True,
                        help_text="Jinja2 template for complex transformations",
                    ),
                ),
                (
                    "pre_processors",
                    models.JSONField(
                        default=list, help_text="Functions to run before transformation"
                    ),
                ),
                (
                    "post_processors",
                    models.JSONField(
                        default=list, help_text="Functions to run after transformation"
                    ),
                ),
                (
                    "input_schema",
                    models.JSONField(
                        default=dict, help_text="JSON Schema for input validation"
                    ),
                ),
                (
                    "output_schema",
                    models.JSONField(
                        default=dict, help_text="JSON Schema for output validation"
                    ),
                ),
                ("usage_count", models.IntegerField(default=0)),
                ("error_count", models.IntegerField(default=0)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="webhook_transformers",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "db_table": "webhook_transformers",
            },
        ),
        migrations.CreateModel(
            name="LegacySystemBridge",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "bridge_type",
                    models.CharField(
                        choices=[
                            ("soap", "SOAP"),
                            ("xml_rpc", "XML-RPC"),
                            ("file_based", "File-Based (CSV, XML)"),
                            ("database", "Direct Database"),
                            ("ftp", "FTP/SFTP"),
                            ("custom", "Custom Protocol"),
                        ],
                        max_length=30,
                    ),
                ),
                ("endpoint", models.CharField(max_length=500)),
                ("credentials_encrypted", models.JSONField(default=dict)),
                ("wsdl_url", models.URLField(blank=True)),
                ("soap_action", models.CharField(blank=True, max_length=255)),
                ("file_format", models.CharField(blank=True, max_length=20)),
                ("file_encoding", models.CharField(default="utf-8", max_length=20)),
                ("delimiter", models.CharField(default=",", max_length=5)),
                ("database_type", models.CharField(blank=True, max_length=30)),
                ("connection_string_encrypted", models.TextField(blank=True)),
                ("ftp_directory", models.CharField(blank=True, max_length=500)),
                ("is_active", models.BooleanField(default=True)),
                ("last_used_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="legacy_bridges",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "request_transformer",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="request_bridges",
                        to="forms.webhooktransformer",
                    ),
                ),
                (
                    "response_transformer",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="response_bridges",
                        to="forms.webhooktransformer",
                    ),
                ),
            ],
            options={
                "db_table": "legacy_system_bridges",
            },
        ),
        migrations.CreateModel(
            name="WebhookTransformLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("input_payload", models.JSONField()),
                ("output_payload", models.JSONField(blank=True, null=True)),
                ("success", models.BooleanField(default=True)),
                ("error_message", models.TextField(blank=True)),
                ("duration_ms", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "transformer",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="logs",
                        to="forms.webhooktransformer",
                    ),
                ),
            ],
            options={
                "db_table": "webhook_transform_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="WorkspaceInvite",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("email", models.EmailField(max_length=254)),
                ("role", models.CharField(default="viewer", max_length=20)),
                ("invite_token", models.CharField(max_length=100, unique=True)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("accepted", "Accepted"),
                            ("declined", "Declined"),
                            ("expired", "Expired"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("expires_at", models.DateTimeField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("responded_at", models.DateTimeField(null=True)),
                (
                    "invited_by",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="workspace_invites_sent",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "workspace",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="pending_invites",
                        to="forms.teamworkspace",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="WorkspaceMember",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "role",
                    models.CharField(
                        choices=[
                            ("owner", "Owner"),
                            ("admin", "Admin"),
                            ("editor", "Editor"),
                            ("viewer", "Viewer"),
                        ],
                        default="viewer",
                        max_length=20,
                    ),
                ),
                ("can_create_forms", models.BooleanField(default=True)),
                ("can_delete_forms", models.BooleanField(default=False)),
                ("can_publish_forms", models.BooleanField(default=False)),
                ("can_view_submissions", models.BooleanField(default=True)),
                ("can_export_data", models.BooleanField(default=False)),
                ("can_manage_members", models.BooleanField(default=False)),
                ("can_manage_settings", models.BooleanField(default=False)),
                ("custom_permissions", models.JSONField(default=dict)),
                ("is_active", models.BooleanField(default=True)),
                ("invited_at", models.DateTimeField(auto_now_add=True)),
                ("joined_at", models.DateTimeField(null=True)),
                (
                    "invited_by",
                    models.ForeignKey(
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="sent_workspace_invites",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="workspace_memberships",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "workspace",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="members",
                        to="forms.teamworkspace",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="ZeroKnowledgeEncryption",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "encryption_scheme",
                    models.CharField(
                        choices=[
                            ("aes256_gcm", "AES-256-GCM"),
                            ("chacha20_poly1305", "ChaCha20-Poly1305"),
                            ("xchacha20_poly1305", "XChaCha20-Poly1305"),
                        ],
                        default="aes256_gcm",
                        max_length=30,
                    ),
                ),
                (
                    "key_derivation",
                    models.CharField(
                        choices=[
                            ("pbkdf2", "PBKDF2"),
                            ("argon2id", "Argon2id"),
                            ("scrypt", "Scrypt"),
                        ],
                        default="argon2id",
                        max_length=30,
                    ),
                ),
                ("client_side_encryption", models.BooleanField(default=True)),
                (
                    "key_stored_locally",
                    models.BooleanField(
                        default=True, help_text="Key stored only on client"
                    ),
                ),
                (
                    "encrypted_fields",
                    models.JSONField(
                        default=list, help_text="List of field IDs requiring encryption"
                    ),
                ),
                ("key_rotation_days", models.IntegerField(default=90)),
                ("last_key_rotation", models.DateTimeField(blank=True, null=True)),
                ("recovery_enabled", models.BooleanField(default=False)),
                (
                    "recovery_shares",
                    models.IntegerField(
                        default=3, help_text="Shamir secret sharing shares"
                    ),
                ),
                (
                    "recovery_threshold",
                    models.IntegerField(
                        default=2, help_text="Shares needed for recovery"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "form",
                    models.OneToOneField(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="zk_encryption_config",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "zk_encryption_configs",
            },
        ),
        migrations.CreateModel(
            name="EncryptionKey",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "key_type",
                    models.CharField(
                        choices=[
                            ("form_key", "Form Encryption Key"),
                            ("field_key", "Field-Specific Key"),
                            ("recovery_share", "Recovery Share"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "key_id",
                    models.CharField(
                        help_text="Public key identifier", max_length=100, unique=True
                    ),
                ),
                ("salt", models.BinaryField(help_text="Salt used in key derivation")),
                ("iterations", models.IntegerField(default=100000)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("revoked_at", models.DateTimeField(blank=True, null=True)),
                (
                    "zk_config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="key_metadata",
                        to="forms.zeroknowledgeencryption",
                    ),
                ),
            ],
            options={
                "db_table": "encryption_keys",
            },
        ),
        migrations.CreateModel(
            name="AILayoutSuggestion",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "suggestion_type",
                    models.CharField(
                        choices=[
                            ("field_order", "Field Ordering"),
                            ("field_grouping", "Field Grouping"),
                            ("remove_field", "Remove Field"),
                            ("add_field", "Add Field"),
                            ("field_size", "Field Size Change"),
                            ("visual_hierarchy", "Visual Hierarchy"),
                            ("mobile_optimization", "Mobile Optimization"),
                        ],
                        max_length=30,
                    ),
                ),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("critical", "Critical"),
                            ("high", "High"),
                            ("medium", "Medium"),
                            ("low", "Low"),
                        ],
                        default="medium",
                        max_length=20,
                    ),
                ),
                (
                    "field_ids",
                    models.JSONField(
                        default=list, help_text="Fields affected by this suggestion"
                    ),
                ),
                ("title", models.CharField(max_length=255)),
                ("description", models.TextField()),
                (
                    "rationale",
                    models.TextField(help_text="AI reasoning for this suggestion"),
                ),
                (
                    "predicted_conversion_lift",
                    models.FloatField(
                        default=0, help_text="Predicted conversion improvement %"
                    ),
                ),
                (
                    "predicted_completion_lift",
                    models.FloatField(
                        default=0, help_text="Predicted completion improvement %"
                    ),
                ),
                (
                    "confidence_score",
                    models.FloatField(default=0, help_text="AI confidence 0-1"),
                ),
                (
                    "current_schema",
                    models.JSONField(
                        default=dict, help_text="Current field arrangement"
                    ),
                ),
                (
                    "suggested_schema",
                    models.JSONField(
                        default=dict, help_text="Suggested new arrangement"
                    ),
                ),
                (
                    "heatmap_data",
                    models.JSONField(
                        default=dict,
                        help_text="Heatmap analysis that led to this suggestion",
                    ),
                ),
                (
                    "interaction_patterns",
                    models.JSONField(
                        default=dict, help_text="User interaction patterns analyzed"
                    ),
                ),
                ("is_applied", models.BooleanField(default=False)),
                ("applied_at", models.DateTimeField(blank=True, null=True)),
                ("ab_test_running", models.BooleanField(default=False)),
                ("ab_test_id", models.UUIDField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "applied_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="ai_layout_suggestions",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "ai_layout_suggestions",
                "ordering": ["-created_at"],
                "indexes": [
                    models.Index(
                        fields=["form", "is_applied"],
                        name="ai_layout_s_form_id_e0bb39_idx",
                    ),
                    models.Index(
                        fields=["form", "priority"],
                        name="ai_layout_s_form_id_af04ff_idx",
                    ),
                ],
            },
        ),
        migrations.CreateModel(
            name="AuditLogEntry",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "action",
                    models.CharField(
                        choices=[
                            ("create", "Create"),
                            ("read", "Read"),
                            ("update", "Update"),
                            ("delete", "Delete"),
                            ("export", "Export"),
                            ("access", "Access"),
                            ("share", "Share"),
                            ("consent", "Consent Change"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "resource_type",
                    models.CharField(
                        help_text="submission, form, field, etc.", max_length=50
                    ),
                ),
                ("resource_id", models.CharField(max_length=100)),
                ("actor_email", models.EmailField(blank=True, max_length=254)),
                ("actor_ip", models.GenericIPAddressField(blank=True, null=True)),
                ("actor_user_agent", models.TextField(blank=True)),
                ("previous_value", models.JSONField(blank=True, null=True)),
                ("new_value", models.JSONField(blank=True, null=True)),
                (
                    "changes",
                    models.JSONField(default=dict, help_text="Diff of changes"),
                ),
                ("reason", models.TextField(blank=True)),
                ("metadata", models.JSONField(default=dict)),
                ("entry_hash", models.CharField(max_length=64, unique=True)),
                ("previous_entry_hash", models.CharField(blank=True, max_length=64)),
                ("is_verified", models.BooleanField(default=True)),
                ("verification_failed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "actor_user",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "form",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="audit_log_entries",
                        to="forms.form",
                    ),
                ),
            ],
            options={
                "db_table": "audit_log_entries",
                "ordering": ["-created_at"],
                "indexes": [
                    models.Index(
                        fields=["form", "-created_at"],
                        name="audit_log_e_form_id_623960_idx",
                    ),
                    models.Index(
                        fields=["resource_type", "resource_id"],
                        name="audit_log_e_resourc_30a433_idx",
                    ),
                    models.Index(
                        fields=["actor_user"], name="audit_log_e_actor_u_871545_idx"
                    ),
                    models.Index(
                        fields=["entry_hash"], name="audit_log_e_entry_h_ad9da8_idx"
                    ),
                ],
            },
        ),
        migrations.CreateModel(
            name="BlockchainAuditEntry",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "entry_type",
                    models.CharField(
                        choices=[
                            ("submission_created", "Submission Created"),
                            ("submission_updated", "Submission Updated"),
                            ("submission_deleted", "Submission Deleted"),
                            ("data_accessed", "Data Accessed"),
                            ("form_published", "Form Published"),
                            ("consent_granted", "Consent Granted"),
                            ("consent_revoked", "Consent Revoked"),
                        ],
                        max_length=30,
                    ),
                ),
                (
                    "data_hash",
                    models.CharField(help_text="SHA-256 hash of data", max_length=100),
                ),
                (
                    "metadata",
                    models.JSONField(default=dict, help_text="Non-sensitive metadata"),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("confirmed", "Confirmed"),
                            ("failed", "Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("transaction_hash", models.CharField(blank=True, max_length=100)),
                ("block_number", models.BigIntegerField(blank=True, null=True)),
                ("gas_used", models.BigIntegerField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("confirmed_at", models.DateTimeField(blank=True, null=True)),
                (
                    "form",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to="forms.form",
                    ),
                ),
                (
                    "submission",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to="forms.submission",
                    ),
                ),
                (
                    "config",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="entries",
                        to="forms.blockchainconfig",
                    ),
                ),
            ],
            options={
                "db_table": "blockchain_audit_entries",
                "ordering": ["-created_at"],
                "indexes": [
                    models.Index(
                        fields=["data_hash"], name="blockchain__data_ha_a19426_idx"
                    ),
                    models.Index(
                        fields=["transaction_hash"],
                        name="blockchain__transac_d5e9a7_idx",
                    ),
                ],
            },
        ),
        migrations.AddIndex(
            model_name="conversationsession",
            index=models.Index(
                fields=["form", "status"], name="conversatio_form_id_ed236f_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="conversationsession",
            index=models.Index(
                fields=["session_id"], name="conversatio_session_376463_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="apiusagelog",
            index=models.Index(
                fields=["api_key", "created_at"], name="forms_apius_api_key_2ae28e_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="apiusagelog",
            index=models.Index(
                fields=["endpoint", "created_at"], name="forms_apius_endpoin_bbfa0a_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="formversiondiff",
            unique_together={("version_a", "version_b")},
        ),
        migrations.AddIndex(
            model_name="graphqlquerylog",
            index=models.Index(
                fields=["query_hash"], name="graphql_que_query_h_3a5fc3_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="marketplaceinstallation",
            unique_together={("integration", "user")},
        ),
        migrations.AlterUniqueTogether(
            name="marketplacereview",
            unique_together={("integration", "user")},
        ),
        migrations.AlterUniqueTogether(
            name="mobilepaymentconfig",
            unique_together={("form", "provider")},
        ),
        migrations.AlterUniqueTogether(
            name="notificationanalytics",
            unique_together={("form", "date")},
        ),
        migrations.AlterUniqueTogether(
            name="pipelinestage",
            unique_together={("pipeline", "order")},
        ),
        migrations.AlterUniqueTogether(
            name="pluginversion",
            unique_together={("plugin", "version")},
        ),
        migrations.AddIndex(
            model_name="ratelimitevent",
            index=models.Index(
                fields=["identifier"], name="rate_limit__identif_3462d2_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="ratelimitevent",
            index=models.Index(
                fields=["exceeded", "-created_at"],
                name="rate_limit__exceede_c14657_idx",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="regionhealth",
            unique_together={("config", "region")},
        ),
        migrations.AddIndex(
            model_name="schedulednotification",
            index=models.Index(
                fields=["status", "scheduled_for"], name="scheduled_n_status_d18843_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="syncqueue",
            index=models.Index(
                fields=["device_id", "status"], name="sync_queue_device__007465_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="teammembercapacity",
            unique_together={("user", "form")},
        ),
        migrations.AlterUniqueTogether(
            name="plugininstallation",
            unique_together={("plugin", "user"), ("plugin", "workspace")},
        ),
        migrations.AlterUniqueTogether(
            name="themepurchase",
            unique_together={("theme", "user")},
        ),
        migrations.AlterUniqueTogether(
            name="themereview",
            unique_together={("theme", "user")},
        ),
        migrations.AddIndex(
            model_name="threatevent",
            index=models.Index(
                fields=["form", "threat_type"], name="threat_even_form_id_ad1fd8_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="threatevent",
            index=models.Index(
                fields=["ip_address"], name="threat_even_ip_addr_852a17_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="threatevent",
            index=models.Index(
                fields=["severity", "-created_at"],
                name="threat_even_severit_64d77a_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="ipblocklist",
            index=models.Index(
                fields=["ip_address"], name="ip_blocklis_ip_addr_5a0864_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="voiceinteraction",
            index=models.Index(
                fields=["form", "session_id"], name="voice_inter_form_id_a2bad6_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="workspacemember",
            unique_together={("workspace", "user")},
        ),
    ]
