# Generated by Django 5.2.7 on 2025-12-11 03:05

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("forms", "0007_advanced_features"),
        ("users", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name="ActivityLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "action",
                    models.CharField(
                        help_text="Human-readable action description", max_length=200
                    ),
                ),
                ("action_type", models.CharField(max_length=50)),
                (
                    "details",
                    models.JSONField(
                        default=dict, help_text="Additional action context"
                    ),
                ),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "activity_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AutoFillTemplate",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "field_mappings",
                    models.JSONField(
                        default=dict, help_text="Map of field IDs to auto-fill values"
                    ),
                ),
                (
                    "is_global",
                    models.BooleanField(
                        default=False, help_text="Available across all forms"
                    ),
                ),
                ("usage_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "autofill_templates",
            },
        ),
        migrations.CreateModel(
            name="BrandGuideline",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "required_colors",
                    models.JSONField(
                        default=list,
                        help_text="List of required brand colors with hex codes",
                    ),
                ),
                ("forbidden_colors", models.JSONField(blank=True, default=list)),
                ("required_fonts", models.JSONField(default=list)),
                ("forbidden_fonts", models.JSONField(blank=True, default=list)),
                ("logo_url", models.URLField(blank=True)),
                ("logo_placement_rules", models.JSONField(blank=True, default=dict)),
                (
                    "min_contrast_ratio",
                    models.DecimalField(
                        decimal_places=2,
                        default=4.5,
                        help_text="WCAG AA compliance",
                        max_digits=4,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "brand_guidelines",
            },
        ),
        migrations.CreateModel(
            name="CompletionPrediction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(db_index=True, max_length=100)),
                ("current_field_index", models.IntegerField()),
                ("total_fields", models.IntegerField()),
                ("required_fields_completed", models.IntegerField()),
                ("required_fields_total", models.IntegerField()),
                (
                    "predicted_completion_percent",
                    models.IntegerField(help_text="AI-predicted completion percentage"),
                ),
                (
                    "estimated_time_remaining",
                    models.IntegerField(help_text="Estimated seconds to completion"),
                ),
                (
                    "confidence_score",
                    models.DecimalField(decimal_places=2, max_digits=4),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "completion_predictions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ConflictResolution",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "conflicting_changes",
                    models.JSONField(
                        default=list, help_text="List of conflicting FormChange IDs"
                    ),
                ),
                (
                    "resolution_strategy",
                    models.CharField(
                        choices=[
                            ("last_write_wins", "Last Write Wins"),
                            ("manual", "Manual Resolution"),
                            ("merge", "Automatic Merge"),
                        ],
                        max_length=50,
                    ),
                ),
                ("final_value", models.JSONField(help_text="Final resolved value")),
                ("metadata", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "conflict_resolutions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ConsentTracking",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "consent_type",
                    models.CharField(
                        choices=[
                            ("data_processing", "Data Processing"),
                            ("marketing", "Marketing Communications"),
                            ("third_party_sharing", "Third-party Sharing"),
                            ("analytics", "Analytics"),
                        ],
                        max_length=50,
                    ),
                ),
                ("granted", models.BooleanField()),
                (
                    "consent_text",
                    models.TextField(help_text="Exact consent text shown to user"),
                ),
                ("ip_address", models.GenericIPAddressField()),
                ("user_agent", models.TextField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("revoked_at", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "consent_tracking",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="DataPrivacyRequest",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("requester_email", models.EmailField(max_length=254)),
                (
                    "request_type",
                    models.CharField(
                        choices=[
                            ("export", "Data Export"),
                            ("deletion", "Data Deletion"),
                            ("rectification", "Data Rectification"),
                            ("portability", "Data Portability"),
                            ("restriction", "Processing Restriction"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("in_progress", "In Progress"),
                            ("completed", "Completed"),
                            ("rejected", "Rejected"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("verification_token", models.CharField(max_length=100, unique=True)),
                ("verified_at", models.DateTimeField(blank=True, null=True)),
                ("reason", models.TextField(blank=True)),
                (
                    "data_scope",
                    models.JSONField(
                        default=dict,
                        help_text="Specific data requested (forms, submissions, etc.)",
                    ),
                ),
                ("processed_at", models.DateTimeField(blank=True, null=True)),
                ("notes", models.TextField(blank=True)),
                ("export_file_url", models.URLField(blank=True)),
                ("export_expires_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "data_privacy_requests",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="EncryptedSubmission",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "encrypted_data",
                    models.BinaryField(help_text="AES-256 encrypted submission data"),
                ),
                (
                    "encryption_key_id",
                    models.CharField(
                        help_text="Key ID for key rotation", max_length=100
                    ),
                ),
                (
                    "encryption_algorithm",
                    models.CharField(default="AES-256-GCM", max_length=50),
                ),
                ("iv", models.BinaryField(help_text="Initialization vector")),
                (
                    "auth_tag",
                    models.BinaryField(
                        blank=True, help_text="Authentication tag for GCM", null=True
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "encrypted_submissions",
            },
        ),
        migrations.CreateModel(
            name="FieldPrediction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("field_type", models.CharField(max_length=50)),
                (
                    "prediction_rule",
                    models.JSONField(
                        default=dict,
                        help_text="Rule for prediction (e.g., ZIP -> City mapping)",
                    ),
                ),
                (
                    "ml_model_id",
                    models.CharField(
                        blank=True,
                        help_text="ML model identifier if used",
                        max_length=100,
                    ),
                ),
                (
                    "confidence_threshold",
                    models.DecimalField(
                        decimal_places=2,
                        default=0.7,
                        help_text="Minimum confidence to show prediction",
                        max_digits=4,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                (
                    "accuracy_rate",
                    models.DecimalField(
                        decimal_places=2,
                        default=0.0,
                        help_text="Historical accuracy percentage",
                        max_digits=5,
                    ),
                ),
                ("usage_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "field_predictions",
            },
        ),
        migrations.CreateModel(
            name="FormChange",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "change_type",
                    models.CharField(
                        choices=[
                            ("field_added", "Field Added"),
                            ("field_updated", "Field Updated"),
                            ("field_deleted", "Field Deleted"),
                            ("field_reordered", "Field Reordered"),
                            ("logic_added", "Logic Added"),
                            ("logic_updated", "Logic Updated"),
                            ("logic_deleted", "Logic Deleted"),
                            ("settings_updated", "Settings Updated"),
                            ("title_updated", "Title Updated"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "field_id",
                    models.CharField(
                        blank=True, help_text="ID of affected field", max_length=100
                    ),
                ),
                ("previous_value", models.JSONField(blank=True, null=True)),
                ("new_value", models.JSONField(blank=True, null=True)),
                (
                    "change_path",
                    models.CharField(
                        blank=True,
                        help_text="JSON path to changed property (e.g., 'fields.0.label')",
                        max_length=500,
                    ),
                ),
                (
                    "is_synced",
                    models.BooleanField(
                        default=False, help_text="Synced to other clients"
                    ),
                ),
                ("conflict_resolved", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_changes",
                "ordering": ["created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormEditSession",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "session_id",
                    models.CharField(
                        help_text="WebSocket session ID", max_length=100, unique=True
                    ),
                ),
                (
                    "cursor_position",
                    models.JSONField(
                        default=dict,
                        help_text="Current cursor/selection position in form editor",
                    ),
                ),
                (
                    "active_field",
                    models.CharField(
                        blank=True,
                        help_text="Field currently being edited",
                        max_length=100,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("last_activity_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_edit_sessions",
            },
        ),
        migrations.CreateModel(
            name="FormLifecycleEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("created", "Created"),
                            ("published", "Published"),
                            ("activated", "Activated"),
                            ("paused", "Paused"),
                            ("expired", "Expired"),
                            ("archived", "Archived"),
                            ("cloned", "Cloned"),
                            ("deleted", "Deleted"),
                            ("submission_limit_reached", "Submission Limit Reached"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "automated",
                    models.BooleanField(
                        default=False, help_text="Whether event was automated"
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        default=dict, help_text="Additional event context"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_lifecycle_events",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormNotification",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "notification_type",
                    models.CharField(
                        choices=[
                            ("form_reminder", "Form Reminder"),
                            ("form_updated", "Form Updated"),
                            ("submission_received", "Submission Received"),
                            ("deadline_approaching", "Deadline Approaching"),
                            ("custom", "Custom"),
                        ],
                        max_length=50,
                    ),
                ),
                ("title", models.CharField(max_length=200)),
                ("body", models.TextField()),
                (
                    "data",
                    models.JSONField(
                        default=dict, help_text="Additional notification data"
                    ),
                ),
                ("icon_url", models.URLField(blank=True)),
                ("action_url", models.URLField(blank=True)),
                ("sent_at", models.DateTimeField(blank=True, null=True)),
                ("delivered_at", models.DateTimeField(blank=True, null=True)),
                ("clicked_at", models.DateTimeField(blank=True, null=True)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_notifications",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormReview",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "decision",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("approved", "Approved"),
                            ("changes_requested", "Changes Requested"),
                            ("rejected", "Rejected"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("feedback", models.TextField(blank=True)),
                (
                    "change_requests",
                    models.JSONField(
                        default=list, help_text="Specific changes requested by reviewer"
                    ),
                ),
                ("reviewed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_reviews",
            },
        ),
        migrations.CreateModel(
            name="FormReviewWorkflow",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("draft", "Draft"),
                            ("in_review", "In Review"),
                            ("changes_requested", "Changes Requested"),
                            ("approved", "Approved"),
                            ("rejected", "Rejected"),
                        ],
                        default="draft",
                        max_length=20,
                    ),
                ),
                ("submitted_at", models.DateTimeField(blank=True, null=True)),
                ("required_approvals", models.IntegerField(default=1)),
                ("current_approvals", models.IntegerField(default=0)),
                ("auto_publish_on_approval", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_review_workflows",
            },
        ),
        migrations.CreateModel(
            name="FormTheme",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("color_overrides", models.JSONField(blank=True, default=dict)),
                ("typography_overrides", models.JSONField(blank=True, default=dict)),
                ("layout_overrides", models.JSONField(blank=True, default=dict)),
                (
                    "mobile_overrides",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Mobile-specific theme adjustments",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_themes",
            },
        ),
        migrations.CreateModel(
            name="GeolocationField",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("latitude", models.DecimalField(decimal_places=7, max_digits=10)),
                ("longitude", models.DecimalField(decimal_places=7, max_digits=10)),
                ("accuracy", models.FloatField(help_text="Accuracy in meters")),
                ("altitude", models.FloatField(blank=True, null=True)),
                (
                    "address",
                    models.JSONField(
                        blank=True, default=dict, help_text="Reverse geocoded address"
                    ),
                ),
                ("timestamp", models.DateTimeField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "geolocation_fields",
            },
        ),
        migrations.CreateModel(
            name="IntegrationConnection",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="User-friendly name for this connection",
                        max_length=200,
                    ),
                ),
                (
                    "credentials",
                    models.JSONField(
                        default=dict,
                        help_text="Encrypted auth tokens, API keys, or OAuth tokens",
                    ),
                ),
                (
                    "oauth_data",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="OAuth tokens, refresh tokens, expiry",
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("last_sync_at", models.DateTimeField(blank=True, null=True)),
                ("error_count", models.IntegerField(default=0)),
                ("last_error", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "integration_connections",
            },
        ),
        migrations.CreateModel(
            name="IntegrationTemplate",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField()),
                (
                    "use_case",
                    models.CharField(
                        help_text="e.g., 'Sync leads to Google Sheets'", max_length=200
                    ),
                ),
                ("icon", models.CharField(blank=True, max_length=50)),
                (
                    "config_template",
                    models.JSONField(
                        default=dict,
                        help_text="Pre-configured workflow or webhook settings",
                    ),
                ),
                (
                    "required_fields",
                    models.JSONField(
                        default=list, help_text="List of fields user must configure"
                    ),
                ),
                ("is_featured", models.BooleanField(default=False)),
                ("usage_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "integration_templates",
                "ordering": ["-is_featured", "-usage_count"],
            },
        ),
        migrations.CreateModel(
            name="IntegrationWorkflow",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "trigger_type",
                    models.CharField(
                        choices=[
                            ("form_submit", "New Form Submission"),
                            ("form_complete", "Form Completed"),
                            ("field_value", "Specific Field Value"),
                            ("schedule", "Scheduled"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "trigger_config",
                    models.JSONField(
                        default=dict, help_text="Trigger conditions and filters"
                    ),
                ),
                (
                    "actions",
                    models.JSONField(
                        default=list,
                        help_text="List of actions to execute (e.g., create CRM contact, send email)",
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("execution_count", models.IntegerField(default=0)),
                ("success_count", models.IntegerField(default=0)),
                ("failure_count", models.IntegerField(default=0)),
                ("last_executed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "integration_workflows",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="IPAccessControl",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "access_type",
                    models.CharField(
                        choices=[
                            ("whitelist", "Whitelist"),
                            ("blacklist", "Blacklist"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "ip_ranges",
                    models.JSONField(
                        default=list, help_text="List of IP addresses or CIDR ranges"
                    ),
                ),
                (
                    "countries",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Country codes (ISO 3166-1 alpha-2)",
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "ip_access_controls",
            },
        ),
        migrations.CreateModel(
            name="MobileAnalytics",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("device_type", models.CharField(max_length=50)),
                ("os", models.CharField(max_length=50)),
                ("os_version", models.CharField(max_length=50)),
                ("browser", models.CharField(max_length=50)),
                ("screen_resolution", models.CharField(max_length=50)),
                ("touch_interactions", models.IntegerField(default=0)),
                ("swipe_actions", models.IntegerField(default=0)),
                ("camera_uses", models.IntegerField(default=0)),
                ("geolocation_uses", models.IntegerField(default=0)),
                (
                    "load_time_ms",
                    models.IntegerField(help_text="Form load time in milliseconds"),
                ),
                (
                    "completion_time_s",
                    models.IntegerField(help_text="Time to complete in seconds"),
                ),
                (
                    "offline_duration_s",
                    models.IntegerField(
                        default=0, help_text="Time spent in offline mode"
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                ("submitted", models.BooleanField(default=False)),
                ("abandoned", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "mobile_analytics",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="OfflineSubmission",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "device_id",
                    models.CharField(
                        help_text="Unique device identifier", max_length=200
                    ),
                ),
                (
                    "submission_data",
                    models.JSONField(help_text="Complete submission data"),
                ),
                (
                    "files_metadata",
                    models.JSONField(
                        default=list,
                        help_text="Metadata for attached files (uploaded separately)",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Sync"),
                            ("syncing", "Syncing"),
                            ("synced", "Synced"),
                            ("failed", "Sync Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("sync_attempts", models.IntegerField(default=0)),
                ("last_sync_attempt", models.DateTimeField(blank=True, null=True)),
                ("sync_error", models.TextField(blank=True)),
                (
                    "synced_submission_id",
                    models.UUIDField(
                        blank=True, help_text="ID of synced submission", null=True
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        help_text="When offline submission was created"
                    ),
                ),
                ("synced_at", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "offline_submissions",
                "ordering": ["created_at"],
            },
        ),
        migrations.CreateModel(
            name="PredictionFeedback",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("predicted_value", models.JSONField()),
                ("actual_value", models.JSONField()),
                (
                    "was_accepted",
                    models.BooleanField(help_text="Did user accept the prediction?"),
                ),
                (
                    "confidence_score",
                    models.DecimalField(decimal_places=2, max_digits=4),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "prediction_feedback",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ProgressiveDisclosure",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "disclosure_strategy",
                    models.CharField(
                        choices=[
                            ("basic_first", "Basic Fields First"),
                            ("conditional", "Conditional Disclosure"),
                            ("ai_adaptive", "AI Adaptive"),
                        ],
                        default="basic_first",
                        max_length=50,
                    ),
                ),
                (
                    "basic_fields",
                    models.JSONField(
                        default=list, help_text="List of field IDs shown initially"
                    ),
                ),
                (
                    "advanced_fields",
                    models.JSONField(
                        default=list, help_text="List of field IDs shown after basics"
                    ),
                ),
                (
                    "disclosure_rules",
                    models.JSONField(
                        default=dict, help_text="Conditions for revealing fields"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "progressive_disclosures",
            },
        ),
        migrations.CreateModel(
            name="PushNotificationSubscription",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("device_id", models.CharField(max_length=200, unique=True)),
                ("endpoint", models.URLField(help_text="Push service endpoint")),
                ("auth_key", models.CharField(max_length=500)),
                ("p256dh_key", models.CharField(max_length=500)),
                (
                    "device_type",
                    models.CharField(
                        choices=[
                            ("android", "Android"),
                            ("ios", "iOS"),
                            ("web", "Web"),
                        ],
                        default="web",
                        max_length=20,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "push_notification_subscriptions",
            },
        ),
        migrations.CreateModel(
            name="QRCodeScan",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("scanned_data", models.TextField(help_text="Data from QR code")),
                (
                    "field_id",
                    models.CharField(
                        help_text="Field where QR data was used", max_length=100
                    ),
                ),
                ("device_type", models.CharField(max_length=50)),
                ("success", models.BooleanField(default=True)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "qr_code_scans",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="RecurringForm",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "frequency",
                    models.CharField(
                        choices=[
                            ("daily", "Daily"),
                            ("weekly", "Weekly"),
                            ("monthly", "Monthly"),
                            ("quarterly", "Quarterly"),
                            ("yearly", "Yearly"),
                            ("custom", "Custom"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "interval",
                    models.IntegerField(
                        default=1, help_text="Every X days/weeks/months"
                    ),
                ),
                ("start_date", models.DateTimeField()),
                (
                    "end_date",
                    models.DateTimeField(
                        blank=True, help_text="When to stop creating forms", null=True
                    ),
                ),
                (
                    "day_of_week",
                    models.IntegerField(
                        blank=True,
                        help_text="For weekly: 0=Monday, 6=Sunday",
                        null=True,
                    ),
                ),
                (
                    "day_of_month",
                    models.IntegerField(
                        blank=True, help_text="For monthly: 1-31", null=True
                    ),
                ),
                ("timezone", models.CharField(default="UTC", max_length=100)),
                (
                    "auto_publish",
                    models.BooleanField(
                        default=True, help_text="Auto-publish cloned forms"
                    ),
                ),
                (
                    "naming_pattern",
                    models.CharField(
                        default="{title} - {date}",
                        help_text="Pattern for naming cloned forms",
                        max_length=200,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("last_created_at", models.DateTimeField(blank=True, null=True)),
                ("next_creation_at", models.DateTimeField()),
                ("forms_created_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "recurring_forms",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="SecurityAuditLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("login", "User Login"),
                            ("logout", "User Logout"),
                            ("login_failed", "Failed Login"),
                            ("2fa_enabled", "2FA Enabled"),
                            ("2fa_disabled", "2FA Disabled"),
                            ("password_changed", "Password Changed"),
                            ("data_accessed", "Data Accessed"),
                            ("data_exported", "Data Exported"),
                            ("data_deleted", "Data Deleted"),
                            ("permission_changed", "Permission Changed"),
                            ("suspicious_activity", "Suspicious Activity"),
                        ],
                        max_length=50,
                    ),
                ),
                ("ip_address", models.GenericIPAddressField()),
                ("user_agent", models.TextField()),
                (
                    "location",
                    models.JSONField(
                        blank=True, default=dict, help_text="Geolocation data"
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        default=dict, help_text="Additional event context"
                    ),
                ),
                (
                    "risk_level",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                        ],
                        default="low",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "security_audit_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="SecurityScan",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("scan_completed", models.BooleanField(default=False)),
                ("is_malicious", models.BooleanField(default=False)),
                (
                    "threats_detected",
                    models.JSONField(
                        default=list,
                        help_text="List of detected threats (SQL injection, XSS, etc.)",
                    ),
                ),
                (
                    "risk_score",
                    models.IntegerField(default=0, help_text="0-100 risk score"),
                ),
                ("blocked", models.BooleanField(default=False)),
                ("scan_details", models.JSONField(default=dict)),
                ("scanned_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "security_scans",
            },
        ),
        migrations.CreateModel(
            name="SmartDefault",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                (
                    "source_type",
                    models.CharField(
                        choices=[
                            ("url_param", "URL Parameter"),
                            ("user_profile", "User Profile"),
                            ("cookie", "Cookie"),
                            ("local_storage", "Local Storage"),
                            ("geolocation", "Geolocation"),
                            ("previous_submission", "Previous Submission"),
                            ("calculation", "Calculation"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "source_config",
                    models.JSONField(
                        default=dict,
                        help_text="Configuration for the source (e.g., URL param name, profile field)",
                    ),
                ),
                (
                    "transformation",
                    models.JSONField(
                        blank=True, default=dict, help_text="Data transformation rules"
                    ),
                ),
                ("fallback_value", models.JSONField(blank=True, null=True)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "smart_defaults",
            },
        ),
        migrations.CreateModel(
            name="SSOProvider",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=100)),
                (
                    "provider_type",
                    models.CharField(
                        choices=[
                            ("google", "Google"),
                            ("microsoft", "Microsoft"),
                            ("saml", "SAML"),
                            ("okta", "Okta"),
                            ("auth0", "Auth0"),
                        ],
                        max_length=50,
                    ),
                ),
                ("client_id", models.CharField(max_length=200)),
                (
                    "client_secret",
                    models.CharField(help_text="Encrypted", max_length=500),
                ),
                ("entity_id", models.CharField(blank=True, max_length=500)),
                ("sso_url", models.URLField(blank=True)),
                ("x509_cert", models.TextField(blank=True)),
                (
                    "domain_restriction",
                    models.JSONField(
                        default=list,
                        help_text="Allowed email domains (e.g., ['company.com'])",
                    ),
                ),
                (
                    "auto_provision",
                    models.BooleanField(
                        default=True, help_text="Auto-create users on first login"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "sso_providers",
            },
        ),
        migrations.CreateModel(
            name="SubmissionTranslation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "translated_data",
                    models.JSONField(
                        default=dict,
                        help_text="Submission data with translated field names",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "submission_translations",
            },
        ),
        migrations.CreateModel(
            name="ThemeRating",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "rating",
                    models.IntegerField(
                        choices=[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]
                    ),
                ),
                ("review", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "theme_ratings",
            },
        ),
        migrations.CreateModel(
            name="UserSubmissionHistory",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "user_identifier",
                    models.CharField(
                        db_index=True,
                        help_text="Email, user ID, or anonymous identifier",
                        max_length=200,
                    ),
                ),
                (
                    "field_values",
                    models.JSONField(default=dict, help_text="Historical field values"),
                ),
                (
                    "completion_time",
                    models.IntegerField(help_text="Time to complete in seconds"),
                ),
                ("device_type", models.CharField(blank=True, max_length=50)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "user_submission_histories",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="WebhookEndpoint",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("url", models.URLField()),
                (
                    "method",
                    models.CharField(
                        choices=[("POST", "POST"), ("PUT", "PUT"), ("PATCH", "PATCH")],
                        default="POST",
                        max_length=10,
                    ),
                ),
                (
                    "headers",
                    models.JSONField(default=dict, help_text="Custom HTTP headers"),
                ),
                (
                    "payload_template",
                    models.TextField(
                        blank=True,
                        help_text="Custom payload template (uses Jinja2 syntax)",
                    ),
                ),
                (
                    "events",
                    models.JSONField(
                        default=list,
                        help_text="Events that trigger this webhook (e.g., ['submission.created', 'submission.updated'])",
                    ),
                ),
                (
                    "retry_count",
                    models.IntegerField(
                        default=3, help_text="Number of retry attempts on failure"
                    ),
                ),
                (
                    "retry_delay",
                    models.IntegerField(
                        default=60, help_text="Delay between retries in seconds"
                    ),
                ),
                (
                    "timeout",
                    models.IntegerField(
                        default=30, help_text="Request timeout in seconds"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("success_count", models.IntegerField(default=0)),
                ("failure_count", models.IntegerField(default=0)),
                ("last_triggered_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "webhook_endpoints",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="WebhookLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("event", models.CharField(max_length=100)),
                ("status_code", models.IntegerField(null=True)),
                ("request_payload", models.JSONField(default=dict)),
                ("response_body", models.TextField(blank=True)),
                ("error_message", models.TextField(blank=True)),
                (
                    "duration_ms",
                    models.IntegerField(
                        help_text="Request duration in milliseconds", null=True
                    ),
                ),
                ("retry_attempt", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "webhook_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.AlterModelOptions(
            name="formcomment",
            options={"ordering": ["created_at"]},
        ),
        migrations.AlterModelOptions(
            name="integrationprovider",
            options={"ordering": ["-popularity_score", "name"]},
        ),
        migrations.AlterModelOptions(
            name="theme",
            options={"ordering": ["-created_at"]},
        ),
        migrations.RemoveConstraint(
            model_name="formstep",
            name="unique_form_step",
        ),
        migrations.RemoveConstraint(
            model_name="teammember",
            name="unique_team_member",
        ),
        migrations.RemoveIndex(
            model_name="formtranslation",
            name="form_trans_idx",
        ),
        migrations.RenameField(
            model_name="formcomment",
            old_name="resolved",
            new_name="is_resolved",
        ),
        migrations.RenameIndex(
            model_name="auditlog",
            new_name="audit_logs_user_id_6193b2_idx",
            old_name="idx_user_created",
        ),
        migrations.RenameIndex(
            model_name="auditlog",
            new_name="audit_logs_resourc_bda8a6_idx",
            old_name="idx_resource",
        ),
        migrations.RenameIndex(
            model_name="dailyformstats",
            new_name="daily_form__form_id_a79501_idx",
            old_name="daily_form__form_id_idx",
        ),
        migrations.RenameIndex(
            model_name="formanalytics",
            new_name="form_analyt_form_id_3e7484_idx",
            old_name="idx_form_created",
        ),
        migrations.RenameIndex(
            model_name="formanalytics",
            new_name="form_analyt_session_9ede77_idx",
            old_name="idx_session_id",
        ),
        migrations.RenameIndex(
            model_name="formdraft",
            new_name="form_drafts_draft_t_90c939_idx",
            old_name="form_drafts_draft_t_0a9e08_idx",
        ),
        migrations.RenameIndex(
            model_name="formdraft",
            new_name="form_drafts_form_id_314547_idx",
            old_name="form_drafts_form_id_e77c43_idx",
        ),
        migrations.RenameIndex(
            model_name="partialsubmission",
            new_name="partial_sub_resume__da884e_idx",
            old_name="idx_resume_token",
        ),
        migrations.RenameIndex(
            model_name="partialsubmission",
            new_name="partial_sub_form_id_77f118_idx",
            old_name="idx_form_email",
        ),
        migrations.RenameIndex(
            model_name="workflowexecution",
            new_name="workflow_ex_workflo_05fdb2_idx",
            old_name="workflow_ex_workflo_idx",
        ),
        migrations.RenameIndex(
            model_name="workflowexecution",
            new_name="workflow_ex_next_ac_7ae9a9_idx",
            old_name="workflow_ex_next_ac_idx",
        ),
        migrations.AddField(
            model_name="formcomment",
            name="mentions",
            field=models.JSONField(
                default=list, help_text="List of mentioned user IDs"
            ),
        ),
        migrations.AddField(
            model_name="formcomment",
            name="parent_comment",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="replies",
                to="forms.formcomment",
            ),
        ),
        migrations.AlterField(
            model_name="formcollaborator",
            name="permissions",
            field=models.JSONField(
                default=dict,
                help_text="Granular permissions (edit_fields, edit_settings, publish, etc.)",
            ),
        ),
        migrations.AlterField(
            model_name="formcollaborator",
            name="role",
            field=models.CharField(
                choices=[
                    ("owner", "Owner"),
                    ("editor", "Editor"),
                    ("reviewer", "Reviewer"),
                    ("viewer", "Viewer"),
                ],
                max_length=20,
            ),
        ),
        migrations.AlterField(
            model_name="formcomment",
            name="field_id",
            field=models.CharField(
                help_text="Field this comment is attached to", max_length=100
            ),
        ),
        migrations.AlterField(
            model_name="formcomment",
            name="resolved_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="resolved_comments",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AlterField(
            model_name="formschedule",
            name="activation_type",
            field=models.CharField(
                choices=[
                    ("immediate", "Immediate"),
                    ("scheduled", "Scheduled"),
                    ("conditional", "Conditional"),
                ],
                default="scheduled",
                max_length=20,
            ),
        ),
        migrations.AlterField(
            model_name="formschedule",
            name="auto_archive",
            field=models.BooleanField(
                default=False, help_text="Auto-archive when expired"
            ),
        ),
        migrations.AlterField(
            model_name="formschedule",
            name="conditional_activation",
            field=models.JSONField(
                blank=True,
                default=dict,
                help_text="Conditions for activation (e.g., another form reaching target)",
            ),
        ),
        migrations.AlterField(
            model_name="formschedule",
            name="end_date",
            field=models.DateTimeField(
                blank=True, help_text="When form expires", null=True
            ),
        ),
        migrations.AlterField(
            model_name="formschedule",
            name="max_submissions",
            field=models.IntegerField(
                blank=True, help_text="Auto-close form after X submissions", null=True
            ),
        ),
        migrations.AlterField(
            model_name="formschedule",
            name="notification_settings",
            field=models.JSONField(
                default=dict, help_text="User notifications for schedule events"
            ),
        ),
        migrations.AlterField(
            model_name="formschedule",
            name="start_date",
            field=models.DateTimeField(
                blank=True, help_text="When form becomes active", null=True
            ),
        ),
        migrations.AlterField(
            model_name="formschedule",
            name="status",
            field=models.CharField(
                choices=[
                    ("pending", "Pending"),
                    ("active", "Active"),
                    ("expired", "Expired"),
                    ("cancelled", "Cancelled"),
                ],
                default="pending",
                max_length=20,
            ),
        ),
        migrations.AlterField(
            model_name="formtranslation",
            name="auto_translated",
            field=models.BooleanField(
                default=False, help_text="Whether this was auto-translated by AI"
            ),
        ),
        migrations.AlterField(
            model_name="formtranslation",
            name="is_approved",
            field=models.BooleanField(
                default=False, help_text="Manual review approval"
            ),
        ),
        migrations.AlterField(
            model_name="formtranslation",
            name="schema_translations",
            field=models.JSONField(
                default=dict,
                help_text="Field labels, placeholders, validation messages translated",
            ),
        ),
        migrations.AlterField(
            model_name="integrationprovider",
            name="auth_type",
            field=models.CharField(
                choices=[
                    ("oauth", "OAuth 2.0"),
                    ("api_key", "API Key"),
                    ("basic", "Basic Auth"),
                ],
                default="api_key",
                max_length=20,
            ),
        ),
        migrations.AlterField(
            model_name="integrationprovider",
            name="category",
            field=models.CharField(
                choices=[
                    ("crm", "CRM"),
                    ("email", "Email Marketing"),
                    ("productivity", "Productivity"),
                    ("analytics", "Analytics"),
                    ("payment", "Payment"),
                    ("storage", "Storage"),
                    ("communication", "Communication"),
                    ("other", "Other"),
                ],
                max_length=50,
            ),
        ),
        migrations.AlterField(
            model_name="language",
            name="code",
            field=models.CharField(
                help_text="ISO 639-1 language code (e.g., 'en', 'es', 'ar')",
                max_length=10,
                unique=True,
            ),
        ),
        migrations.AlterField(
            model_name="language",
            name="is_rtl",
            field=models.BooleanField(
                default=False, help_text="Right-to-left language"
            ),
        ),
        migrations.AlterField(
            model_name="language",
            name="name",
            field=models.CharField(
                help_text="Language name in English", max_length=100
            ),
        ),
        migrations.AlterField(
            model_name="language",
            name="native_name",
            field=models.CharField(
                help_text="Language name in native script", max_length=100
            ),
        ),
        migrations.AlterField(
            model_name="mobileoptimization",
            name="button_size",
            field=models.CharField(
                choices=[("small", "Small"), ("medium", "Medium"), ("large", "Large")],
                default="large",
                max_length=20,
            ),
        ),
        migrations.AlterField(
            model_name="mobileoptimization",
            name="cache_strategy",
            field=models.CharField(
                choices=[
                    ("cache_first", "Cache First"),
                    ("network_first", "Network First"),
                    ("cache_only", "Cache Only"),
                ],
                default="network_first",
                max_length=50,
            ),
        ),
        migrations.AlterField(
            model_name="mobileoptimization",
            name="camera_enabled",
            field=models.BooleanField(
                default=False, help_text="Enable camera for file uploads"
            ),
        ),
        migrations.AlterField(
            model_name="mobileoptimization",
            name="location_accuracy",
            field=models.CharField(
                choices=[("high", "High"), ("medium", "Medium"), ("low", "Low")],
                default="medium",
                max_length=20,
            ),
        ),
        migrations.AlterField(
            model_name="mobileoptimization",
            name="notification_events",
            field=models.JSONField(
                default=list,
                help_text="Events that trigger notifications (e.g., ['form_updated', 'reminder'])",
            ),
        ),
        migrations.AlterField(
            model_name="mobileoptimization",
            name="progress_indicator_style",
            field=models.CharField(
                choices=[
                    ("bar", "Progress Bar"),
                    ("steps", "Step Indicator"),
                    ("percentage", "Percentage"),
                ],
                default="bar",
                max_length=20,
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="brand_guidelines",
            field=models.JSONField(
                blank=True,
                default=dict,
                help_text="Brand rules (e.g., required colors, fonts)",
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="colors",
            field=models.JSONField(
                default=dict,
                help_text='\n    {\n        "primary": "#3B82F6",\n        "secondary": "#8B5CF6",\n        "accent": "#10B981",\n        "background": "#FFFFFF",\n        "surface": "#F3F4F6",\n        "text": "#111827",\n        "textSecondary": "#6B7280",\n        "error": "#EF4444",\n        "success": "#10B981",\n        "warning": "#F59E0B"\n    }\n    ',
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="components",
            field=models.JSONField(
                default=dict,
                help_text='\n    {\n        "button": {"style": "solid", "size": "medium"},\n        "input": {"variant": "outlined", "size": "medium"},\n        "card": {"shadow": "medium", "border": true}\n    }\n    ',
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="custom_css",
            field=models.TextField(
                blank=True, help_text="Custom CSS (sandboxed for security)"
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="custom_js",
            field=models.TextField(
                blank=True,
                help_text="Custom JS (sandboxed, limited to theme behaviors)",
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="is_public",
            field=models.BooleanField(
                default=False, help_text="Share in theme marketplace"
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="layout",
            field=models.JSONField(
                default=dict,
                help_text='\n    {\n        "borderRadius": "8px",\n        "spacing": "medium",\n        "containerWidth": "800px",\n        "fieldSpacing": "20px"\n    }\n    ',
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="typography",
            field=models.JSONField(
                default=dict,
                help_text='\n    {\n        "fontFamily": "Inter, sans-serif",\n        "headingFont": "Poppins, sans-serif",\n        "fontSize": "16px",\n        "headingSizes": {"h1": "2rem", "h2": "1.5rem", "h3": "1.25rem"}\n    }\n    ',
            ),
        ),
        migrations.AlterField(
            model_name="twofactorauth",
            name="backup_codes",
            field=models.JSONField(default=list, help_text="Encrypted backup codes"),
        ),
        migrations.AlterField(
            model_name="twofactorauth",
            name="method",
            field=models.CharField(
                choices=[
                    ("totp", "Authenticator App (TOTP)"),
                    ("sms", "SMS"),
                    ("email", "Email"),
                ],
                default="totp",
                max_length=20,
            ),
        ),
        migrations.AlterField(
            model_name="twofactorauth",
            name="secret_key",
            field=models.CharField(
                blank=True, help_text="Encrypted TOTP secret", max_length=100
            ),
        ),
        migrations.AlterUniqueTogether(
            name="formcollaborator",
            unique_together={("form", "user")},
        ),
        migrations.AlterUniqueTogether(
            name="formstep",
            unique_together={("form", "step_number")},
        ),
        migrations.AlterUniqueTogether(
            name="formtranslation",
            unique_together={("form", "language")},
        ),
        migrations.AlterUniqueTogether(
            name="teammember",
            unique_together={("team", "user")},
        ),
        migrations.AddIndex(
            model_name="formcomment",
            index=models.Index(
                fields=["form", "field_id"], name="form_commen_form_id_88cbb0_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="theme",
            index=models.Index(
                fields=["is_public", "-downloads_count"],
                name="themes_is_publ_3b7f5a_idx",
            ),
        ),
        migrations.AddField(
            model_name="activitylog",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="activity_logs",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="activitylog",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="autofilltemplate",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="autofill_templates",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="brandguideline",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="brand_guidelines",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="completionprediction",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="completion_predictions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="conflictresolution",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="conflicts",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="conflictresolution",
            name="resolved_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="consenttracking",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="consents",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="dataprivacyrequest",
            name="processed_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="processed_privacy_requests",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="encryptedsubmission",
            name="submission",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="encryption",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="fieldprediction",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="field_predictions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formchange",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="changes",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formchange",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="formeditsession",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="edit_sessions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formeditsession",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="formchange",
            name="session",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="changes",
                to="forms.formeditsession",
            ),
        ),
        migrations.AddField(
            model_name="formlifecycleevent",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="lifecycle_events",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formlifecycleevent",
            name="triggered_by",
            field=models.ForeignKey(
                blank=True,
                help_text="User who triggered the event (if manual)",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formnotification",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="notifications",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formreview",
            name="reviewer",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="form_reviews",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formreviewworkflow",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="review_workflow",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formreviewworkflow",
            name="reviewers",
            field=models.ManyToManyField(
                related_name="review_assignments",
                through="forms.FormReview",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formreviewworkflow",
            name="submitted_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="submitted_reviews",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formreview",
            name="workflow",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="reviews",
                to="forms.formreviewworkflow",
            ),
        ),
        migrations.AddField(
            model_name="formtheme",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="theme_config",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formtheme",
            name="theme",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="forms",
                to="forms.theme",
            ),
        ),
        migrations.AddField(
            model_name="geolocationfield",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="geolocations",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="integrationconnection",
            name="provider",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="forms.integrationprovider",
            ),
        ),
        migrations.AddField(
            model_name="integrationconnection",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="integration_connections",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="integrationtemplate",
            name="provider",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="templates",
                to="forms.integrationprovider",
            ),
        ),
        migrations.AddField(
            model_name="integrationworkflow",
            name="form",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="workflows",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="integrationworkflow",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="workflows",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="ipaccesscontrol",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="ip_controls",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="mobileanalytics",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="mobile_analytics",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="offlinesubmission",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="offline_submissions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="predictionfeedback",
            name="prediction",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="feedback",
                to="forms.fieldprediction",
            ),
        ),
        migrations.AddField(
            model_name="predictionfeedback",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="forms.submission"
            ),
        ),
        migrations.AddField(
            model_name="progressivedisclosure",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="progressive_disclosure",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="pushnotificationsubscription",
            name="user",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="push_subscriptions",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formnotification",
            name="subscription",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="notifications",
                to="forms.pushnotificationsubscription",
            ),
        ),
        migrations.AddField(
            model_name="qrcodescan",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="qr_scans",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="qrcodescan",
            name="submission",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="qr_scans",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="recurringform",
            name="template_form",
            field=models.ForeignKey(
                help_text="Template form to clone",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="recurring_config",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="recurringform",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="recurring_forms",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="securityauditlog",
            name="user",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="securityscan",
            name="submission",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="security_scan",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="smartdefault",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="smart_defaults",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="ssoprovider",
            name="organization",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="sso_providers",
                to="users.team",
            ),
        ),
        migrations.AddField(
            model_name="submissiontranslation",
            name="language",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="forms.language"
            ),
        ),
        migrations.AddField(
            model_name="submissiontranslation",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="translations",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="themerating",
            name="theme",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="ratings",
                to="forms.theme",
            ),
        ),
        migrations.AddField(
            model_name="themerating",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="theme_ratings",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="usersubmissionhistory",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="user_histories",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="webhookendpoint",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="webhooks",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="webhookendpoint",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="webhooks",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="webhooklog",
            name="submission",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="webhooklog",
            name="webhook",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="logs",
                to="forms.webhookendpoint",
            ),
        ),
        migrations.AddIndex(
            model_name="activitylog",
            index=models.Index(
                fields=["form", "-created_at"], name="activity_lo_form_id_1332f8_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="fieldprediction",
            unique_together={("form", "field_id")},
        ),
        migrations.AddIndex(
            model_name="formeditsession",
            index=models.Index(
                fields=["form", "is_active"], name="form_edit_s_form_id_12dfb0_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="formchange",
            index=models.Index(
                fields=["form", "created_at"], name="form_change_form_id_4bd48a_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="formlifecycleevent",
            index=models.Index(
                fields=["form", "-created_at"], name="form_lifecy_form_id_56cbf1_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="formreview",
            unique_together={("workflow", "reviewer")},
        ),
        migrations.AlterUniqueTogether(
            name="integrationconnection",
            unique_together={("user", "provider", "name")},
        ),
        migrations.AddIndex(
            model_name="mobileanalytics",
            index=models.Index(
                fields=["form", "device_type"], name="mobile_anal_form_id_e3928f_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="offlinesubmission",
            index=models.Index(
                fields=["device_id", "status"], name="offline_sub_device__6a7427_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="securityauditlog",
            index=models.Index(
                fields=["user", "-created_at"], name="security_au_user_id_cf81f4_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="securityauditlog",
            index=models.Index(
                fields=["event_type", "-created_at"],
                name="security_au_event_t_0b961c_idx",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="smartdefault",
            unique_together={("form", "field_id")},
        ),
        migrations.AlterUniqueTogether(
            name="submissiontranslation",
            unique_together={("submission", "language")},
        ),
        migrations.AlterUniqueTogether(
            name="themerating",
            unique_together={("theme", "user")},
        ),
        migrations.AddIndex(
            model_name="usersubmissionhistory",
            index=models.Index(
                fields=["user_identifier", "form"],
                name="user_submis_user_id_7d08af_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="webhooklog",
            index=models.Index(
                fields=["webhook", "-created_at"], name="webhook_log_webhook_60a3ab_idx"
            ),
        ),
    ]
