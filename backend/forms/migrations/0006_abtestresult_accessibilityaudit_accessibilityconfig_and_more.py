# Generated by Django 6.0 on 2025-12-29 07:56

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("forms", "0005_formdraft_formvariant_abtest"),
        ("users", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name="ABTestResult",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("control_visitors", models.IntegerField(default=0)),
                ("control_conversions", models.IntegerField(default=0)),
                ("control_conversion_rate", models.FloatField(default=0)),
                ("variant_visitors", models.IntegerField(default=0)),
                ("variant_conversions", models.IntegerField(default=0)),
                ("variant_conversion_rate", models.FloatField(default=0)),
                (
                    "relative_improvement",
                    models.FloatField(
                        default=0, help_text="Percentage improvement over control"
                    ),
                ),
                ("p_value", models.FloatField(blank=True, null=True)),
                (
                    "confidence_level",
                    models.FloatField(default=0, help_text="Percentage (e.g., 95.0)"),
                ),
                ("is_significant", models.BooleanField(default=False)),
                (
                    "sample_size_needed",
                    models.IntegerField(default=0, help_text="For statistical power"),
                ),
                ("estimated_completion_date", models.DateField(blank=True, null=True)),
                ("calculated_at", models.DateTimeField(auto_now=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "ab_test_results",
                "ordering": ["-calculated_at"],
            },
        ),
        migrations.CreateModel(
            name="AccessibilityAudit",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("running", "Running"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("wcag_level_tested", models.CharField(default="AA", max_length=10)),
                (
                    "overall_score",
                    models.FloatField(default=0, help_text="0-100 score"),
                ),
                ("perceivable_score", models.FloatField(default=0)),
                ("operable_score", models.FloatField(default=0)),
                ("understandable_score", models.FloatField(default=0)),
                ("robust_score", models.FloatField(default=0)),
                ("total_issues", models.IntegerField(default=0)),
                ("critical_issues", models.IntegerField(default=0)),
                ("serious_issues", models.IntegerField(default=0)),
                ("moderate_issues", models.IntegerField(default=0)),
                ("minor_issues", models.IntegerField(default=0)),
                (
                    "issues",
                    models.JSONField(
                        default=list, help_text="List of accessibility issues"
                    ),
                ),
                ("passed_checks", models.JSONField(default=list)),
                ("warnings", models.JSONField(default=list)),
                (
                    "manual_review_needed",
                    models.JSONField(
                        default=list,
                        help_text="Items requiring manual accessibility review",
                    ),
                ),
                ("started_at", models.DateTimeField(blank=True, null=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "accessibility_audits",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AccessibilityConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "target_wcag_level",
                    models.CharField(
                        choices=[
                            ("A", "WCAG 2.1 Level A"),
                            ("AA", "WCAG 2.1 Level AA"),
                            ("AAA", "WCAG 2.1 Level AAA"),
                        ],
                        default="AA",
                        max_length=10,
                    ),
                ),
                ("is_compliant", models.BooleanField(default=False)),
                ("last_audit_at", models.DateTimeField(blank=True, null=True)),
                ("screen_reader_optimized", models.BooleanField(default=True)),
                ("aria_labels_enabled", models.BooleanField(default=True)),
                ("aria_live_regions", models.BooleanField(default=True)),
                ("skip_links_enabled", models.BooleanField(default=True)),
                ("keyboard_nav_enabled", models.BooleanField(default=True)),
                ("focus_visible_enabled", models.BooleanField(default=True)),
                ("tab_order_custom", models.JSONField(blank=True, default=list)),
                ("high_contrast_available", models.BooleanField(default=True)),
                ("font_scaling_enabled", models.BooleanField(default=True)),
                ("min_font_size", models.IntegerField(default=16)),
                ("max_font_size", models.IntegerField(default=32)),
                ("reduced_motion_support", models.BooleanField(default=True)),
                ("auto_play_disabled", models.BooleanField(default=True)),
                ("color_blind_friendly", models.BooleanField(default=True)),
                ("minimum_contrast_ratio", models.FloatField(default=4.5)),
                ("error_suggestions_enabled", models.BooleanField(default=True)),
                ("inline_error_messages", models.BooleanField(default=True)),
                ("error_summary_enabled", models.BooleanField(default=True)),
                ("session_timeout_warning", models.BooleanField(default=True)),
                ("timeout_extension_enabled", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "accessibility_configs",
            },
        ),
        migrations.CreateModel(
            name="AccessibilityIssue",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("rule_id", models.CharField(max_length=100)),
                (
                    "wcag_criteria",
                    models.CharField(help_text="e.g., 1.1.1, 2.4.7", max_length=50),
                ),
                (
                    "wcag_principle",
                    models.CharField(
                        choices=[
                            ("perceivable", "Perceivable"),
                            ("operable", "Operable"),
                            ("understandable", "Understandable"),
                            ("robust", "Robust"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "impact",
                    models.CharField(
                        choices=[
                            ("critical", "Critical"),
                            ("serious", "Serious"),
                            ("moderate", "Moderate"),
                            ("minor", "Minor"),
                        ],
                        max_length=20,
                    ),
                ),
                ("description", models.TextField()),
                ("help_text", models.TextField(blank=True)),
                ("help_url", models.URLField(blank=True)),
                ("affected_element", models.CharField(blank=True, max_length=500)),
                ("field_id", models.CharField(blank=True, max_length=100)),
                ("html_snippet", models.TextField(blank=True)),
                ("fix_suggestion", models.TextField(blank=True)),
                ("auto_fixable", models.BooleanField(default=False)),
                ("is_fixed", models.BooleanField(default=False)),
                ("fixed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "accessibility_issues",
                "ordering": ["impact", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AccessibilityTestResult",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("wcag_level_tested", models.CharField(default="AA", max_length=10)),
                ("is_compliant", models.BooleanField(default=False)),
                ("critical_issues", models.IntegerField(default=0)),
                ("serious_issues", models.IntegerField(default=0)),
                ("moderate_issues", models.IntegerField(default=0)),
                ("minor_issues", models.IntegerField(default=0)),
                (
                    "issues",
                    models.JSONField(
                        default=list,
                        help_text="List of accessibility issues with locations",
                    ),
                ),
                (
                    "accessibility_score",
                    models.IntegerField(
                        default=0, help_text="0-100 accessibility score"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "accessibility_test_results",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ActivityLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "action",
                    models.CharField(
                        help_text="Human-readable action description", max_length=200
                    ),
                ),
                ("action_type", models.CharField(max_length=50)),
                (
                    "details",
                    models.JSONField(
                        default=dict, help_text="Additional action context"
                    ),
                ),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "activity_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AlertConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=255)),
                (
                    "alert_type",
                    models.CharField(
                        choices=[
                            ("submission_spike", "Submission Spike"),
                            ("submission_drop", "Submission Drop"),
                            ("conversion_drop", "Conversion Rate Drop"),
                            ("abandonment_spike", "Abandonment Spike"),
                            ("score_threshold", "Lead Score Threshold"),
                            ("anomaly", "Anomaly Detected"),
                            ("forecast_target", "Forecast Target"),
                        ],
                        max_length=30,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                (
                    "threshold_value",
                    models.FloatField(
                        default=0, help_text="Threshold to trigger alert"
                    ),
                ),
                (
                    "threshold_direction",
                    models.CharField(
                        choices=[
                            ("above", "Above"),
                            ("below", "Below"),
                            ("change", "Change"),
                        ],
                        default="above",
                        max_length=10,
                    ),
                ),
                (
                    "comparison_period",
                    models.CharField(
                        default="day", help_text="hour, day, week, month", max_length=20
                    ),
                ),
                (
                    "notification_channels",
                    models.JSONField(
                        default=list,
                        help_text="List of channels: email, slack, sms, webhook",
                    ),
                ),
                (
                    "notification_emails",
                    models.JSONField(default=list, help_text="List of email addresses"),
                ),
                ("slack_webhook", models.URLField(blank=True)),
                ("custom_webhook", models.URLField(blank=True)),
                ("last_triggered_at", models.DateTimeField(blank=True, null=True)),
                ("trigger_count", models.IntegerField(default=0)),
                (
                    "cooldown_minutes",
                    models.IntegerField(default=60, help_text="Minutes between alerts"),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "alert_configs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AlertHistory",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "triggered_value",
                    models.FloatField(help_text="The value that triggered the alert"),
                ),
                (
                    "threshold_value",
                    models.FloatField(help_text="The threshold at time of trigger"),
                ),
                ("message", models.TextField()),
                (
                    "notifications_sent",
                    models.JSONField(
                        default=list, help_text="List of notification channels used"
                    ),
                ),
                ("acknowledged", models.BooleanField(default=False)),
                ("acknowledged_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "alert_history",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="AssetOptimization",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("original_url", models.URLField()),
                ("optimized_url", models.URLField()),
                ("original_size", models.IntegerField(help_text="Size in bytes")),
                ("optimized_size", models.IntegerField(help_text="Size in bytes")),
                ("compression_ratio", models.FloatField(help_text="Percentage saved")),
                (
                    "asset_type",
                    models.CharField(
                        choices=[
                            ("image", "Image"),
                            ("font", "Font"),
                            ("script", "Script"),
                            ("style", "Stylesheet"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "format",
                    models.CharField(
                        blank=True, help_text="e.g., webp, woff2", max_length=20
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "asset_optimizations",
            },
        ),
        migrations.CreateModel(
            name="AutoFillTemplate",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "field_mappings",
                    models.JSONField(
                        default=dict, help_text="Map of field IDs to auto-fill values"
                    ),
                ),
                (
                    "is_global",
                    models.BooleanField(
                        default=False, help_text="Available across all forms"
                    ),
                ),
                ("usage_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "autofill_templates",
            },
        ),
        migrations.CreateModel(
            name="AutoSaveConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("enabled", models.BooleanField(default=True)),
                ("interval_seconds", models.IntegerField(default=30)),
                ("save_on_field_change", models.BooleanField(default=True)),
                ("save_on_step_change", models.BooleanField(default=True)),
                ("recovery_enabled", models.BooleanField(default=True)),
                ("recovery_retention_hours", models.IntegerField(default=72)),
                ("keep_version_history", models.BooleanField(default=True)),
                ("max_versions", models.IntegerField(default=50)),
                ("notify_on_recovery_available", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "autosave_configs",
            },
        ),
        migrations.CreateModel(
            name="BatchProcessingQueue",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("processing", "Processing"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("retry_count", models.IntegerField(default=0)),
                ("error_message", models.TextField(blank=True)),
                ("result", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("processed_at", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "batch_processing_queue",
                "ordering": ["created_at"],
            },
        ),
        migrations.CreateModel(
            name="BehaviorInsight",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "insight_type",
                    models.CharField(
                        choices=[
                            ("pattern", "User Pattern"),
                            ("anomaly", "Anomaly Detected"),
                            ("optimization", "Optimization Opportunity"),
                            ("trend", "Trend Analysis"),
                            ("prediction", "Prediction"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("high", "High"),
                            ("medium", "Medium"),
                            ("low", "Low"),
                        ],
                        default="medium",
                        max_length=20,
                    ),
                ),
                ("title", models.CharField(max_length=255)),
                ("description", models.TextField()),
                ("supporting_data", models.JSONField(default=dict)),
                (
                    "affected_fields",
                    models.JSONField(default=list, help_text="Field IDs affected"),
                ),
                ("recommendations", models.JSONField(default=list)),
                (
                    "estimated_impact",
                    models.FloatField(
                        blank=True,
                        help_text="Estimated conversion improvement %",
                        null=True,
                    ),
                ),
                ("is_actionable", models.BooleanField(default=True)),
                ("is_dismissed", models.BooleanField(default=False)),
                ("generated_at", models.DateTimeField(auto_now_add=True)),
                ("expires_at", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "behavior_insights",
                "ordering": ["-generated_at"],
            },
        ),
        migrations.CreateModel(
            name="BrandGuideline",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "required_colors",
                    models.JSONField(
                        default=list,
                        help_text="List of required brand colors with hex codes",
                    ),
                ),
                ("forbidden_colors", models.JSONField(blank=True, default=list)),
                ("required_fonts", models.JSONField(default=list)),
                ("forbidden_fonts", models.JSONField(blank=True, default=list)),
                ("logo_url", models.URLField(blank=True)),
                ("logo_placement_rules", models.JSONField(blank=True, default=dict)),
                (
                    "min_contrast_ratio",
                    models.DecimalField(
                        decimal_places=2,
                        default=4.5,
                        help_text="WCAG AA compliance",
                        max_digits=4,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "brand_guidelines",
            },
        ),
        migrations.CreateModel(
            name="BulkAction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "action_type",
                    models.CharField(
                        choices=[
                            ("approve", "Bulk Approve"),
                            ("reject", "Bulk Reject"),
                            ("delete", "Bulk Delete"),
                            ("export", "Bulk Export"),
                            ("tag", "Bulk Tag"),
                            ("assign", "Bulk Assign"),
                            ("status_change", "Bulk Status Change"),
                            ("transform", "Data Transformation"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("processing", "Processing"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                            ("partial", "Partially Completed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                (
                    "submission_ids",
                    models.JSONField(
                        default=list,
                        help_text="Specific submission IDs",
                        verbose_name=models.UUIDField(),
                    ),
                ),
                (
                    "filter_criteria",
                    models.JSONField(
                        default=dict, help_text="Query filters for selection"
                    ),
                ),
                (
                    "action_params",
                    models.JSONField(
                        default=dict, help_text="Action-specific parameters"
                    ),
                ),
                ("total_submissions", models.IntegerField(default=0)),
                ("processed_submissions", models.IntegerField(default=0)),
                ("successful_submissions", models.IntegerField(default=0)),
                ("failed_submissions", models.IntegerField(default=0)),
                (
                    "result_data",
                    models.JSONField(
                        default=dict, help_text="Action results and errors"
                    ),
                ),
                (
                    "export_file_url",
                    models.URLField(blank=True, help_text="For export actions"),
                ),
                ("started_at", models.DateTimeField(blank=True, null=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("estimated_completion", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "bulk_actions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="CompletionPrediction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(db_index=True, max_length=100)),
                ("current_field_index", models.IntegerField()),
                ("total_fields", models.IntegerField()),
                ("required_fields_completed", models.IntegerField()),
                ("required_fields_total", models.IntegerField()),
                (
                    "predicted_completion_percent",
                    models.IntegerField(help_text="AI-predicted completion percentage"),
                ),
                (
                    "estimated_time_remaining",
                    models.IntegerField(help_text="Estimated seconds to completion"),
                ),
                (
                    "confidence_score",
                    models.DecimalField(decimal_places=2, max_digits=4),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "completion_predictions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ComplianceReport",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "compliance_type",
                    models.CharField(
                        choices=[
                            ("wcag", "WCAG 2.1"),
                            ("ada", "ADA"),
                            ("section508", "Section 508"),
                            ("en301549", "EN 301 549"),
                        ],
                        max_length=50,
                    ),
                ),
                ("is_compliant", models.BooleanField(default=False)),
                ("compliance_score", models.FloatField(default=0)),
                ("requirements_checked", models.JSONField(default=list)),
                ("requirements_met", models.JSONField(default=list)),
                ("requirements_failed", models.JSONField(default=list)),
                (
                    "requirements_na",
                    models.JSONField(default=list, help_text="Not applicable"),
                ),
                ("report_pdf_url", models.URLField(blank=True)),
                ("certification_number", models.CharField(blank=True, max_length=100)),
                ("valid_until", models.DateField(blank=True, null=True)),
                ("generated_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "compliance_reports",
                "ordering": ["-generated_at"],
            },
        ),
        migrations.CreateModel(
            name="ComplianceScan",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "scan_type",
                    models.CharField(
                        choices=[
                            ("gdpr", "GDPR"),
                            ("wcag", "WCAG Accessibility"),
                            ("hipaa", "HIPAA"),
                            ("pci", "PCI-DSS"),
                            ("ccpa", "CCPA"),
                            ("full", "Full Scan"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("running", "Running"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                (
                    "overall_score",
                    models.IntegerField(default=0, help_text="0-100 compliance score"),
                ),
                ("issues_found", models.IntegerField(default=0)),
                ("issues_fixed", models.IntegerField(default=0)),
                (
                    "scan_results",
                    models.JSONField(default=dict, help_text="Detailed scan results"),
                ),
                (
                    "auto_fixes_applied",
                    models.JSONField(
                        default=list, help_text="List of auto-fixes applied"
                    ),
                ),
                ("started_at", models.DateTimeField(blank=True, null=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "compliance_scans",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ConflictResolution",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "conflicting_changes",
                    models.JSONField(
                        default=list, help_text="List of conflicting FormChange IDs"
                    ),
                ),
                (
                    "resolution_strategy",
                    models.CharField(
                        choices=[
                            ("last_write_wins", "Last Write Wins"),
                            ("manual", "Manual Resolution"),
                            ("merge", "Automatic Merge"),
                        ],
                        max_length=50,
                    ),
                ),
                ("final_value", models.JSONField(help_text="Final resolved value")),
                ("metadata", models.JSONField(default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "conflict_resolutions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ConsentTracking",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "consent_type",
                    models.CharField(
                        choices=[
                            ("data_processing", "Data Processing"),
                            ("marketing", "Marketing Communications"),
                            ("third_party_sharing", "Third-party Sharing"),
                            ("analytics", "Analytics"),
                        ],
                        max_length=50,
                    ),
                ),
                ("granted", models.BooleanField()),
                (
                    "consent_text",
                    models.TextField(help_text="Exact consent text shown to user"),
                ),
                ("ip_address", models.GenericIPAddressField()),
                ("user_agent", models.TextField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("revoked_at", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "consent_tracking",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="CustomFormTemplate",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField()),
                ("schema_json", models.JSONField(help_text="Form schema template")),
                ("preview_image_url", models.URLField(blank=True)),
                ("category", models.CharField(max_length=100)),
                (
                    "tags",
                    models.JSONField(
                        blank=True,
                        default=list,
                        verbose_name=models.CharField(max_length=50),
                    ),
                ),
                (
                    "is_public",
                    models.BooleanField(
                        default=False, help_text="Available to all users"
                    ),
                ),
                ("usage_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "custom_form_templates",
                "ordering": ["-usage_count", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="DailyFormStats",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("date", models.DateField()),
                ("views", models.IntegerField(default=0)),
                ("starts", models.IntegerField(default=0)),
                ("submissions", models.IntegerField(default=0)),
                ("abandons", models.IntegerField(default=0)),
                ("conversion_rate", models.FloatField(default=0)),
                ("abandonment_rate", models.FloatField(default=0)),
                ("completion_rate", models.FloatField(default=0)),
                (
                    "avg_completion_time",
                    models.FloatField(default=0, help_text="Average time in seconds"),
                ),
                ("avg_lead_score", models.FloatField(default=0)),
                ("hot_leads", models.IntegerField(default=0)),
                ("mobile_submissions", models.IntegerField(default=0)),
                ("desktop_submissions", models.IntegerField(default=0)),
                ("tablet_submissions", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "daily_form_stats",
                "ordering": ["-date"],
            },
        ),
        migrations.CreateModel(
            name="DataCleansingLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("original_value", models.TextField()),
                ("cleansed_value", models.TextField()),
                ("applied_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "data_cleansing_logs",
                "ordering": ["-applied_at"],
            },
        ),
        migrations.CreateModel(
            name="DataCleansingRule",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=255)),
                (
                    "rule_type",
                    models.CharField(
                        choices=[
                            ("trim", "Trim Whitespace"),
                            ("lowercase", "Lowercase"),
                            ("uppercase", "Uppercase"),
                            ("titlecase", "Title Case"),
                            ("phone_format", "Phone Format"),
                            ("date_format", "Date Format"),
                            ("address_standardize", "Address Standardization"),
                            ("remove_special", "Remove Special Characters"),
                            ("regex_replace", "Regex Replace"),
                            ("custom", "Custom Transform"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "target_field_ids",
                    models.JSONField(
                        default=list, help_text="Field IDs to apply rule to"
                    ),
                ),
                (
                    "apply_to_all",
                    models.BooleanField(
                        default=False, help_text="Apply to all text fields"
                    ),
                ),
                (
                    "config",
                    models.JSONField(
                        default=dict,
                        help_text="Rule-specific configuration (regex pattern, date format, etc.)",
                    ),
                ),
                ("apply_on_submit", models.BooleanField(default=True)),
                ("apply_on_export", models.BooleanField(default=True)),
                ("is_active", models.BooleanField(default=True)),
                (
                    "order",
                    models.IntegerField(default=0, help_text="Order of rule execution"),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "data_cleansing_rules",
                "ordering": ["order"],
            },
        ),
        migrations.CreateModel(
            name="DataPrivacyRequest",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("requester_email", models.EmailField(max_length=254)),
                (
                    "request_type",
                    models.CharField(
                        choices=[
                            ("export", "Data Export"),
                            ("deletion", "Data Deletion"),
                            ("rectification", "Data Rectification"),
                            ("portability", "Data Portability"),
                            ("restriction", "Processing Restriction"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("in_progress", "In Progress"),
                            ("completed", "Completed"),
                            ("rejected", "Rejected"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("verification_token", models.CharField(max_length=100, unique=True)),
                ("verified_at", models.DateTimeField(blank=True, null=True)),
                ("reason", models.TextField(blank=True)),
                (
                    "data_scope",
                    models.JSONField(
                        default=dict,
                        help_text="Specific data requested (forms, submissions, etc.)",
                    ),
                ),
                ("processed_at", models.DateTimeField(blank=True, null=True)),
                ("notes", models.TextField(blank=True)),
                ("export_file_url", models.URLField(blank=True)),
                ("export_expires_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "data_privacy_requests",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="DataQualityScore",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "overall_score",
                    models.FloatField(default=0, help_text="0-100 quality score"),
                ),
                (
                    "completeness_score",
                    models.FloatField(default=0, help_text="Required fields filled"),
                ),
                (
                    "accuracy_score",
                    models.FloatField(default=0, help_text="Data validation passed"),
                ),
                (
                    "consistency_score",
                    models.FloatField(default=0, help_text="Data consistency checks"),
                ),
                (
                    "validity_score",
                    models.FloatField(
                        default=0, help_text="External validation (email, phone)"
                    ),
                ),
                ("total_issues", models.IntegerField(default=0)),
                ("critical_issues", models.IntegerField(default=0)),
                ("warnings", models.IntegerField(default=0)),
                (
                    "issues",
                    models.JSONField(default=list, help_text="List of quality issues"),
                ),
                (
                    "field_scores",
                    models.JSONField(
                        default=dict, help_text="Per-field quality scores"
                    ),
                ),
                ("calculated_at", models.DateTimeField(auto_now=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "data_quality_scores",
            },
        ),
        migrations.CreateModel(
            name="DraftVersion",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("schema_json", models.JSONField(default=dict)),
                ("settings_json", models.JSONField(default=dict)),
                ("version_number", models.IntegerField()),
                ("is_auto_save", models.BooleanField(default=True)),
                (
                    "save_trigger",
                    models.CharField(
                        choices=[
                            ("auto_30s", "Auto-save (30s)"),
                            ("auto_change", "Auto-save (on change)"),
                            ("manual", "Manual Save"),
                            ("publish_preview", "Before Publish"),
                        ],
                        default="auto_30s",
                        max_length=50,
                    ),
                ),
                (
                    "changes_summary",
                    models.JSONField(
                        default=dict,
                        help_text="Summary of changes from previous version",
                    ),
                ),
                ("diff_from_previous", models.JSONField(blank=True, default=dict)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "draft_versions",
                "ordering": ["-version_number"],
            },
        ),
        migrations.CreateModel(
            name="DropOffAnalysis",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("field_label", models.CharField(max_length=255)),
                ("field_order", models.IntegerField()),
                (
                    "visitors_reached",
                    models.IntegerField(
                        default=0, help_text="Users who reached this field"
                    ),
                ),
                (
                    "visitors_completed",
                    models.IntegerField(
                        default=0, help_text="Users who completed this field"
                    ),
                ),
                (
                    "visitors_dropped",
                    models.IntegerField(
                        default=0, help_text="Users who abandoned at this field"
                    ),
                ),
                ("drop_off_rate", models.FloatField(default=0)),
                (
                    "avg_time_on_field",
                    models.FloatField(default=0, help_text="Seconds"),
                ),
                ("validation_errors", models.IntegerField(default=0)),
                ("most_common_error", models.CharField(blank=True, max_length=500)),
                (
                    "suspected_reasons",
                    models.JSONField(
                        default=list, help_text="AI-analyzed reasons for drop-off"
                    ),
                ),
                ("analysis_date", models.DateField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "dropoff_analysis",
                "ordering": ["field_order"],
            },
        ),
        migrations.CreateModel(
            name="DuplicateDetection",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "similarity_score",
                    models.FloatField(help_text="0-100 similarity percentage"),
                ),
                (
                    "matching_fields",
                    models.JSONField(default=list, help_text="Fields that match"),
                ),
                (
                    "differing_fields",
                    models.JSONField(default=list, help_text="Fields that differ"),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("potential", "Potential Duplicate"),
                            ("confirmed", "Confirmed Duplicate"),
                            ("not_duplicate", "Not a Duplicate"),
                            ("merged", "Merged"),
                        ],
                        default="potential",
                        max_length=20,
                    ),
                ),
                ("resolution_notes", models.TextField(blank=True)),
                ("detected_at", models.DateTimeField(auto_now_add=True)),
                ("resolved_at", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "duplicate_detections",
                "ordering": ["-similarity_score"],
            },
        ),
        migrations.CreateModel(
            name="EncryptedSubmission",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "encrypted_data",
                    models.BinaryField(help_text="AES-256 encrypted submission data"),
                ),
                (
                    "encryption_key_id",
                    models.CharField(
                        help_text="Key ID for key rotation", max_length=100
                    ),
                ),
                (
                    "encryption_algorithm",
                    models.CharField(default="AES-256-GCM", max_length=50),
                ),
                ("iv", models.BinaryField(help_text="Initialization vector")),
                (
                    "auth_tag",
                    models.BinaryField(
                        blank=True, help_text="Authentication tag for GCM", null=True
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "encrypted_submissions",
            },
        ),
        migrations.CreateModel(
            name="ExportWithQuality",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "format",
                    models.CharField(
                        choices=[
                            ("csv", "CSV"),
                            ("xlsx", "Excel"),
                            ("json", "JSON"),
                            ("pdf", "PDF"),
                        ],
                        default="csv",
                        max_length=10,
                    ),
                ),
                ("include_quality_scores", models.BooleanField(default=True)),
                ("include_validation_results", models.BooleanField(default=True)),
                ("min_quality_score", models.FloatField(default=0)),
                ("date_from", models.DateTimeField(blank=True, null=True)),
                ("date_to", models.DateTimeField(blank=True, null=True)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("processing", "Processing"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("total_records", models.IntegerField(default=0)),
                ("exported_records", models.IntegerField(default=0)),
                (
                    "excluded_records",
                    models.IntegerField(
                        default=0, help_text="Failed quality threshold"
                    ),
                ),
                ("file_url", models.URLField(blank=True)),
                (
                    "file_size",
                    models.IntegerField(default=0, help_text="Size in bytes"),
                ),
                ("avg_quality_score", models.FloatField(default=0)),
                ("quality_distribution", models.JSONField(default=dict)),
                ("error_message", models.TextField(blank=True)),
                ("started_at", models.DateTimeField(blank=True, null=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "export_with_quality",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ExternalAPIProvider",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                (
                    "provider_type",
                    models.CharField(
                        choices=[
                            ("postal", "Postal/Address Service"),
                            ("business", "Business Registry"),
                            ("vehicle", "Vehicle Information"),
                            ("financial", "Financial Services"),
                            ("identity", "Identity Verification"),
                            ("custom", "Custom API"),
                        ],
                        max_length=50,
                    ),
                ),
                ("base_url", models.URLField()),
                (
                    "auth_type",
                    models.CharField(
                        choices=[
                            ("none", "None"),
                            ("api_key", "API Key"),
                            ("oauth", "OAuth"),
                            ("basic", "Basic Auth"),
                        ],
                        default="api_key",
                        max_length=20,
                    ),
                ),
                (
                    "credentials",
                    models.JSONField(default=dict, help_text="Encrypted credentials"),
                ),
                (
                    "rate_limit",
                    models.IntegerField(default=100, help_text="Requests per minute"),
                ),
                (
                    "timeout",
                    models.IntegerField(
                        default=5, help_text="Request timeout in seconds"
                    ),
                ),
                ("total_requests", models.IntegerField(default=0)),
                ("failed_requests", models.IntegerField(default=0)),
                ("last_used_at", models.DateTimeField(blank=True, null=True)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "external_api_providers",
            },
        ),
        migrations.CreateModel(
            name="ExternalValidation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("field_value", models.TextField()),
                (
                    "validation_type",
                    models.CharField(
                        choices=[
                            ("email", "Email Verification"),
                            ("phone", "Phone Verification"),
                            ("address", "Address Validation"),
                            ("company", "Company Verification"),
                            ("domain", "Domain Verification"),
                            ("custom", "Custom API Validation"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("valid", "Valid"),
                            ("invalid", "Invalid"),
                            ("risky", "Risky"),
                            ("unknown", "Unknown"),
                            ("error", "Error"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("is_valid", models.BooleanField(null=True)),
                (
                    "confidence_score",
                    models.FloatField(help_text="0-100 confidence", null=True),
                ),
                ("validation_result", models.JSONField(default=dict)),
                (
                    "corrected_value",
                    models.TextField(blank=True, help_text="Suggested correction"),
                ),
                ("provider", models.CharField(blank=True, max_length=50)),
                ("api_response", models.JSONField(default=dict)),
                ("validated_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "external_validations",
            },
        ),
        migrations.CreateModel(
            name="ExternalValidationRule",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("field_label", models.CharField(max_length=255)),
                (
                    "validation_type",
                    models.CharField(
                        choices=[
                            ("business_registry", "Business Registration Number"),
                            ("iban", "IBAN/Bank Account"),
                            ("vat", "VAT Number"),
                            ("license", "Professional License"),
                            ("address", "Address Verification"),
                            ("domain", "Domain Ownership"),
                            ("phone_carrier", "Phone Carrier Lookup"),
                            ("email_mx", "Email MX Record"),
                            ("custom", "Custom Validation"),
                        ],
                        max_length=50,
                    ),
                ),
                ("validation_endpoint", models.URLField(blank=True)),
                ("validation_params", models.JSONField(default=dict)),
                (
                    "is_required",
                    models.BooleanField(
                        default=False, help_text="Block submission if validation fails"
                    ),
                ),
                (
                    "show_validation_status",
                    models.BooleanField(
                        default=True, help_text="Show real-time validation to user"
                    ),
                ),
                ("cache_results", models.BooleanField(default=True)),
                (
                    "cache_duration",
                    models.IntegerField(
                        default=86400, help_text="Cache duration in seconds"
                    ),
                ),
                (
                    "error_message_invalid",
                    models.CharField(
                        default="This value could not be validated", max_length=500
                    ),
                ),
                (
                    "error_message_service_error",
                    models.CharField(
                        default="Validation service unavailable", max_length=500
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "external_validation_rules",
            },
        ),
        migrations.CreateModel(
            name="FieldAutoPopulationLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "source_value",
                    models.JSONField(help_text="Value that triggered auto-population"),
                ),
                (
                    "populated_fields",
                    models.JSONField(
                        default=dict, help_text="Fields and their populated values"
                    ),
                ),
                ("success", models.BooleanField(default=True)),
                ("error_message", models.TextField(blank=True)),
                ("response_time_ms", models.IntegerField(default=0)),
                ("cache_hit", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "field_autopopulation_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FieldCompletionMetric",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("field_label", models.CharField(max_length=255)),
                ("field_type", models.CharField(max_length=50)),
                (
                    "avg_completion_time",
                    models.FloatField(default=0, help_text="Average time in seconds"),
                ),
                ("min_completion_time", models.FloatField(default=0)),
                ("max_completion_time", models.FloatField(default=0)),
                (
                    "p50_completion_time",
                    models.FloatField(default=0, help_text="50th percentile"),
                ),
                (
                    "p95_completion_time",
                    models.FloatField(default=0, help_text="95th percentile"),
                ),
                ("total_interactions", models.IntegerField(default=0)),
                ("total_completions", models.IntegerField(default=0)),
                ("drop_off_count", models.IntegerField(default=0)),
                ("error_count", models.IntegerField(default=0)),
                (
                    "correction_count",
                    models.IntegerField(
                        default=0, help_text="How many times users corrected input"
                    ),
                ),
                (
                    "completion_rate",
                    models.FloatField(
                        default=0,
                        help_text="Percentage of users who completed this field",
                    ),
                ),
                (
                    "date",
                    models.DateField(help_text="Date this metric was calculated for"),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "field_completion_metrics",
            },
        ),
        migrations.CreateModel(
            name="FieldDependency",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "source_field_id",
                    models.CharField(
                        help_text="Field that triggers the dependency", max_length=100
                    ),
                ),
                (
                    "target_field_ids",
                    models.JSONField(
                        default=list,
                        help_text="Fields to be auto-populated",
                        verbose_name=models.CharField(max_length=100),
                    ),
                ),
                (
                    "dependency_type",
                    models.CharField(
                        choices=[
                            ("api", "External API"),
                            ("database", "Database Lookup"),
                            ("calculation", "Calculated Value"),
                            ("conditional", "Conditional Logic"),
                            ("cross_form", "Cross-Form Dependency"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "api_endpoint",
                    models.URLField(blank=True, help_text="External API endpoint"),
                ),
                (
                    "api_method",
                    models.CharField(
                        choices=[("GET", "GET"), ("POST", "POST")],
                        default="GET",
                        max_length=10,
                    ),
                ),
                ("api_headers", models.JSONField(blank=True, default=dict)),
                (
                    "api_params_template",
                    models.JSONField(
                        default=dict, help_text="Parameter mapping template"
                    ),
                ),
                (
                    "response_mapping",
                    models.JSONField(
                        default=dict, help_text="Map API response to form fields"
                    ),
                ),
                ("lookup_table", models.CharField(blank=True, max_length=100)),
                ("lookup_query", models.JSONField(blank=True, default=dict)),
                (
                    "calculation_formula",
                    models.TextField(
                        blank=True, help_text="Python expression for calculation"
                    ),
                ),
                (
                    "cache_duration",
                    models.IntegerField(
                        default=3600, help_text="Cache API results in seconds"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                (
                    "priority",
                    models.IntegerField(
                        default=0, help_text="Execution order priority"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "field_dependencies",
                "ordering": ["priority", "created_at"],
            },
        ),
        migrations.CreateModel(
            name="FieldPrediction",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("field_type", models.CharField(max_length=50)),
                (
                    "prediction_rule",
                    models.JSONField(
                        default=dict,
                        help_text="Rule for prediction (e.g., ZIP -> City mapping)",
                    ),
                ),
                (
                    "ml_model_id",
                    models.CharField(
                        blank=True,
                        help_text="ML model identifier if used",
                        max_length=100,
                    ),
                ),
                (
                    "confidence_threshold",
                    models.DecimalField(
                        decimal_places=2,
                        default=0.7,
                        help_text="Minimum confidence to show prediction",
                        max_digits=4,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                (
                    "accuracy_rate",
                    models.DecimalField(
                        decimal_places=2,
                        default=0.0,
                        help_text="Historical accuracy percentage",
                        max_digits=5,
                    ),
                ),
                ("usage_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "field_predictions",
            },
        ),
        migrations.CreateModel(
            name="FormBenchmark",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "category",
                    models.CharField(
                        help_text="Form category for comparison", max_length=100
                    ),
                ),
                ("industry", models.CharField(blank=True, max_length=100)),
                ("form_conversion_rate", models.FloatField()),
                ("category_avg_conversion_rate", models.FloatField()),
                ("category_median_conversion_rate", models.FloatField()),
                (
                    "percentile_rank",
                    models.IntegerField(help_text="Where this form ranks (0-100)"),
                ),
                ("form_completion_time", models.FloatField(help_text="Seconds")),
                ("category_avg_completion_time", models.FloatField()),
                ("form_field_count", models.IntegerField()),
                ("category_avg_field_count", models.FloatField()),
                (
                    "strengths",
                    models.JSONField(
                        blank=True,
                        default=list,
                        verbose_name=models.CharField(max_length=200),
                    ),
                ),
                (
                    "weaknesses",
                    models.JSONField(
                        blank=True,
                        default=list,
                        verbose_name=models.CharField(max_length=200),
                    ),
                ),
                ("benchmark_date", models.DateField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_benchmarks",
                "ordering": ["-benchmark_date"],
            },
        ),
        migrations.CreateModel(
            name="FormBuilderAutoSave",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "temp_id",
                    models.CharField(blank=True, db_index=True, max_length=100),
                ),
                ("schema_json", models.JSONField(default=dict)),
                ("settings_json", models.JSONField(default=dict)),
                ("title", models.CharField(blank=True, max_length=500)),
                ("description", models.TextField(blank=True)),
                (
                    "editor_state",
                    models.JSONField(
                        default=dict,
                        help_text="Editor UI state (selected field, scroll position, etc.)",
                    ),
                ),
                ("is_recovered", models.BooleanField(default=False)),
                ("recovered_at", models.DateTimeField(blank=True, null=True)),
                ("browser_session_id", models.CharField(blank=True, max_length=100)),
                ("device_info", models.JSONField(default=dict)),
                ("last_saved_at", models.DateTimeField(auto_now=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_builder_autosaves",
                "ordering": ["-last_saved_at"],
            },
        ),
        migrations.CreateModel(
            name="FormBuilderCrashRecovery",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Recovery"),
                            ("recovered", "Recovered"),
                            ("dismissed", "Dismissed"),
                            ("expired", "Expired"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                (
                    "crash_reason",
                    models.CharField(
                        choices=[
                            ("browser_crash", "Browser Crash"),
                            ("tab_closed", "Tab Closed"),
                            ("session_expired", "Session Expired"),
                            ("network_error", "Network Error"),
                            ("unknown", "Unknown"),
                        ],
                        default="unknown",
                        max_length=50,
                    ),
                ),
                ("unsaved_changes_summary", models.JSONField(default=dict)),
                (
                    "estimated_work_time",
                    models.IntegerField(
                        default=0, help_text="Estimated minutes of work"
                    ),
                ),
                ("expires_at", models.DateTimeField()),
                ("recovered_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_builder_crash_recoveries",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormCacheConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "strategy",
                    models.CharField(
                        choices=[
                            (
                                "aggressive",
                                "Aggressive - Cache everything, refresh on publish",
                            ),
                            ("balanced", "Balanced - Cache with periodic refresh"),
                            ("minimal", "Minimal - Cache only static assets"),
                            ("none", "No Caching"),
                        ],
                        default="balanced",
                        max_length=20,
                    ),
                ),
                (
                    "cache_ttl",
                    models.IntegerField(default=3600, help_text="Cache TTL in seconds"),
                ),
                ("cdn_enabled", models.BooleanField(default=False)),
                ("cdn_purge_on_update", models.BooleanField(default=True)),
                ("lazy_load_images", models.BooleanField(default=True)),
                (
                    "lazy_load_fields",
                    models.BooleanField(
                        default=True, help_text="Lazy load fields below the fold"
                    ),
                ),
                (
                    "lazy_load_threshold",
                    models.IntegerField(
                        default=5, help_text="Number of fields visible initially"
                    ),
                ),
                ("auto_optimize_images", models.BooleanField(default=True)),
                (
                    "image_quality",
                    models.IntegerField(default=85, help_text="JPEG quality 1-100"),
                ),
                ("max_image_width", models.IntegerField(default=1920)),
                ("convert_to_webp", models.BooleanField(default=True)),
                ("prefetch_next_step", models.BooleanField(default=True)),
                ("preload_fonts", models.BooleanField(default=True)),
                ("last_cache_purge", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_cache_configs",
            },
        ),
        migrations.CreateModel(
            name="FormChange",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "change_type",
                    models.CharField(
                        choices=[
                            ("field_added", "Field Added"),
                            ("field_updated", "Field Updated"),
                            ("field_deleted", "Field Deleted"),
                            ("field_reordered", "Field Reordered"),
                            ("logic_added", "Logic Added"),
                            ("logic_updated", "Logic Updated"),
                            ("logic_deleted", "Logic Deleted"),
                            ("settings_updated", "Settings Updated"),
                            ("title_updated", "Title Updated"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "field_id",
                    models.CharField(
                        blank=True, help_text="ID of affected field", max_length=100
                    ),
                ),
                ("previous_value", models.JSONField(blank=True, null=True)),
                ("new_value", models.JSONField(blank=True, null=True)),
                (
                    "change_path",
                    models.CharField(
                        blank=True,
                        help_text="JSON path to changed property (e.g., 'fields.0.label')",
                        max_length=500,
                    ),
                ),
                (
                    "is_synced",
                    models.BooleanField(
                        default=False, help_text="Synced to other clients"
                    ),
                ),
                ("conflict_resolved", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_changes",
                "ordering": ["created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormClone",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("include_logic", models.BooleanField(default=True)),
                ("include_integrations", models.BooleanField(default=False)),
                ("include_styling", models.BooleanField(default=True)),
                ("include_settings", models.BooleanField(default=True)),
                (
                    "modifications",
                    models.JSONField(
                        default=dict, help_text="Modifications made during cloning"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_clones",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormCollaborator",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "role",
                    models.CharField(
                        choices=[
                            ("owner", "Owner"),
                            ("editor", "Editor"),
                            ("reviewer", "Reviewer"),
                            ("viewer", "Viewer"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "permissions",
                    models.JSONField(
                        default=dict,
                        help_text="Granular permissions (edit_fields, edit_settings, publish, etc.)",
                    ),
                ),
                ("invitation_accepted", models.BooleanField(default=False)),
                ("last_active_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_collaborators",
            },
        ),
        migrations.CreateModel(
            name="FormEditSession",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "session_id",
                    models.CharField(
                        help_text="WebSocket session ID", max_length=100, unique=True
                    ),
                ),
                (
                    "cursor_position",
                    models.JSONField(
                        default=dict,
                        help_text="Current cursor/selection position in form editor",
                    ),
                ),
                (
                    "active_field",
                    models.CharField(
                        blank=True,
                        help_text="Field currently being edited",
                        max_length=100,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("last_activity_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_edit_sessions",
            },
        ),
        migrations.CreateModel(
            name="FormFunnel",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(default="Default Funnel", max_length=255)),
                (
                    "steps",
                    models.JSONField(
                        default=list,
                        help_text="List of step configurations with labels and conditions",
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_funnels",
            },
        ),
        migrations.CreateModel(
            name="FormHeatmapData",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "field_id",
                    models.CharField(
                        blank=True,
                        help_text="Field ID or empty for general form",
                        max_length=100,
                    ),
                ),
                (
                    "interaction_type",
                    models.CharField(
                        choices=[
                            ("click", "Click"),
                            ("hover", "Hover"),
                            ("scroll", "Scroll"),
                            ("focus", "Focus"),
                        ],
                        max_length=20,
                    ),
                ),
                ("x_position", models.FloatField(help_text="X position as percentage")),
                ("y_position", models.FloatField(help_text="Y position as percentage")),
                ("interaction_count", models.IntegerField(default=1)),
                (
                    "avg_duration_ms",
                    models.FloatField(
                        default=0, help_text="Average interaction duration"
                    ),
                ),
                (
                    "device_type",
                    models.CharField(
                        choices=[
                            ("desktop", "Desktop"),
                            ("mobile", "Mobile"),
                            ("tablet", "Tablet"),
                        ],
                        default="desktop",
                        max_length=20,
                    ),
                ),
                ("date", models.DateField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_heatmap_data",
            },
        ),
        migrations.CreateModel(
            name="FormIntegration",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "integration_id",
                    models.CharField(
                        help_text="ID from marketplace catalog", max_length=100
                    ),
                ),
                ("name", models.CharField(max_length=255)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Setup"),
                            ("connected", "Connected"),
                            ("error", "Connection Error"),
                            ("disabled", "Disabled"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                (
                    "auth_type",
                    models.CharField(
                        choices=[
                            ("oauth", "OAuth 2.0"),
                            ("api_key", "API Key"),
                            ("webhook", "Webhook"),
                            ("basic", "Basic Auth"),
                        ],
                        default="api_key",
                        max_length=20,
                    ),
                ),
                (
                    "credentials",
                    models.JSONField(default=dict, help_text="Encrypted credentials"),
                ),
                (
                    "config",
                    models.JSONField(
                        default=dict, help_text="Integration-specific settings"
                    ),
                ),
                (
                    "field_mapping",
                    models.JSONField(
                        default=dict,
                        help_text="Form field to integration field mapping",
                    ),
                ),
                ("sync_on_submit", models.BooleanField(default=True)),
                ("sync_on_update", models.BooleanField(default=False)),
                ("last_sync_at", models.DateTimeField(blank=True, null=True)),
                ("last_sync_status", models.CharField(blank=True, max_length=20)),
                ("sync_error", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_integrations",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormLifecycleEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("created", "Created"),
                            ("published", "Published"),
                            ("activated", "Activated"),
                            ("paused", "Paused"),
                            ("expired", "Expired"),
                            ("archived", "Archived"),
                            ("cloned", "Cloned"),
                            ("deleted", "Deleted"),
                            ("submission_limit_reached", "Submission Limit Reached"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "automated",
                    models.BooleanField(
                        default=False, help_text="Whether event was automated"
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        default=dict, help_text="Additional event context"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_lifecycle_events",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormNotification",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "notification_type",
                    models.CharField(
                        choices=[
                            ("form_reminder", "Form Reminder"),
                            ("form_updated", "Form Updated"),
                            ("submission_received", "Submission Received"),
                            ("deadline_approaching", "Deadline Approaching"),
                            ("custom", "Custom"),
                        ],
                        max_length=50,
                    ),
                ),
                ("title", models.CharField(max_length=200)),
                ("body", models.TextField()),
                (
                    "data",
                    models.JSONField(
                        default=dict, help_text="Additional notification data"
                    ),
                ),
                ("icon_url", models.URLField(blank=True)),
                ("action_url", models.URLField(blank=True)),
                ("sent_at", models.DateTimeField(blank=True, null=True)),
                ("delivered_at", models.DateTimeField(blank=True, null=True)),
                ("clicked_at", models.DateTimeField(blank=True, null=True)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_notifications",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormOptimizationRecommendation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "recommendation_type",
                    models.CharField(
                        choices=[
                            ("field_order", "Field Reordering"),
                            ("field_removal", "Remove Field"),
                            ("field_addition", "Add Field"),
                            ("field_type", "Change Field Type"),
                            ("label_improvement", "Improve Label"),
                            ("validation_adjustment", "Adjust Validation"),
                            ("conditional_logic", "Add Conditional Logic"),
                            ("styling", "Styling Improvement"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Review"),
                            ("applied", "Applied"),
                            ("dismissed", "Dismissed"),
                            ("testing", "In A/B Test"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("title", models.CharField(max_length=200)),
                ("description", models.TextField()),
                (
                    "reasoning",
                    models.TextField(help_text="Why this recommendation was made"),
                ),
                (
                    "estimated_improvement",
                    models.FloatField(
                        help_text="Estimated % improvement in conversion"
                    ),
                ),
                (
                    "confidence_score",
                    models.FloatField(
                        default=0.5, help_text="0-1 confidence in recommendation"
                    ),
                ),
                (
                    "changes_json",
                    models.JSONField(
                        default=dict, help_text="Specific changes to apply"
                    ),
                ),
                (
                    "affected_fields",
                    models.JSONField(
                        blank=True,
                        default=list,
                        verbose_name=models.CharField(max_length=100),
                    ),
                ),
                ("applied_at", models.DateTimeField(blank=True, null=True)),
                (
                    "actual_improvement",
                    models.FloatField(
                        blank=True,
                        help_text="Measured improvement after applying",
                        null=True,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_optimization_recommendations",
                "ordering": ["-confidence_score", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormPreviewSession",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "preview_as_role",
                    models.CharField(
                        blank=True,
                        help_text="Preview as specific user role",
                        max_length=50,
                    ),
                ),
                (
                    "device_type",
                    models.CharField(
                        choices=[
                            ("desktop", "Desktop"),
                            ("mobile", "Mobile"),
                            ("tablet", "Tablet"),
                        ],
                        default="desktop",
                        max_length=20,
                    ),
                ),
                ("browser_type", models.CharField(blank=True, max_length=50)),
                ("session_token", models.CharField(max_length=255, unique=True)),
                (
                    "test_data",
                    models.JSONField(default=dict, help_text="Pre-filled test data"),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("expires_at", models.DateTimeField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_preview_sessions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormPublishSchedule",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("scheduled_for", models.DateTimeField()),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("scheduled", "Scheduled"),
                            ("published", "Published"),
                            ("cancelled", "Cancelled"),
                            ("failed", "Failed"),
                        ],
                        default="scheduled",
                        max_length=20,
                    ),
                ),
                (
                    "schema_snapshot",
                    models.JSONField(
                        default=dict, help_text="Schema at time of scheduling"
                    ),
                ),
                ("settings_snapshot", models.JSONField(default=dict)),
                ("notify_on_publish", models.BooleanField(default=True)),
                ("auto_unpublish_at", models.DateTimeField(blank=True, null=True)),
                ("published_at", models.DateTimeField(blank=True, null=True)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_publish_schedules",
                "ordering": ["-scheduled_for"],
            },
        ),
        migrations.CreateModel(
            name="FormReview",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "decision",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("approved", "Approved"),
                            ("changes_requested", "Changes Requested"),
                            ("rejected", "Rejected"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("feedback", models.TextField(blank=True)),
                (
                    "change_requests",
                    models.JSONField(
                        default=list, help_text="Specific changes requested by reviewer"
                    ),
                ),
                ("reviewed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_reviews",
            },
        ),
        migrations.CreateModel(
            name="FormReviewWorkflow",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("draft", "Draft"),
                            ("in_review", "In Review"),
                            ("changes_requested", "Changes Requested"),
                            ("approved", "Approved"),
                            ("rejected", "Rejected"),
                        ],
                        default="draft",
                        max_length=20,
                    ),
                ),
                ("submitted_at", models.DateTimeField(blank=True, null=True)),
                ("required_approvals", models.IntegerField(default=1)),
                ("current_approvals", models.IntegerField(default=0)),
                ("auto_publish_on_approval", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_review_workflows",
            },
        ),
        migrations.CreateModel(
            name="FormSchedule",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "start_date",
                    models.DateTimeField(
                        blank=True, help_text="When form becomes active", null=True
                    ),
                ),
                (
                    "end_date",
                    models.DateTimeField(
                        blank=True, help_text="When form expires", null=True
                    ),
                ),
                ("timezone", models.CharField(default="UTC", max_length=100)),
                (
                    "max_submissions",
                    models.IntegerField(
                        blank=True,
                        help_text="Auto-close form after X submissions",
                        null=True,
                    ),
                ),
                (
                    "auto_archive",
                    models.BooleanField(
                        default=False, help_text="Auto-archive when expired"
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("active", "Active"),
                            ("expired", "Expired"),
                            ("cancelled", "Cancelled"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                (
                    "activation_type",
                    models.CharField(
                        choices=[
                            ("immediate", "Immediate"),
                            ("scheduled", "Scheduled"),
                            ("conditional", "Conditional"),
                        ],
                        default="scheduled",
                        max_length=20,
                    ),
                ),
                (
                    "conditional_activation",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Conditions for activation (e.g., another form reaching target)",
                    ),
                ),
                (
                    "notification_settings",
                    models.JSONField(
                        default=dict, help_text="User notifications for schedule events"
                    ),
                ),
                ("activated_at", models.DateTimeField(blank=True, null=True)),
                ("expired_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_schedules",
            },
        ),
        migrations.CreateModel(
            name="FormTestRun",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("running", "Running"),
                            ("passed", "Passed"),
                            ("failed", "Failed"),
                            ("error", "Error"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                (
                    "sample_data",
                    models.JSONField(
                        default=dict, help_text="Sample data used for testing"
                    ),
                ),
                ("total_tests", models.IntegerField(default=0)),
                ("passed_tests", models.IntegerField(default=0)),
                ("failed_tests", models.IntegerField(default=0)),
                ("warnings", models.IntegerField(default=0)),
                (
                    "test_results",
                    models.JSONField(default=dict, help_text="Detailed test results"),
                ),
                (
                    "dry_run_webhooks",
                    models.BooleanField(
                        default=True, help_text="Don't actually send webhooks"
                    ),
                ),
                (
                    "dry_run_integrations",
                    models.BooleanField(
                        default=True, help_text="Don't trigger real integrations"
                    ),
                ),
                ("execution_time_ms", models.IntegerField(default=0)),
                ("started_at", models.DateTimeField(blank=True, null=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "form_test_runs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormTestSuite",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "test_types",
                    models.JSONField(
                        default=list,
                        help_text="Types of tests to run: accessibility, performance, integration, etc.",
                        verbose_name=models.CharField(max_length=50),
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_test_suites",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FormTheme",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("color_overrides", models.JSONField(blank=True, default=dict)),
                ("typography_overrides", models.JSONField(blank=True, default=dict)),
                ("layout_overrides", models.JSONField(blank=True, default=dict)),
                (
                    "mobile_overrides",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Mobile-specific theme adjustments",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_themes",
            },
        ),
        migrations.CreateModel(
            name="FormTranslation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("title", models.CharField(max_length=500)),
                ("description", models.TextField(blank=True)),
                (
                    "schema_translations",
                    models.JSONField(
                        default=dict,
                        help_text="Field labels, placeholders, validation messages translated",
                    ),
                ),
                (
                    "auto_translated",
                    models.BooleanField(
                        default=False,
                        help_text="Whether this was auto-translated by AI",
                    ),
                ),
                (
                    "is_approved",
                    models.BooleanField(
                        default=False, help_text="Manual review approval"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "form_translations",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FunnelStepMetric",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("step_index", models.IntegerField()),
                ("step_name", models.CharField(max_length=255)),
                ("entered_count", models.IntegerField(default=0)),
                ("completed_count", models.IntegerField(default=0)),
                ("dropped_count", models.IntegerField(default=0)),
                ("avg_time_seconds", models.FloatField(default=0)),
                ("conversion_rate", models.FloatField(default=0)),
                ("date", models.DateField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "funnel_step_metrics",
                "ordering": ["step_index"],
            },
        ),
        migrations.CreateModel(
            name="GeneratedContent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "content_type",
                    models.CharField(
                        choices=[
                            ("description", "Form Description"),
                            ("thank_you", "Thank You Message"),
                            ("email_template", "Email Template"),
                            ("sms_template", "SMS Template"),
                            ("help_text", "Field Help Text"),
                            ("placeholder", "Field Placeholder"),
                            ("validation_message", "Validation Message"),
                            ("consent_text", "Consent Text"),
                            ("translation", "Translation"),
                        ],
                        max_length=30,
                    ),
                ),
                (
                    "field_id",
                    models.CharField(
                        blank=True,
                        help_text="If content is for specific field",
                        max_length=255,
                    ),
                ),
                ("content", models.JSONField(help_text="Generated content")),
                ("language", models.CharField(default="en", max_length=10)),
                ("prompt_used", models.TextField(blank=True)),
                ("model_used", models.CharField(default="gpt-4", max_length=50)),
                ("is_applied", models.BooleanField(default=False)),
                ("applied_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "generated_content",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="GeolocationField",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("latitude", models.DecimalField(decimal_places=7, max_digits=10)),
                ("longitude", models.DecimalField(decimal_places=7, max_digits=10)),
                ("accuracy", models.FloatField(help_text="Accuracy in meters")),
                ("altitude", models.FloatField(blank=True, null=True)),
                (
                    "address",
                    models.JSONField(
                        blank=True, default=dict, help_text="Reverse geocoded address"
                    ),
                ),
                ("timestamp", models.DateTimeField()),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "geolocation_fields",
            },
        ),
        migrations.CreateModel(
            name="IntegrationConnection",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="User-friendly name for this connection",
                        max_length=200,
                    ),
                ),
                (
                    "credentials",
                    models.JSONField(
                        default=dict,
                        help_text="Encrypted auth tokens, API keys, or OAuth tokens",
                    ),
                ),
                (
                    "oauth_data",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="OAuth tokens, refresh tokens, expiry",
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("last_sync_at", models.DateTimeField(blank=True, null=True)),
                ("error_count", models.IntegerField(default=0)),
                ("last_error", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "integration_connections",
            },
        ),
        migrations.CreateModel(
            name="IntegrationProvider",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=100)),
                ("slug", models.SlugField(max_length=100, unique=True)),
                (
                    "category",
                    models.CharField(
                        choices=[
                            ("crm", "CRM"),
                            ("email", "Email Marketing"),
                            ("productivity", "Productivity"),
                            ("analytics", "Analytics"),
                            ("payment", "Payment"),
                            ("storage", "Storage"),
                            ("communication", "Communication"),
                            ("other", "Other"),
                        ],
                        max_length=50,
                    ),
                ),
                ("description", models.TextField()),
                ("logo_url", models.URLField(blank=True)),
                ("api_base_url", models.URLField()),
                (
                    "auth_type",
                    models.CharField(
                        choices=[
                            ("oauth", "OAuth 2.0"),
                            ("api_key", "API Key"),
                            ("basic", "Basic Auth"),
                        ],
                        default="api_key",
                        max_length=20,
                    ),
                ),
                ("documentation_url", models.URLField(blank=True)),
                ("is_active", models.BooleanField(default=True)),
                ("is_premium", models.BooleanField(default=False)),
                ("popularity_score", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "integration_providers",
                "ordering": ["-popularity_score", "name"],
            },
        ),
        migrations.CreateModel(
            name="IntegrationTemplate",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField()),
                (
                    "use_case",
                    models.CharField(
                        help_text="e.g., 'Sync leads to Google Sheets'", max_length=200
                    ),
                ),
                ("icon", models.CharField(blank=True, max_length=50)),
                (
                    "config_template",
                    models.JSONField(
                        default=dict,
                        help_text="Pre-configured workflow or webhook settings",
                    ),
                ),
                (
                    "required_fields",
                    models.JSONField(
                        default=list, help_text="List of fields user must configure"
                    ),
                ),
                ("is_featured", models.BooleanField(default=False)),
                ("usage_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "integration_templates",
                "ordering": ["-is_featured", "-usage_count"],
            },
        ),
        migrations.CreateModel(
            name="IntegrationWorkflow",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "trigger_type",
                    models.CharField(
                        choices=[
                            ("form_submit", "New Form Submission"),
                            ("form_complete", "Form Completed"),
                            ("field_value", "Specific Field Value"),
                            ("schedule", "Scheduled"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "trigger_config",
                    models.JSONField(
                        default=dict, help_text="Trigger conditions and filters"
                    ),
                ),
                (
                    "actions",
                    models.JSONField(
                        default=list,
                        help_text="List of actions to execute (e.g., create CRM contact, send email)",
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("execution_count", models.IntegerField(default=0)),
                ("success_count", models.IntegerField(default=0)),
                ("failure_count", models.IntegerField(default=0)),
                ("last_executed_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "integration_workflows",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="IPAccessControl",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "access_type",
                    models.CharField(
                        choices=[
                            ("whitelist", "Whitelist"),
                            ("blacklist", "Blacklist"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "ip_ranges",
                    models.JSONField(
                        default=list, help_text="List of IP addresses or CIDR ranges"
                    ),
                ),
                (
                    "countries",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Country codes (ISO 3166-1 alpha-2)",
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "ip_access_controls",
            },
        ),
        migrations.CreateModel(
            name="IPReputationCache",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("ip_address", models.GenericIPAddressField(unique=True)),
                (
                    "reputation_score",
                    models.IntegerField(default=50, help_text="0-100, lower is worse"),
                ),
                ("is_vpn", models.BooleanField(default=False)),
                ("is_proxy", models.BooleanField(default=False)),
                ("is_tor", models.BooleanField(default=False)),
                ("is_datacenter", models.BooleanField(default=False)),
                ("country_code", models.CharField(blank=True, max_length=2)),
                ("asn", models.CharField(blank=True, max_length=50)),
                ("total_submissions", models.IntegerField(default=0)),
                ("spam_submissions", models.IntegerField(default=0)),
                ("last_seen_at", models.DateTimeField(auto_now=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("expires_at", models.DateTimeField(help_text="Cache expiration")),
            ],
            options={
                "db_table": "ip_reputation_cache",
            },
        ),
        migrations.CreateModel(
            name="Language",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "code",
                    models.CharField(
                        help_text="ISO 639-1 language code (e.g., 'en', 'es', 'ar')",
                        max_length=10,
                        unique=True,
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Language name in English", max_length=100
                    ),
                ),
                (
                    "native_name",
                    models.CharField(
                        help_text="Language name in native script", max_length=100
                    ),
                ),
                (
                    "is_rtl",
                    models.BooleanField(
                        default=False, help_text="Right-to-left language"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("flag_emoji", models.CharField(blank=True, max_length=10)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "languages",
                "ordering": ["name"],
            },
        ),
        migrations.CreateModel(
            name="MobileAnalytics",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("device_type", models.CharField(max_length=50)),
                ("os", models.CharField(max_length=50)),
                ("os_version", models.CharField(max_length=50)),
                ("browser", models.CharField(max_length=50)),
                ("screen_resolution", models.CharField(max_length=50)),
                ("touch_interactions", models.IntegerField(default=0)),
                ("swipe_actions", models.IntegerField(default=0)),
                ("camera_uses", models.IntegerField(default=0)),
                ("geolocation_uses", models.IntegerField(default=0)),
                (
                    "load_time_ms",
                    models.IntegerField(help_text="Form load time in milliseconds"),
                ),
                (
                    "completion_time_s",
                    models.IntegerField(help_text="Time to complete in seconds"),
                ),
                (
                    "offline_duration_s",
                    models.IntegerField(
                        default=0, help_text="Time spent in offline mode"
                    ),
                ),
                ("session_id", models.CharField(max_length=100)),
                ("submitted", models.BooleanField(default=False)),
                ("abandoned", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "mobile_analytics",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="MobileOptimization",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("touch_enabled", models.BooleanField(default=True)),
                (
                    "button_size",
                    models.CharField(
                        choices=[
                            ("small", "Small"),
                            ("medium", "Medium"),
                            ("large", "Large"),
                        ],
                        default="large",
                        max_length=20,
                    ),
                ),
                ("swipe_gestures_enabled", models.BooleanField(default=True)),
                (
                    "camera_enabled",
                    models.BooleanField(
                        default=False, help_text="Enable camera for file uploads"
                    ),
                ),
                ("qr_scanner_enabled", models.BooleanField(default=False)),
                ("offline_mode_enabled", models.BooleanField(default=True)),
                (
                    "cache_strategy",
                    models.CharField(
                        choices=[
                            ("cache_first", "Cache First"),
                            ("network_first", "Network First"),
                            ("cache_only", "Cache Only"),
                        ],
                        default="network_first",
                        max_length=50,
                    ),
                ),
                ("max_cache_size_mb", models.IntegerField(default=50)),
                ("push_notifications_enabled", models.BooleanField(default=False)),
                (
                    "notification_events",
                    models.JSONField(
                        default=list,
                        help_text="Events that trigger notifications (e.g., ['form_updated', 'reminder'])",
                    ),
                ),
                ("geolocation_enabled", models.BooleanField(default=False)),
                ("auto_detect_location", models.BooleanField(default=False)),
                (
                    "location_accuracy",
                    models.CharField(
                        choices=[
                            ("high", "High"),
                            ("medium", "Medium"),
                            ("low", "Low"),
                        ],
                        default="medium",
                        max_length=20,
                    ),
                ),
                ("single_column_layout", models.BooleanField(default=True)),
                ("fixed_header", models.BooleanField(default=True)),
                (
                    "progress_indicator_style",
                    models.CharField(
                        choices=[
                            ("bar", "Progress Bar"),
                            ("steps", "Step Indicator"),
                            ("percentage", "Percentage"),
                        ],
                        default="bar",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "mobile_optimizations",
            },
        ),
        migrations.CreateModel(
            name="NurturingWorkflow",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=255)),
                ("description", models.TextField(blank=True)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("draft", "Draft"),
                            ("active", "Active"),
                            ("paused", "Paused"),
                            ("archived", "Archived"),
                        ],
                        default="draft",
                        max_length=20,
                    ),
                ),
                (
                    "trigger_type",
                    models.CharField(
                        choices=[
                            ("submission", "Form Submission"),
                            ("score_threshold", "Lead Score Threshold"),
                            ("abandonment", "Form Abandonment"),
                            ("time_delay", "Time After Previous Action"),
                            ("webhook", "External Webhook"),
                        ],
                        default="submission",
                        max_length=30,
                    ),
                ),
                (
                    "trigger_conditions",
                    models.JSONField(
                        default=dict, help_text="Conditions to trigger workflow"
                    ),
                ),
                (
                    "actions",
                    models.JSONField(
                        default=list, help_text="List of actions in sequence"
                    ),
                ),
                ("is_active", models.BooleanField(default=False)),
                ("total_triggered", models.IntegerField(default=0)),
                ("total_completed", models.IntegerField(default=0)),
                ("total_failed", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "nurturing_workflows",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="OfflineFormDraft",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("offline_id", models.CharField(max_length=100, unique=True)),
                ("schema_json", models.JSONField(default=dict)),
                ("settings_json", models.JSONField(default=dict)),
                ("title", models.CharField(max_length=500)),
                (
                    "sync_status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Sync"),
                            ("syncing", "Syncing"),
                            ("synced", "Synced"),
                            ("conflict", "Conflict"),
                            ("failed", "Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("has_conflict", models.BooleanField(default=False)),
                ("server_version", models.JSONField(blank=True, default=dict)),
                ("conflict_resolved", models.BooleanField(default=False)),
                (
                    "resolution_choice",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("keep_local", "Keep Local"),
                            ("keep_server", "Keep Server"),
                            ("merge", "Merge"),
                        ],
                        max_length=20,
                    ),
                ),
                ("created_offline_at", models.DateTimeField()),
                ("last_modified_offline_at", models.DateTimeField()),
                ("synced_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "offline_form_drafts",
                "ordering": ["-last_modified_offline_at"],
            },
        ),
        migrations.CreateModel(
            name="OfflineSubmission",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "device_id",
                    models.CharField(
                        help_text="Unique device identifier", max_length=200
                    ),
                ),
                (
                    "submission_data",
                    models.JSONField(help_text="Complete submission data"),
                ),
                (
                    "files_metadata",
                    models.JSONField(
                        default=list,
                        help_text="Metadata for attached files (uploaded separately)",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Sync"),
                            ("syncing", "Syncing"),
                            ("synced", "Synced"),
                            ("failed", "Sync Failed"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("sync_attempts", models.IntegerField(default=0)),
                ("last_sync_attempt", models.DateTimeField(blank=True, null=True)),
                ("sync_error", models.TextField(blank=True)),
                (
                    "synced_submission_id",
                    models.UUIDField(
                        blank=True, help_text="ID of synced submission", null=True
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        help_text="When offline submission was created"
                    ),
                ),
                ("synced_at", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "offline_submissions",
                "ordering": ["created_at"],
            },
        ),
        migrations.CreateModel(
            name="OptimizationReport",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("report_period_start", models.DateField()),
                ("report_period_end", models.DateField()),
                ("total_recommendations", models.IntegerField(default=0)),
                ("high_priority_recommendations", models.IntegerField(default=0)),
                (
                    "conversion_rate_change",
                    models.FloatField(default=0, help_text="% change"),
                ),
                (
                    "completion_time_change",
                    models.FloatField(default=0, help_text="% change"),
                ),
                (
                    "drop_off_rate_change",
                    models.FloatField(default=0, help_text="% change"),
                ),
                (
                    "report_data",
                    models.JSONField(default=dict, help_text="Detailed report content"),
                ),
                (
                    "sent_to_users",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="User IDs who received this report",
                        verbose_name=models.UUIDField(),
                    ),
                ),
                ("sent_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "optimization_reports",
                "ordering": ["-report_period_end"],
            },
        ),
        migrations.CreateModel(
            name="OptimizationSuggestion",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "category",
                    models.CharField(
                        choices=[
                            ("conversion", "Conversion Rate"),
                            ("completion", "Completion Rate"),
                            ("abandonment", "Reduce Abandonment"),
                            ("engagement", "Engagement"),
                            ("accessibility", "Accessibility"),
                            ("performance", "Performance"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("high", "High"),
                            ("medium", "Medium"),
                            ("low", "Low"),
                        ],
                        default="medium",
                        max_length=10,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Review"),
                            ("applied", "Applied"),
                            ("dismissed", "Dismissed"),
                            ("testing", "In A/B Test"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("title", models.CharField(max_length=255)),
                ("description", models.TextField()),
                (
                    "expected_impact",
                    models.CharField(
                        help_text="e.g., '+15% conversion'", max_length=100
                    ),
                ),
                ("target_field_id", models.CharField(blank=True, max_length=255)),
                ("current_value", models.JSONField(default=dict)),
                ("suggested_value", models.JSONField(default=dict)),
                ("applied_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "optimization_suggestions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PerformanceAlert",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "alert_type",
                    models.CharField(
                        choices=[
                            ("slow_load", "Slow Load Time"),
                            ("high_error_rate", "High Error Rate"),
                            ("drop_off_spike", "Drop-off Rate Spike"),
                            ("cache_miss", "High Cache Miss Rate"),
                            ("slow_field", "Slow Field Completion"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("info", "Info"),
                            ("warning", "Warning"),
                            ("critical", "Critical"),
                        ],
                        default="warning",
                        max_length=20,
                    ),
                ),
                ("message", models.TextField()),
                ("metric_value", models.FloatField()),
                ("threshold_value", models.FloatField()),
                ("details", models.JSONField(default=dict)),
                ("is_acknowledged", models.BooleanField(default=False)),
                ("acknowledged_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "performance_alerts",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PerformanceMetric",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "metric_type",
                    models.CharField(
                        choices=[
                            ("load_time", "Page Load Time"),
                            ("ttfb", "Time to First Byte"),
                            ("fcp", "First Contentful Paint"),
                            ("lcp", "Largest Contentful Paint"),
                            ("fid", "First Input Delay"),
                            ("cls", "Cumulative Layout Shift"),
                            ("tti", "Time to Interactive"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "value",
                    models.FloatField(
                        help_text="Metric value in milliseconds or score"
                    ),
                ),
                (
                    "device_type",
                    models.CharField(
                        choices=[
                            ("desktop", "Desktop"),
                            ("mobile", "Mobile"),
                            ("tablet", "Tablet"),
                        ],
                        default="desktop",
                        max_length=20,
                    ),
                ),
                (
                    "connection_type",
                    models.CharField(
                        choices=[
                            ("4g", "4G"),
                            ("3g", "3G"),
                            ("2g", "2G"),
                            ("slow-2g", "Slow 2G"),
                            ("wifi", "WiFi"),
                        ],
                        default="wifi",
                        max_length=20,
                    ),
                ),
                ("user_agent", models.CharField(blank=True, max_length=500)),
                ("browser", models.CharField(blank=True, max_length=50)),
                ("browser_version", models.CharField(blank=True, max_length=20)),
                ("os", models.CharField(blank=True, max_length=50)),
                ("country", models.CharField(blank=True, max_length=50)),
                ("region", models.CharField(blank=True, max_length=100)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "performance_metrics",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PersonalizationRule",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=255)),
                ("is_active", models.BooleanField(default=True)),
                (
                    "priority",
                    models.IntegerField(
                        default=0, help_text="Higher priority rules run first"
                    ),
                ),
                (
                    "trigger_type",
                    models.CharField(
                        choices=[
                            ("url_param", "URL Parameter"),
                            ("cookie", "Cookie Value"),
                            ("user_attribute", "User Attribute"),
                            ("crm_data", "CRM Data"),
                            ("time", "Time-based"),
                            ("location", "Geolocation"),
                            ("device", "Device Type"),
                            ("referrer", "Referrer"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "trigger_config",
                    models.JSONField(
                        default=dict, help_text="Trigger-specific configuration"
                    ),
                ),
                (
                    "action_type",
                    models.CharField(
                        choices=[
                            ("prefill", "Prefill Field"),
                            ("show", "Show Field"),
                            ("hide", "Hide Field"),
                            ("modify_options", "Modify Options"),
                            ("change_text", "Change Text"),
                            ("redirect", "Redirect"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "action_config",
                    models.JSONField(
                        default=dict, help_text="Action-specific configuration"
                    ),
                ),
                ("times_triggered", models.IntegerField(default=0)),
                ("last_triggered_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "personalization_rules",
                "ordering": ["-priority", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PredictionFeedback",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("predicted_value", models.JSONField()),
                ("actual_value", models.JSONField()),
                (
                    "was_accepted",
                    models.BooleanField(help_text="Did user accept the prediction?"),
                ),
                (
                    "confidence_score",
                    models.DecimalField(decimal_places=2, max_digits=4),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "prediction_feedback",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ProgressiveDisclosure",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "disclosure_strategy",
                    models.CharField(
                        choices=[
                            ("basic_first", "Basic Fields First"),
                            ("conditional", "Conditional Disclosure"),
                            ("ai_adaptive", "AI Adaptive"),
                        ],
                        default="basic_first",
                        max_length=50,
                    ),
                ),
                (
                    "basic_fields",
                    models.JSONField(
                        default=list, help_text="List of field IDs shown initially"
                    ),
                ),
                (
                    "advanced_fields",
                    models.JSONField(
                        default=list, help_text="List of field IDs shown after basics"
                    ),
                ),
                (
                    "disclosure_rules",
                    models.JSONField(
                        default=dict, help_text="Conditions for revealing fields"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "progressive_disclosures",
            },
        ),
        migrations.CreateModel(
            name="PushNotificationSubscription",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("device_id", models.CharField(max_length=200, unique=True)),
                ("endpoint", models.URLField(help_text="Push service endpoint")),
                ("auth_key", models.CharField(max_length=500)),
                ("p256dh_key", models.CharField(max_length=500)),
                (
                    "device_type",
                    models.CharField(
                        choices=[
                            ("android", "Android"),
                            ("ios", "iOS"),
                            ("web", "Web"),
                        ],
                        default="web",
                        max_length=20,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "push_notification_subscriptions",
            },
        ),
        migrations.CreateModel(
            name="QRCodeScan",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("scanned_data", models.TextField(help_text="Data from QR code")),
                (
                    "field_id",
                    models.CharField(
                        help_text="Field where QR data was used", max_length=100
                    ),
                ),
                ("device_type", models.CharField(max_length=50)),
                ("success", models.BooleanField(default=True)),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "qr_code_scans",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="RecurringForm",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "frequency",
                    models.CharField(
                        choices=[
                            ("daily", "Daily"),
                            ("weekly", "Weekly"),
                            ("monthly", "Monthly"),
                            ("quarterly", "Quarterly"),
                            ("yearly", "Yearly"),
                            ("custom", "Custom"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "interval",
                    models.IntegerField(
                        default=1, help_text="Every X days/weeks/months"
                    ),
                ),
                ("start_date", models.DateTimeField()),
                (
                    "end_date",
                    models.DateTimeField(
                        blank=True, help_text="When to stop creating forms", null=True
                    ),
                ),
                (
                    "day_of_week",
                    models.IntegerField(
                        blank=True,
                        help_text="For weekly: 0=Monday, 6=Sunday",
                        null=True,
                    ),
                ),
                (
                    "day_of_month",
                    models.IntegerField(
                        blank=True, help_text="For monthly: 1-31", null=True
                    ),
                ),
                ("timezone", models.CharField(default="UTC", max_length=100)),
                (
                    "auto_publish",
                    models.BooleanField(
                        default=True, help_text="Auto-publish cloned forms"
                    ),
                ),
                (
                    "naming_pattern",
                    models.CharField(
                        default="{title} - {date}",
                        help_text="Pattern for naming cloned forms",
                        max_length=200,
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("last_created_at", models.DateTimeField(blank=True, null=True)),
                ("next_creation_at", models.DateTimeField()),
                ("forms_created_count", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "recurring_forms",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="SecurityAuditLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("login", "User Login"),
                            ("logout", "User Logout"),
                            ("login_failed", "Failed Login"),
                            ("2fa_enabled", "2FA Enabled"),
                            ("2fa_disabled", "2FA Disabled"),
                            ("password_changed", "Password Changed"),
                            ("data_accessed", "Data Accessed"),
                            ("data_exported", "Data Exported"),
                            ("data_deleted", "Data Deleted"),
                            ("permission_changed", "Permission Changed"),
                            ("suspicious_activity", "Suspicious Activity"),
                        ],
                        max_length=50,
                    ),
                ),
                ("ip_address", models.GenericIPAddressField()),
                ("user_agent", models.TextField()),
                (
                    "location",
                    models.JSONField(
                        blank=True, default=dict, help_text="Geolocation data"
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        default=dict, help_text="Additional event context"
                    ),
                ),
                (
                    "risk_level",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                        ],
                        default="low",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "security_audit_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="SecurityScan",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("scan_completed", models.BooleanField(default=False)),
                ("is_malicious", models.BooleanField(default=False)),
                (
                    "threats_detected",
                    models.JSONField(
                        default=list,
                        help_text="List of detected threats (SQL injection, XSS, etc.)",
                    ),
                ),
                (
                    "risk_score",
                    models.IntegerField(default=0, help_text="0-100 risk score"),
                ),
                ("blocked", models.BooleanField(default=False)),
                ("scan_details", models.JSONField(default=dict)),
                ("scanned_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "security_scans",
            },
        ),
        migrations.CreateModel(
            name="SessionEvent",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("page_view", "Page View"),
                            ("field_focus", "Field Focus"),
                            ("field_blur", "Field Blur"),
                            ("field_change", "Field Change"),
                            ("field_error", "Field Error"),
                            ("click", "Click"),
                            ("scroll", "Scroll"),
                            ("mouse_move", "Mouse Move"),
                            ("keypress", "Keypress"),
                            ("form_submit", "Form Submit"),
                            ("form_abandon", "Form Abandon"),
                            ("step_change", "Step Change"),
                            ("rage_click", "Rage Click"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "timestamp",
                    models.BigIntegerField(
                        help_text="Timestamp in milliseconds from session start"
                    ),
                ),
                ("target_element", models.CharField(blank=True, max_length=200)),
                ("field_id", models.CharField(blank=True, max_length=100)),
                ("x_position", models.IntegerField(default=0)),
                ("y_position", models.IntegerField(default=0)),
                ("scroll_position", models.IntegerField(default=0)),
                (
                    "data",
                    models.JSONField(default=dict, help_text="Event-specific data"),
                ),
            ],
            options={
                "db_table": "session_events",
                "ordering": ["timestamp"],
            },
        ),
        migrations.CreateModel(
            name="SessionRecording",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_id", models.CharField(max_length=100, unique=True)),
                ("device_type", models.CharField(default="desktop", max_length=20)),
                ("browser", models.CharField(blank=True, max_length=50)),
                ("os", models.CharField(blank=True, max_length=50)),
                ("screen_width", models.IntegerField(default=0)),
                ("screen_height", models.IntegerField(default=0)),
                ("country", models.CharField(blank=True, max_length=50)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("recording", "Recording"),
                            ("processing", "Processing"),
                            ("ready", "Ready"),
                            ("failed", "Failed"),
                        ],
                        default="recording",
                        max_length=20,
                    ),
                ),
                ("events_count", models.IntegerField(default=0)),
                (
                    "events_data",
                    models.JSONField(default=list, help_text="Compressed event stream"),
                ),
                (
                    "recording_url",
                    models.URLField(
                        blank=True, help_text="URL to stored recording file"
                    ),
                ),
                ("duration_seconds", models.IntegerField(default=0)),
                ("completed_form", models.BooleanField(default=False)),
                ("drop_off_field", models.CharField(blank=True, max_length=100)),
                ("rage_clicks_count", models.IntegerField(default=0)),
                (
                    "u_turns_count",
                    models.IntegerField(
                        default=0, help_text="Navigation back and forth"
                    ),
                ),
                ("started_at", models.DateTimeField()),
                ("ended_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "session_recordings",
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="SmartDefault",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                (
                    "source_type",
                    models.CharField(
                        choices=[
                            ("url_param", "URL Parameter"),
                            ("user_profile", "User Profile"),
                            ("cookie", "Cookie"),
                            ("local_storage", "Local Storage"),
                            ("geolocation", "Geolocation"),
                            ("previous_submission", "Previous Submission"),
                            ("calculation", "Calculation"),
                        ],
                        max_length=50,
                    ),
                ),
                (
                    "source_config",
                    models.JSONField(
                        default=dict,
                        help_text="Configuration for the source (e.g., URL param name, profile field)",
                    ),
                ),
                (
                    "transformation",
                    models.JSONField(
                        blank=True, default=dict, help_text="Data transformation rules"
                    ),
                ),
                ("fallback_value", models.JSONField(blank=True, null=True)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "smart_defaults",
            },
        ),
        migrations.CreateModel(
            name="SpamDetectionConfig",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("honeypot_enabled", models.BooleanField(default=True)),
                ("timing_analysis_enabled", models.BooleanField(default=True)),
                ("pattern_detection_enabled", models.BooleanField(default=True)),
                ("ip_reputation_enabled", models.BooleanField(default=True)),
                ("behavioral_analysis_enabled", models.BooleanField(default=False)),
                (
                    "min_fill_time_seconds",
                    models.IntegerField(
                        default=3, help_text="Minimum time to fill form"
                    ),
                ),
                (
                    "max_fill_time_seconds",
                    models.IntegerField(
                        default=3600, help_text="Maximum reasonable time"
                    ),
                ),
                (
                    "risk_score_threshold",
                    models.IntegerField(
                        default=70, help_text="0-100, block if exceeded"
                    ),
                ),
                (
                    "honeypot_field_name",
                    models.CharField(default="website_url", max_length=100),
                ),
                (
                    "suspicious_patterns",
                    models.JSONField(
                        default=list, help_text="Regex patterns for suspicious content"
                    ),
                ),
                (
                    "blacklisted_emails",
                    models.JSONField(
                        blank=True,
                        default=list,
                        verbose_name=models.CharField(max_length=255),
                    ),
                ),
                (
                    "blacklisted_domains",
                    models.JSONField(
                        blank=True,
                        default=list,
                        verbose_name=models.CharField(max_length=255),
                    ),
                ),
                (
                    "action_on_detection",
                    models.CharField(
                        choices=[
                            ("block", "Block"),
                            ("flag", "Flag for Review"),
                            ("challenge", "Challenge with CAPTCHA"),
                        ],
                        default="flag",
                        max_length=20,
                    ),
                ),
                (
                    "captcha_provider",
                    models.CharField(
                        choices=[
                            ("none", "None"),
                            ("turnstile", "Cloudflare Turnstile"),
                            ("hcaptcha", "hCaptcha"),
                            ("recaptcha", "reCAPTCHA"),
                        ],
                        default="none",
                        max_length=20,
                    ),
                ),
                ("captcha_site_key", models.CharField(blank=True, max_length=255)),
                ("captcha_secret_key", models.CharField(blank=True, max_length=255)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "spam_detection_configs",
            },
        ),
        migrations.CreateModel(
            name="SpamDetectionLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "risk_score",
                    models.IntegerField(default=0, help_text="0-100 spam probability"),
                ),
                ("is_spam", models.BooleanField(default=False)),
                (
                    "detection_reasons",
                    models.JSONField(
                        default=list,
                        help_text="Reasons for spam detection",
                        verbose_name=models.CharField(max_length=200),
                    ),
                ),
                ("honeypot_triggered", models.BooleanField(default=False)),
                ("timing_suspicious", models.BooleanField(default=False)),
                ("pattern_matched", models.BooleanField(default=False)),
                ("ip_blacklisted", models.BooleanField(default=False)),
                ("behavioral_suspicious", models.BooleanField(default=False)),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.CharField(blank=True, max_length=500)),
                ("fill_time_seconds", models.IntegerField(default=0)),
                (
                    "mouse_movements",
                    models.IntegerField(
                        default=0, help_text="Number of mouse movements"
                    ),
                ),
                ("keystrokes", models.IntegerField(default=0)),
                ("field_interactions", models.IntegerField(default=0)),
                (
                    "action_taken",
                    models.CharField(
                        choices=[
                            ("allowed", "Allowed"),
                            ("blocked", "Blocked"),
                            ("flagged", "Flagged"),
                            ("challenged", "Challenged"),
                        ],
                        default="allowed",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "spam_detection_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="SSOProvider",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=100)),
                (
                    "provider_type",
                    models.CharField(
                        choices=[
                            ("google", "Google"),
                            ("microsoft", "Microsoft"),
                            ("saml", "SAML"),
                            ("okta", "Okta"),
                            ("auth0", "Auth0"),
                        ],
                        max_length=50,
                    ),
                ),
                ("client_id", models.CharField(max_length=200)),
                (
                    "client_secret",
                    models.CharField(help_text="Encrypted", max_length=500),
                ),
                ("entity_id", models.CharField(blank=True, max_length=500)),
                ("sso_url", models.URLField(blank=True)),
                ("x509_cert", models.TextField(blank=True)),
                (
                    "domain_restriction",
                    models.JSONField(
                        default=list,
                        help_text="Allowed email domains (e.g., ['company.com'])",
                    ),
                ),
                (
                    "auto_provision",
                    models.BooleanField(
                        default=True, help_text="Auto-create users on first login"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "sso_providers",
            },
        ),
        migrations.CreateModel(
            name="SubmissionComment",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("comment", models.TextField()),
                (
                    "attachments",
                    models.JSONField(
                        blank=True, default=list, help_text="File attachments"
                    ),
                ),
                (
                    "is_internal",
                    models.BooleanField(
                        default=True,
                        help_text="Internal comment not visible to submitter",
                    ),
                ),
                ("is_edited", models.BooleanField(default=False)),
                ("edited_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "submission_comments",
                "ordering": ["created_at"],
            },
        ),
        migrations.CreateModel(
            name="SubmissionNote",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "note_type",
                    models.CharField(
                        choices=[
                            ("note", "Note"),
                            ("flag", "Flag"),
                            ("reminder", "Reminder"),
                            ("todo", "To-Do"),
                        ],
                        default="note",
                        max_length=20,
                    ),
                ),
                ("content", models.TextField()),
                (
                    "color",
                    models.CharField(
                        default="#FCD34D",
                        help_text="Hex color for visual organization",
                        max_length=7,
                    ),
                ),
                ("remind_at", models.DateTimeField(blank=True, null=True)),
                ("is_completed", models.BooleanField(default=False)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "submission_notes",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="SubmissionTranslation",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "translated_data",
                    models.JSONField(
                        default=dict,
                        help_text="Submission data with translated field names",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "submission_translations",
            },
        ),
        migrations.CreateModel(
            name="SubmissionWorkflowStatus",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("assigned_at", models.DateTimeField(blank=True, null=True)),
                ("entered_current_stage_at", models.DateTimeField(auto_now_add=True)),
                ("sla_deadline", models.DateTimeField(blank=True, null=True)),
                ("is_sla_breached", models.BooleanField(default=False)),
                ("notes", models.TextField(blank=True)),
                (
                    "tags",
                    models.JSONField(
                        blank=True,
                        default=list,
                        verbose_name=models.CharField(max_length=100),
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "submission_workflow_statuses",
            },
        ),
        migrations.CreateModel(
            name="TemplateFavorite",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "template_favorites",
            },
        ),
        migrations.CreateModel(
            name="Theme",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "is_public",
                    models.BooleanField(
                        default=False, help_text="Share in theme marketplace"
                    ),
                ),
                ("is_premium", models.BooleanField(default=False)),
                (
                    "colors",
                    models.JSONField(
                        default=dict,
                        help_text='\n    {\n        "primary": "#3B82F6",\n        "secondary": "#8B5CF6",\n        "accent": "#10B981",\n        "background": "#FFFFFF",\n        "surface": "#F3F4F6",\n        "text": "#111827",\n        "textSecondary": "#6B7280",\n        "error": "#EF4444",\n        "success": "#10B981",\n        "warning": "#F59E0B"\n    }\n    ',
                    ),
                ),
                (
                    "typography",
                    models.JSONField(
                        default=dict,
                        help_text='\n    {\n        "fontFamily": "Inter, sans-serif",\n        "headingFont": "Poppins, sans-serif",\n        "fontSize": "16px",\n        "headingSizes": {"h1": "2rem", "h2": "1.5rem", "h3": "1.25rem"}\n    }\n    ',
                    ),
                ),
                (
                    "layout",
                    models.JSONField(
                        default=dict,
                        help_text='\n    {\n        "borderRadius": "8px",\n        "spacing": "medium",\n        "containerWidth": "800px",\n        "fieldSpacing": "20px"\n    }\n    ',
                    ),
                ),
                (
                    "components",
                    models.JSONField(
                        default=dict,
                        help_text='\n    {\n        "button": {"style": "solid", "size": "medium"},\n        "input": {"variant": "outlined", "size": "medium"},\n        "card": {"shadow": "medium", "border": true}\n    }\n    ',
                    ),
                ),
                (
                    "custom_css",
                    models.TextField(
                        blank=True, help_text="Custom CSS (sandboxed for security)"
                    ),
                ),
                (
                    "custom_js",
                    models.TextField(
                        blank=True,
                        help_text="Custom JS (sandboxed, limited to theme behaviors)",
                    ),
                ),
                ("preview_image_url", models.URLField(blank=True)),
                ("downloads_count", models.IntegerField(default=0)),
                (
                    "rating_average",
                    models.DecimalField(decimal_places=2, default=0.0, max_digits=3),
                ),
                ("rating_count", models.IntegerField(default=0)),
                (
                    "brand_guidelines",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Brand rules (e.g., required colors, fonts)",
                    ),
                ),
                ("enforce_guidelines", models.BooleanField(default=False)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "themes",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ThemeRating",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "rating",
                    models.IntegerField(
                        choices=[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]
                    ),
                ),
                ("review", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "theme_ratings",
            },
        ),
        migrations.CreateModel(
            name="TwoFactorAuth",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("is_enabled", models.BooleanField(default=False)),
                (
                    "method",
                    models.CharField(
                        choices=[
                            ("totp", "Authenticator App (TOTP)"),
                            ("sms", "SMS"),
                            ("email", "Email"),
                        ],
                        default="totp",
                        max_length=20,
                    ),
                ),
                (
                    "secret_key",
                    models.CharField(
                        blank=True, help_text="Encrypted TOTP secret", max_length=100
                    ),
                ),
                (
                    "backup_codes",
                    models.JSONField(default=list, help_text="Encrypted backup codes"),
                ),
                ("phone_number", models.CharField(blank=True, max_length=20)),
                ("verified_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "two_factor_auth",
            },
        ),
        migrations.CreateModel(
            name="UserAccessibilityPreference",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "session_id",
                    models.CharField(blank=True, db_index=True, max_length=100),
                ),
                ("high_contrast_mode", models.BooleanField(default=False)),
                ("dark_mode", models.BooleanField(default=False)),
                (
                    "font_size_scale",
                    models.FloatField(default=1.0, help_text="1.0 = 100%, 1.5 = 150%"),
                ),
                (
                    "font_family",
                    models.CharField(blank=True, default="system", max_length=50),
                ),
                ("line_height_scale", models.FloatField(default=1.5)),
                ("letter_spacing", models.FloatField(default=0)),
                ("reduced_motion", models.BooleanField(default=False)),
                ("no_animations", models.BooleanField(default=False)),
                ("screen_reader_hints", models.BooleanField(default=True)),
                ("audio_descriptions", models.BooleanField(default=False)),
                ("keyboard_only", models.BooleanField(default=False)),
                ("extended_time", models.BooleanField(default=False)),
                (
                    "color_blind_mode",
                    models.CharField(
                        choices=[
                            ("none", "None"),
                            ("protanopia", "Protanopia"),
                            ("deuteranopia", "Deuteranopia"),
                            ("tritanopia", "Tritanopia"),
                        ],
                        default="none",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "user_accessibility_preferences",
            },
        ),
        migrations.CreateModel(
            name="UserSubmissionHistory",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "user_identifier",
                    models.CharField(
                        db_index=True,
                        help_text="Email, user ID, or anonymous identifier",
                        max_length=200,
                    ),
                ),
                (
                    "field_values",
                    models.JSONField(default=dict, help_text="Historical field values"),
                ),
                (
                    "completion_time",
                    models.IntegerField(help_text="Time to complete in seconds"),
                ),
                ("device_type", models.CharField(blank=True, max_length=50)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "user_submission_histories",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ValidationLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("input_value", models.CharField(max_length=500)),
                ("is_valid", models.BooleanField(default=False)),
                (
                    "validation_details",
                    models.JSONField(
                        default=dict, help_text="Detailed validation results"
                    ),
                ),
                ("response_time_ms", models.IntegerField(default=0)),
                ("cache_hit", models.BooleanField(default=False)),
                (
                    "success",
                    models.BooleanField(
                        default=True, help_text="Whether validation service responded"
                    ),
                ),
                ("error_message", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "validation_logs",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ValidationRule",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=255)),
                (
                    "rule_type",
                    models.CharField(
                        choices=[
                            ("required", "Required"),
                            ("email", "Email Format"),
                            ("phone", "Phone Format"),
                            ("url", "URL Format"),
                            ("regex", "Regular Expression"),
                            ("min_length", "Minimum Length"),
                            ("max_length", "Maximum Length"),
                            ("min_value", "Minimum Value"),
                            ("max_value", "Maximum Value"),
                            ("date_range", "Date Range"),
                            ("file_type", "File Type"),
                            ("file_size", "File Size"),
                            ("unique", "Unique Value"),
                            ("custom_api", "Custom API Validation"),
                            ("dependent", "Dependent Field"),
                        ],
                        max_length=50,
                    ),
                ),
                ("field_id", models.CharField(max_length=100)),
                ("config", models.JSONField(default=dict)),
                ("error_message", models.CharField(max_length=500)),
                ("validate_on_blur", models.BooleanField(default=True)),
                ("validate_on_submit", models.BooleanField(default=True)),
                ("validate_realtime", models.BooleanField(default=False)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "validation_rules",
                "ordering": ["field_id", "rule_type"],
            },
        ),
        migrations.CreateModel(
            name="VoiceDesignSession",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("session_token", models.CharField(max_length=255, unique=True)),
                (
                    "current_schema",
                    models.JSONField(
                        default=dict, help_text="Current form schema being designed"
                    ),
                ),
                (
                    "command_history",
                    models.JSONField(
                        default=list, help_text="List of voice commands and actions"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("last_activity_at", models.DateTimeField(auto_now=True)),
                ("ended_at", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "voice_design_sessions",
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="WebhookEndpoint",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("url", models.URLField()),
                (
                    "method",
                    models.CharField(
                        choices=[("POST", "POST"), ("PUT", "PUT"), ("PATCH", "PATCH")],
                        default="POST",
                        max_length=10,
                    ),
                ),
                (
                    "headers",
                    models.JSONField(default=dict, help_text="Custom HTTP headers"),
                ),
                (
                    "payload_template",
                    models.TextField(
                        blank=True,
                        help_text="Custom payload template (uses Jinja2 syntax)",
                    ),
                ),
                (
                    "events",
                    models.JSONField(
                        default=list,
                        help_text="Events that trigger this webhook (e.g., ['submission.created', 'submission.updated'])",
                    ),
                ),
                (
                    "retry_count",
                    models.IntegerField(
                        default=3, help_text="Number of retry attempts on failure"
                    ),
                ),
                (
                    "retry_delay",
                    models.IntegerField(
                        default=60, help_text="Delay between retries in seconds"
                    ),
                ),
                (
                    "timeout",
                    models.IntegerField(
                        default=30, help_text="Request timeout in seconds"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                ("success_count", models.IntegerField(default=0)),
                ("failure_count", models.IntegerField(default=0)),
                ("last_triggered_at", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "webhook_endpoints",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="WebhookLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("event", models.CharField(max_length=100)),
                ("status_code", models.IntegerField(null=True)),
                ("request_payload", models.JSONField(default=dict)),
                ("response_body", models.TextField(blank=True)),
                ("error_message", models.TextField(blank=True)),
                (
                    "duration_ms",
                    models.IntegerField(
                        help_text="Request duration in milliseconds", null=True
                    ),
                ),
                ("retry_attempt", models.IntegerField(default=0)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "webhook_logs_marketplace",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="WorkflowActionLog",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "action_type",
                    models.CharField(
                        choices=[
                            ("send_email", "Send Email"),
                            ("send_sms", "Send SMS"),
                            ("webhook", "Call Webhook"),
                            ("crm_sync", "Sync to CRM"),
                            ("slack_notify", "Slack Notification"),
                            ("assign_lead", "Assign Lead"),
                            ("update_score", "Update Lead Score"),
                            ("add_tag", "Add Tag"),
                            ("delay", "Delay"),
                            ("condition", "Condition Check"),
                        ],
                        max_length=30,
                    ),
                ),
                ("action_config", models.JSONField(default=dict)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("success", "Success"),
                            ("failed", "Failed"),
                            ("skipped", "Skipped"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                (
                    "result_data",
                    models.JSONField(
                        default=dict, help_text="Response/result from action"
                    ),
                ),
                ("error_message", models.TextField(blank=True)),
                ("executed_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "workflow_action_logs",
                "ordering": ["executed_at"],
            },
        ),
        migrations.CreateModel(
            name="WorkflowExecution",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("running", "Running"),
                            ("completed", "Completed"),
                            ("failed", "Failed"),
                            ("cancelled", "Cancelled"),
                            ("waiting", "Waiting for delay"),
                        ],
                        default="running",
                        max_length=20,
                    ),
                ),
                ("current_action_index", models.IntegerField(default=0)),
                (
                    "context_data",
                    models.JSONField(
                        default=dict, help_text="Data passed between actions"
                    ),
                ),
                ("error_message", models.TextField(blank=True)),
                ("started_at", models.DateTimeField(auto_now_add=True)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                (
                    "next_action_at",
                    models.DateTimeField(
                        blank=True, help_text="When to execute next action", null=True
                    ),
                ),
            ],
            options={
                "db_table": "workflow_executions",
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="WorkflowPipeline",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=200)),
                ("description", models.TextField(blank=True)),
                (
                    "stages",
                    models.JSONField(
                        default=list,
                        help_text="List of workflow stages with configuration",
                    ),
                ),
                ("enable_sla_tracking", models.BooleanField(default=False)),
                (
                    "default_sla_hours",
                    models.IntegerField(
                        default=24, help_text="Default SLA for each stage"
                    ),
                ),
                (
                    "auto_progression_rules",
                    models.JSONField(
                        default=dict, help_text="Rules for automatic stage progression"
                    ),
                ),
                ("is_active", models.BooleanField(default=True)),
                (
                    "is_default",
                    models.BooleanField(
                        default=False, help_text="Default pipeline for this form"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "workflow_pipelines",
                "ordering": ["form", "created_at"],
            },
        ),
        migrations.CreateModel(
            name="WorkflowStage",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("name", models.CharField(max_length=100)),
                ("slug", models.SlugField(max_length=100)),
                ("description", models.TextField(blank=True)),
                ("order", models.IntegerField(default=0)),
                (
                    "color",
                    models.CharField(
                        default="#3B82F6", help_text="Hex color code", max_length=7
                    ),
                ),
                ("icon", models.CharField(blank=True, max_length=50)),
                (
                    "can_view_roles",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Roles that can view submissions in this stage",
                        verbose_name=models.CharField(max_length=50),
                    ),
                ),
                (
                    "can_edit_roles",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Roles that can edit submissions in this stage",
                        verbose_name=models.CharField(max_length=50),
                    ),
                ),
                (
                    "can_progress_roles",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Roles that can move submissions to next stage",
                        verbose_name=models.CharField(max_length=50),
                    ),
                ),
                (
                    "sla_hours",
                    models.IntegerField(
                        blank=True, help_text="Override pipeline SLA", null=True
                    ),
                ),
                ("notify_on_enter", models.BooleanField(default=False)),
                ("notify_on_sla_breach", models.BooleanField(default=True)),
                (
                    "notification_recipients",
                    models.JSONField(
                        blank=True,
                        default=list,
                        verbose_name=models.EmailField(max_length=254),
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "workflow_stages",
                "ordering": ["pipeline", "order"],
            },
        ),
        migrations.CreateModel(
            name="WorkflowStageTransition",
            fields=[
                (
                    "id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ("transition_reason", models.TextField(blank=True)),
                ("is_automatic", models.BooleanField(default=False)),
                (
                    "time_in_previous_stage",
                    models.IntegerField(
                        default=0, help_text="Minutes spent in previous stage"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "workflow_stage_transitions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.AlterModelOptions(
            name="formcomment",
            options={"ordering": ["created_at"]},
        ),
        migrations.RemoveConstraint(
            model_name="formstep",
            name="unique_form_step",
        ),
        migrations.RemoveConstraint(
            model_name="teammember",
            name="unique_team_member",
        ),
        migrations.RenameField(
            model_name="formcomment",
            old_name="resolved",
            new_name="is_resolved",
        ),
        migrations.RenameIndex(
            model_name="auditlog",
            new_name="audit_logs_user_id_6193b2_idx",
            old_name="idx_user_created",
        ),
        migrations.RenameIndex(
            model_name="auditlog",
            new_name="audit_logs_resourc_bda8a6_idx",
            old_name="idx_resource",
        ),
        migrations.RenameIndex(
            model_name="formanalytics",
            new_name="form_analyt_form_id_3e7484_idx",
            old_name="idx_form_created",
        ),
        migrations.RenameIndex(
            model_name="formanalytics",
            new_name="form_analyt_session_9ede77_idx",
            old_name="idx_session_id",
        ),
        migrations.RenameIndex(
            model_name="formdraft",
            new_name="form_drafts_draft_t_90c939_idx",
            old_name="form_drafts_draft_t_0a9e08_idx",
        ),
        migrations.RenameIndex(
            model_name="formdraft",
            new_name="form_drafts_form_id_314547_idx",
            old_name="form_drafts_form_id_e77c43_idx",
        ),
        migrations.RenameIndex(
            model_name="partialsubmission",
            new_name="partial_sub_resume__da884e_idx",
            old_name="idx_resume_token",
        ),
        migrations.RenameIndex(
            model_name="partialsubmission",
            new_name="partial_sub_form_id_77f118_idx",
            old_name="idx_form_email",
        ),
        migrations.AddField(
            model_name="formcomment",
            name="mentions",
            field=models.JSONField(
                default=list, help_text="List of mentioned user IDs"
            ),
        ),
        migrations.AddField(
            model_name="formcomment",
            name="parent_comment",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="replies",
                to="forms.formcomment",
            ),
        ),
        migrations.AlterField(
            model_name="abtest",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="ab_tests_basic",
                to="forms.form",
            ),
        ),
        migrations.AlterField(
            model_name="consentrecord",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="consent_records",
                to="forms.submission",
            ),
        ),
        migrations.AlterField(
            model_name="formabtest",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="ab_tests_advanced",
                to="forms.form",
            ),
        ),
        migrations.AlterField(
            model_name="formcomment",
            name="field_id",
            field=models.CharField(
                help_text="Field this comment is attached to", max_length=100
            ),
        ),
        migrations.AlterField(
            model_name="formcomment",
            name="resolved_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="resolved_comments",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AlterUniqueTogether(
            name="formstep",
            unique_together={("form", "step_number")},
        ),
        migrations.AlterUniqueTogether(
            name="teammember",
            unique_together={("team", "user")},
        ),
        migrations.AddIndex(
            model_name="formcomment",
            index=models.Index(
                fields=["form", "field_id"], name="form_commen_form_id_88cbb0_idx"
            ),
        ),
        migrations.AddField(
            model_name="abtestresult",
            name="ab_test",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="results",
                to="forms.abtest",
            ),
        ),
        migrations.AddField(
            model_name="abtestresult",
            name="variant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="forms.formvariant"
            ),
        ),
        migrations.AddField(
            model_name="accessibilityaudit",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="accessibility_audits",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="accessibilityconfig",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="accessibility_config",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="accessibilityissue",
            name="audit",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="audit_issues",
                to="forms.accessibilityaudit",
            ),
        ),
        migrations.AddField(
            model_name="accessibilitytestresult",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="accessibility_tests",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="activitylog",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="activity_logs",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="activitylog",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="alertconfig",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="alert_configs",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="alerthistory",
            name="acknowledged_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="alerthistory",
            name="alert_config",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="history",
                to="forms.alertconfig",
            ),
        ),
        migrations.AddField(
            model_name="assetoptimization",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="optimized_assets",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="autofilltemplate",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="autofill_templates",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="autosaveconfig",
            name="user",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="autosave_config",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="batchprocessingqueue",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="forms.submission"
            ),
        ),
        migrations.AddField(
            model_name="behaviorinsight",
            name="dismissed_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="behaviorinsight",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="behavior_insights",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="brandguideline",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="brand_guidelines",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="bulkaction",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="bulk_actions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="bulkaction",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="bulk_actions",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="batchprocessingqueue",
            name="bulk_action",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="queue_items",
                to="forms.bulkaction",
            ),
        ),
        migrations.AddField(
            model_name="completionprediction",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="completion_predictions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="compliancereport",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="compliance_reports",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="compliancescan",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="compliance_scans",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="conflictresolution",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="conflicts",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="conflictresolution",
            name="resolved_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="consenttracking",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="consent_tracking",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="customformtemplate",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="form_templates",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="customformtemplate",
            name="team",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="team_templates",
                to="users.team",
            ),
        ),
        migrations.AddField(
            model_name="dailyformstats",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="daily_stats",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="datacleansinglog",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="cleansing_logs",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="datacleansingrule",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="cleansing_rules",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="datacleansinglog",
            name="rule",
            field=models.ForeignKey(
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to="forms.datacleansingrule",
            ),
        ),
        migrations.AddField(
            model_name="dataprivacyrequest",
            name="processed_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="processed_privacy_requests",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="dataqualityscore",
            name="submission",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="quality_score",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="draftversion",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="draft_versions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="draftversion",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="dropoffanalysis",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="dropoff_analysis",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="duplicatedetection",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="duplicate_detections",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="duplicatedetection",
            name="merged_into",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="merged_submissions",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="duplicatedetection",
            name="resolved_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="resolved_duplicates",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="duplicatedetection",
            name="submission_a",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="duplicate_checks_a",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="duplicatedetection",
            name="submission_b",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="duplicate_checks_b",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="encryptedsubmission",
            name="submission",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="encryption",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="exportwithquality",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="quality_exports",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="exportwithquality",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="externalvalidation",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="external_validations",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="externalvalidationrule",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="validation_rules",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="externalvalidationrule",
            name="service_provider",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="validation_rules",
                to="forms.externalapiprovider",
            ),
        ),
        migrations.AddField(
            model_name="fieldautopopulationlog",
            name="submission",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="fieldcompletionmetric",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="field_metrics",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="fielddependency",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="field_dependencies",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="fieldautopopulationlog",
            name="dependency",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="logs",
                to="forms.fielddependency",
            ),
        ),
        migrations.AddField(
            model_name="fieldprediction",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="field_predictions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formbenchmark",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="benchmarks",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formbuilderautosave",
            name="form",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="builder_autosaves",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formbuilderautosave",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="form_autosaves",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formbuildercrashrecovery",
            name="autosave",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="crash_recoveries",
                to="forms.formbuilderautosave",
            ),
        ),
        migrations.AddField(
            model_name="formbuildercrashrecovery",
            name="form",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="crash_recoveries",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formbuildercrashrecovery",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="crash_recoveries",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formcacheconfig",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="cache_config",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formchange",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="changes",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formchange",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="formclone",
            name="cloned_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="formclone",
            name="cloned_form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="clone_source",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formclone",
            name="original_form",
            field=models.ForeignKey(
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="clones",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formcollaborator",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="collaborators",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formcollaborator",
            name="invited_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="invited_collaborators",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formcollaborator",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="collaborative_forms",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formeditsession",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="edit_sessions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formeditsession",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="formchange",
            name="session",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="changes",
                to="forms.formeditsession",
            ),
        ),
        migrations.AddField(
            model_name="formfunnel",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="funnels",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formheatmapdata",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="heatmap_data",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formintegration",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="form_integrations",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formlifecycleevent",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="lifecycle_events",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formlifecycleevent",
            name="triggered_by",
            field=models.ForeignKey(
                blank=True,
                help_text="User who triggered the event (if manual)",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formnotification",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="push_notifications",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formoptimizationrecommendation",
            name="applied_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formoptimizationrecommendation",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="optimization_recommendations",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formpreviewsession",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="formpreviewsession",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="preview_sessions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formpublishschedule",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="publish_schedules",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formpublishschedule",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="formreview",
            name="reviewer",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="form_reviews",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formreviewworkflow",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="review_workflow",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formreviewworkflow",
            name="reviewers",
            field=models.ManyToManyField(
                related_name="review_assignments",
                through="forms.FormReview",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formreviewworkflow",
            name="submitted_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="submitted_reviews",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formreview",
            name="workflow",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="reviews",
                to="forms.formreviewworkflow",
            ),
        ),
        migrations.AddField(
            model_name="formschedule",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="schedule",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="accessibilitytestresult",
            name="test_run",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="forms.formtestrun",
            ),
        ),
        migrations.AddField(
            model_name="formtestsuite",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="formtestsuite",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="test_suites",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formtestrun",
            name="test_suite",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="test_runs",
                to="forms.formtestsuite",
            ),
        ),
        migrations.AddField(
            model_name="formtheme",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="theme_config",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="formtranslation",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="translations",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="funnelstepmetric",
            name="funnel",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="step_metrics",
                to="forms.formfunnel",
            ),
        ),
        migrations.AddField(
            model_name="generatedcontent",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="generated_content",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="geolocationfield",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="geolocations",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="integrationconnection",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="integration_connections",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="integrationconnection",
            name="provider",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="forms.integrationprovider",
            ),
        ),
        migrations.AddField(
            model_name="integrationtemplate",
            name="provider",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="templates",
                to="forms.integrationprovider",
            ),
        ),
        migrations.AddField(
            model_name="integrationworkflow",
            name="form",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="workflows",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="integrationworkflow",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="workflows",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="ipaccesscontrol",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="ip_controls",
                to="forms.form",
            ),
        ),
        migrations.AddIndex(
            model_name="ipreputationcache",
            index=models.Index(
                fields=["ip_address"], name="ip_reputati_ip_addr_bd68bf_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="ipreputationcache",
            index=models.Index(
                fields=["expires_at"], name="ip_reputati_expires_79ecf6_idx"
            ),
        ),
        migrations.AddField(
            model_name="formtranslation",
            name="language",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="forms.language"
            ),
        ),
        migrations.AddField(
            model_name="mobileanalytics",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="mobile_analytics",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="mobileoptimization",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="mobile_optimization",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="nurturingworkflow",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="nurturing_workflows",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="offlineformdraft",
            name="form",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="offline_drafts",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="offlineformdraft",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="offline_form_drafts",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="offlinesubmission",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="offline_submissions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="optimizationreport",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="optimization_reports",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="optimizationsuggestion",
            name="ab_test",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to="forms.formabtest",
            ),
        ),
        migrations.AddField(
            model_name="optimizationsuggestion",
            name="applied_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="optimizationsuggestion",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="optimization_suggestions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="performancealert",
            name="acknowledged_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="acknowledged_alerts",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="performancealert",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="performance_alerts",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="performancemetric",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="performance_metrics",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="personalizationrule",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="personalization_rules",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="predictionfeedback",
            name="prediction",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="feedback",
                to="forms.fieldprediction",
            ),
        ),
        migrations.AddField(
            model_name="predictionfeedback",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="forms.submission"
            ),
        ),
        migrations.AddField(
            model_name="progressivedisclosure",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="progressive_disclosure",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="pushnotificationsubscription",
            name="user",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="push_subscriptions",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formnotification",
            name="subscription",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="notifications",
                to="forms.pushnotificationsubscription",
            ),
        ),
        migrations.AddField(
            model_name="qrcodescan",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="qr_scans",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="qrcodescan",
            name="submission",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="qr_scans",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="recurringform",
            name="template_form",
            field=models.ForeignKey(
                help_text="Template form to clone",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="recurring_config",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="recurringform",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="recurring_forms",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="securityauditlog",
            name="user",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="securityscan",
            name="submission",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="security_scan",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="sessionrecording",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="session_recordings",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="sessionevent",
            name="session",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="events",
                to="forms.sessionrecording",
            ),
        ),
        migrations.AddField(
            model_name="smartdefault",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="smart_defaults",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="spamdetectionconfig",
            name="form",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="spam_config",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="spamdetectionlog",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="spam_logs",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="spamdetectionlog",
            name="submission",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="ssoprovider",
            name="organization",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="sso_providers",
                to="users.team",
            ),
        ),
        migrations.AddField(
            model_name="submissioncomment",
            name="mentioned_users",
            field=models.ManyToManyField(
                blank=True,
                related_name="mentioned_in_comments",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="submissioncomment",
            name="parent_comment",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="replies",
                to="forms.submissioncomment",
            ),
        ),
        migrations.AddField(
            model_name="submissioncomment",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="comments",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="submissioncomment",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="submission_comments",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="submissionnote",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="notes",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="submissionnote",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="submissiontranslation",
            name="language",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="forms.language"
            ),
        ),
        migrations.AddField(
            model_name="submissiontranslation",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="translations",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="submissionworkflowstatus",
            name="assigned_to",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="assigned_submissions",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="submissionworkflowstatus",
            name="submission",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="workflow_status",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="templatefavorite",
            name="template",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="favorited_by",
                to="forms.customformtemplate",
            ),
        ),
        migrations.AddField(
            model_name="templatefavorite",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="template_favorites",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="theme",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="themes",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="formtheme",
            name="theme",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="forms",
                to="forms.theme",
            ),
        ),
        migrations.AddField(
            model_name="themerating",
            name="theme",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="ratings",
                to="forms.theme",
            ),
        ),
        migrations.AddField(
            model_name="themerating",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="theme_ratings",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="twofactorauth",
            name="user",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="two_factor",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="useraccessibilitypreference",
            name="user",
            field=models.OneToOneField(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="accessibility_preferences",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="usersubmissionhistory",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="user_histories",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="validationlog",
            name="submission",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="validationlog",
            name="validation_rule",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="logs",
                to="forms.externalvalidationrule",
            ),
        ),
        migrations.AddField(
            model_name="validationrule",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="validation_rules",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="voicedesignsession",
            name="form",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="voice_sessions",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="voicedesignsession",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="voice_sessions",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="webhookendpoint",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="webhooks",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="webhookendpoint",
            name="user",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="webhooks",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="webhooklog",
            name="submission",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="webhooklog",
            name="webhook",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="logs",
                to="forms.webhookendpoint",
            ),
        ),
        migrations.AddField(
            model_name="workflowexecution",
            name="submission",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="workflow_executions",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="workflowexecution",
            name="workflow",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="executions",
                to="forms.nurturingworkflow",
            ),
        ),
        migrations.AddField(
            model_name="workflowactionlog",
            name="execution",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="action_logs",
                to="forms.workflowexecution",
            ),
        ),
        migrations.AddField(
            model_name="workflowpipeline",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL
            ),
        ),
        migrations.AddField(
            model_name="workflowpipeline",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="workflow_pipelines",
                to="forms.form",
            ),
        ),
        migrations.AddField(
            model_name="submissionworkflowstatus",
            name="pipeline",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="forms.workflowpipeline"
            ),
        ),
        migrations.AddField(
            model_name="workflowstage",
            name="pipeline",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="stage_definitions",
                to="forms.workflowpipeline",
            ),
        ),
        migrations.AddField(
            model_name="submissionworkflowstatus",
            name="current_stage",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="current_submissions",
                to="forms.workflowstage",
            ),
        ),
        migrations.AddField(
            model_name="workflowstagetransition",
            name="from_stage",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="transitions_from",
                to="forms.workflowstage",
            ),
        ),
        migrations.AddField(
            model_name="workflowstagetransition",
            name="submission",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="stage_transitions",
                to="forms.submission",
            ),
        ),
        migrations.AddField(
            model_name="workflowstagetransition",
            name="to_stage",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="transitions_to",
                to="forms.workflowstage",
            ),
        ),
        migrations.AddField(
            model_name="workflowstagetransition",
            name="transitioned_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddIndex(
            model_name="activitylog",
            index=models.Index(
                fields=["form", "-created_at"], name="activity_lo_form_id_1332f8_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="bulkaction",
            index=models.Index(
                fields=["form", "-created_at"], name="bulk_action_form_id_d8219e_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="bulkaction",
            index=models.Index(
                fields=["user", "-created_at"], name="bulk_action_user_id_038e74_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="bulkaction",
            index=models.Index(fields=["status"], name="bulk_action_status_ad1ffa_idx"),
        ),
        migrations.AddIndex(
            model_name="batchprocessingqueue",
            index=models.Index(
                fields=["bulk_action", "status"], name="batch_proce_bulk_ac_0f0055_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="dailyformstats",
            index=models.Index(
                fields=["form", "-date"], name="daily_form__form_id_a79501_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="dailyformstats",
            unique_together={("form", "date")},
        ),
        migrations.AlterUniqueTogether(
            name="draftversion",
            unique_together={("form", "version_number")},
        ),
        migrations.AlterUniqueTogether(
            name="dropoffanalysis",
            unique_together={("form", "field_id", "analysis_date")},
        ),
        migrations.AlterUniqueTogether(
            name="duplicatedetection",
            unique_together={("submission_a", "submission_b")},
        ),
        migrations.AddIndex(
            model_name="externalvalidation",
            index=models.Index(
                fields=["submission", "field_id"], name="external_va_submiss_ecacc3_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="externalvalidationrule",
            unique_together={("form", "field_id")},
        ),
        migrations.AddIndex(
            model_name="fieldcompletionmetric",
            index=models.Index(
                fields=["form", "date"], name="field_compl_form_id_b19b33_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="fieldcompletionmetric",
            unique_together={("form", "field_id", "date")},
        ),
        migrations.AddIndex(
            model_name="fielddependency",
            index=models.Index(
                fields=["form", "source_field_id"],
                name="field_depen_form_id_8ee04b_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="fieldautopopulationlog",
            index=models.Index(
                fields=["dependency", "-created_at"],
                name="field_autop_depende_3ad4fc_idx",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="fieldprediction",
            unique_together={("form", "field_id")},
        ),
        migrations.AddIndex(
            model_name="formbuilderautosave",
            index=models.Index(
                fields=["user", "form"], name="form_builde_user_id_fc40d4_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="formbuilderautosave",
            index=models.Index(
                fields=["user", "temp_id"], name="form_builde_user_id_19d9af_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="formcollaborator",
            unique_together={("form", "user")},
        ),
        migrations.AddIndex(
            model_name="formeditsession",
            index=models.Index(
                fields=["form", "is_active"], name="form_edit_s_form_id_12dfb0_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="formchange",
            index=models.Index(
                fields=["form", "created_at"], name="form_change_form_id_4bd48a_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="formheatmapdata",
            index=models.Index(
                fields=["form", "date"], name="form_heatma_form_id_051de2_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="formheatmapdata",
            index=models.Index(
                fields=["form", "field_id"], name="form_heatma_form_id_a59db1_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="formintegration",
            unique_together={("form", "integration_id")},
        ),
        migrations.AddIndex(
            model_name="formlifecycleevent",
            index=models.Index(
                fields=["form", "-created_at"], name="form_lifecy_form_id_56cbf1_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="formoptimizationrecommendation",
            index=models.Index(
                fields=["form", "status"], name="form_optimi_form_id_c69b58_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="formreview",
            unique_together={("workflow", "reviewer")},
        ),
        migrations.AddIndex(
            model_name="formtestrun",
            index=models.Index(
                fields=["test_suite", "-created_at"],
                name="form_test_r_test_su_f1e804_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="formtestrun",
            index=models.Index(fields=["status"], name="form_test_r_status_080b0b_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="funnelstepmetric",
            unique_together={("funnel", "step_index", "date")},
        ),
        migrations.AlterUniqueTogether(
            name="integrationconnection",
            unique_together={("user", "provider", "name")},
        ),
        migrations.AlterUniqueTogether(
            name="formtranslation",
            unique_together={("form", "language")},
        ),
        migrations.AddIndex(
            model_name="mobileanalytics",
            index=models.Index(
                fields=["form", "device_type"], name="mobile_anal_form_id_e3928f_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="offlinesubmission",
            index=models.Index(
                fields=["device_id", "status"], name="offline_sub_device__6a7427_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="performancemetric",
            index=models.Index(
                fields=["form", "metric_type", "created_at"],
                name="performance_form_id_54ff87_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="performancemetric",
            index=models.Index(
                fields=["form", "device_type"], name="performance_form_id_48ec89_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="securityauditlog",
            index=models.Index(
                fields=["user", "-created_at"], name="security_au_user_id_cf81f4_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="securityauditlog",
            index=models.Index(
                fields=["event_type", "-created_at"],
                name="security_au_event_t_0b961c_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="sessionrecording",
            index=models.Index(
                fields=["form", "started_at"], name="session_rec_form_id_8da3df_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="sessionrecording",
            index=models.Index(
                fields=["form", "completed_form"], name="session_rec_form_id_83eca7_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="sessionevent",
            index=models.Index(
                fields=["session", "timestamp"], name="session_eve_session_894e66_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="smartdefault",
            unique_together={("form", "field_id")},
        ),
        migrations.AddIndex(
            model_name="spamdetectionlog",
            index=models.Index(
                fields=["form", "-created_at"], name="spam_detect_form_id_f004fe_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="spamdetectionlog",
            index=models.Index(
                fields=["is_spam"], name="spam_detect_is_spam_02dd9a_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="spamdetectionlog",
            index=models.Index(
                fields=["ip_address"], name="spam_detect_ip_addr_9e7ede_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="submissioncomment",
            index=models.Index(
                fields=["submission", "created_at"],
                name="submission__submiss_eaacc8_idx",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="submissiontranslation",
            unique_together={("submission", "language")},
        ),
        migrations.AlterUniqueTogether(
            name="templatefavorite",
            unique_together={("user", "template")},
        ),
        migrations.AddIndex(
            model_name="theme",
            index=models.Index(
                fields=["is_public", "-downloads_count"],
                name="themes_is_publ_3b7f5a_idx",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="themerating",
            unique_together={("theme", "user")},
        ),
        migrations.AddIndex(
            model_name="usersubmissionhistory",
            index=models.Index(
                fields=["user_identifier", "form"],
                name="user_submis_user_id_7d08af_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="validationlog",
            index=models.Index(
                fields=["validation_rule", "-created_at"],
                name="validation__validat_9728ce_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="webhooklog",
            index=models.Index(
                fields=["webhook", "-created_at"], name="webhook_log_webhook_ae7936_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="workflowexecution",
            index=models.Index(
                fields=["workflow", "status"], name="workflow_ex_workflo_05fdb2_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="workflowexecution",
            index=models.Index(
                fields=["next_action_at"], name="workflow_ex_next_ac_7ae9a9_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="workflowstage",
            unique_together={("pipeline", "slug")},
        ),
        migrations.AddIndex(
            model_name="submissionworkflowstatus",
            index=models.Index(
                fields=["pipeline", "current_stage"],
                name="submission__pipelin_2cb37a_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="submissionworkflowstatus",
            index=models.Index(
                fields=["assigned_to"], name="submission__assigne_fa95e7_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="submissionworkflowstatus",
            index=models.Index(
                fields=["is_sla_breached"], name="submission__is_sla__da5202_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="workflowstagetransition",
            index=models.Index(
                fields=["submission", "-created_at"],
                name="workflow_st_submiss_1a76cf_idx",
            ),
        ),
    ]
